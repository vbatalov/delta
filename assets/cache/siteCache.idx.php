<?php
$c=&$this->config;$c['a']="30";$c['aliaslistingfolder']="1";$c['allow_duplicate_alias']="0";$c['allow_eval']="with_scan";$c['automatic_alias']="1";$c['auto_menuindex']="1";$c['auto_template_logic']="parent";$c['blocked_minutes']="10";$c['cache_default']="1";$c['cache_type']="2";$c['captcha_words']="EVO,Access,Better,BitCode,Chunk,Cache,Desc,Design,Excell,Enjoy,URLs,TechView,Gerald,Griff,Humphrey,Holiday,Intel,Integration,Joystick,Join(),Oscope,Genetic,Light,Likeness,Marit,Maaike,Niche,Netherlands,Ordinance,Oscillo,Parser,Phusion,Query,Question,Regalia,Righteous,Snippet,Sentinel,Template,Thespian,Unity,Enterprise,Verily,Tattoo,Veri,Website,WideWeb,Yap,Yellow,Zebra,Zygote";$c['captcha_words_default']="EVO,Access,Better,BitCode,Chunk,Cache,Desc,Design,Excell,Enjoy,URLs,TechView,Gerald,Griff,Humphrey,Holiday,Intel,Integration,Joystick,Join(),Oscope,Genetic,Light,Likeness,Marit,Maaike,Niche,Netherlands,Ordinance,Oscillo,Parser,Phusion,Query,Question,Regalia,Righteous,Snippet,Sentinel,Template,Thespian,Unity,Enterprise,Verily,Tattoo,Veri,Website,WideWeb,Yap,Yellow,Zebra,Zygote";$c['check_files_onlogin']="index.php\r\n.htaccess\r\nmanager/index.php\r\nmanager/includes/config.inc.php";$c['chunk_processor']="";$c['clean_uploaded_filename']="1";$c['clientResize']="0";$c['custom_contenttype']="application/rss+xml,application/pdf,application/vnd.ms-word,application/vnd.ms-excel,text/html,text/css,text/xml,text/javascript,text/plain,application/json";$c['datepicker_offset']="-10";$c['datetime_format']="dd-mm-YYYY";$c['default_template']="3";$c['denyExtensionRename']="0";$c['denyZipDownload']="0";$c['docid_incrmnt_method']="0";$c['editor_css_path']="";$c['editor_css_selectors']="";$c['emailsender']="admin@admin.ru";$c['emailsubject']="Данные для авторизации";$c['emailsubject_default']="Данные для авторизации";$c['email_method']="mail";$c['email_sender_method']="1";$c['enable_at_syntax']="1";$c['enable_bindings']="1";$c['enable_cache']="1";$c['enable_filter']="1";$c['enable_mootools']="1";$c['error_page']="12";$c['error_reporting']="1";$c['failed_login_attempts']="10";$c['fck_editor_autolang']="0";$c['fck_editor_toolbar']="standard";$c['fe_editor_lang']="russian-UTF8";$c['filemanager_path']="/home/a/alphadelta/w10-xnl6zzw05e81/public_html/";$c['friendly_alias_urls']="1";$c['friendly_urls']="1";$c['friendly_url_prefix']="";$c['friendly_url_suffix']="/";$c['global_tabs']="1";$c['group_tvs']="2";$c['jpegQuality']="90";$c['lang_code']="ru";$c['login_bg']="";$c['login_form_position']="center";$c['login_form_style']="dark";$c['login_logo']="";$c['mail_check_timeperiod']="600";$c['make_folders']="0";$c['manager_direction']="ltr";$c['manager_language']="russian-UTF8";$c['manager_layout']="4";$c['manager_menu_position']="top";$c['manager_theme']="default";$c['manager_theme_mode']="3";$c['maxImageHeight']="2200";$c['maxImageWidth']="2600";$c['minifyphp_incache']="0";$c['modx_charset']="UTF-8";$c['new_file_permissions']="0644";$c['new_folder_permissions']="0755";$c['noThumbnailsRecreation']="0";$c['number_of_logs']="100";$c['number_of_messages']="40";$c['number_of_results']="30";$c['old_template']="3";$c['publish_default']="1";$c['pwd_hash_algo']="UNCRYPT";$c['rb_base_dir']="/home/a/alphadelta/w10-xnl6zzw05e81/public_html/assets/";$c['rb_base_url']="assets/";$c['rb_webuser']="0";$c['reload_captcha_words']="";$c['reload_emailsubject']="";$c['reload_signupemail_message']="";$c['reload_site_unavailable']="";$c['reload_system_email_webreminder_message']="";$c['reload_websignupemail_message']="";$c['remember_last_tab']="1";$c['resource_tree_node_name']="pagetitle";$c['rss_url_news']="";$c['rss_url_security']="";$c['safe_functions_at_eval']="time,date,strtotime,strftime";$c['search_default']="1";$c['send_errormail']="0";$c['seostrict']="1";$c['server_offset_time']="0";$c['server_protocol']="http";$c['session.cookie.lifetime']="604800";$c['session_timeout']="15";$c['settings_version']="1.4.8";$c['showHiddenFiles']="0";$c['show_fullscreen_btn']="0";$c['show_newresource_btn']="0";$c['show_picker']="0";$c['signupemail_message']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации в системе управления сайтом [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации в системе управления сайтом ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['siteunavailable_message_default']="В настоящее время сайт недоступен.";$c['site_id']="5c5d4d0e9d1d6";$c['site_name']="Центр оборудования";$c['site_start']="1";$c['site_status']="0";$c['site_unavailable_message']="В настоящее время сайт недоступен.";$c['site_unavailable_page']="";$c['smtp_auth']="0";$c['smtp_host']="smtp.example.com";$c['smtp_port']="25";$c['smtp_secure']="none";$c['smtp_username']="you@example.com";$c['strip_image_paths']="1";$c['system_email_signup_default']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации в системе управления сайтом [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации в системе управления сайтом ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['system_email_webreminder_default']="Здравствуйте, [+uid+]!\r\n\r\nЧтобы активировать ваш новый пароль, перейдите по следующей ссылке:\r\n\r\n[+surl+]\r\n\r\nПозже вы сможете использовать следующий пароль для авторизации: [+pwd+]\r\n\r\nЕсли это письмо пришло к вам по ошибке, пожалуйста, проигнорируйте его.\r\n\r\nС уважением, Администрация";$c['system_email_websignup_default']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации на [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации на [+sname+] ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['sys_files_checksum']="a:4:{s:57:\"/home/a/alphadelta/w10-xnl6zzw05e81/public_html/index.php\";s:32:\"2f6a89952c4b21dd233f0dcb2408d3e7\";s:57:\"/home/a/alphadelta/w10-xnl6zzw05e81/public_html/.htaccess\";s:32:\"26c5a3dd2b31c8eded62db9f818dee89\";s:65:\"/home/a/alphadelta/w10-xnl6zzw05e81/public_html/manager/index.php\";s:32:\"51bc51065087f363f71def2418a8090c\";s:79:\"/home/a/alphadelta/w10-xnl6zzw05e81/public_html/manager/includes/config.inc.php\";s:32:\"3df9edd8047affb98750cb12d51170a1\";}";$c['theme_refresher']="";$c['thumbHeight']="150";$c['thumbsDir']=".thumbs";$c['thumbWidth']="150";$c['tinymce4_blockFormats']="Paragraph=p;Header 1=h1;Header 2=h2;Header 3=h3";$c['tinymce4_custom_buttons1']="undo redo | cut copy paste | searchreplace | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent blockquote | styleselect";$c['tinymce4_custom_buttons2']="link unlink anchor image media codesample table | hr removeformat | subscript superscript charmap | nonbreaking | visualchars visualblocks print preview fullscreen code formatselect";$c['tinymce4_custom_buttons3']="";$c['tinymce4_custom_buttons4']="";$c['tinymce4_custom_plugins']="advlist autolink lists link image charmap print preview hr anchor pagebreak searchreplace wordcount visualblocks visualchars code fullscreen spellchecker insertdatetime media nonbreaking save table contextmenu directionality emoticons template paste textcolor codesample colorpicker textpattern imagetools paste modxlink youtube";$c['tinymce4_element_format']="xhtml";$c['tinymce4_entermode']="p";$c['tinymce4_schema']="html5";$c['tinymce4_skin']="lightgray";$c['tinymce4_skintheme']="inlite";$c['tinymce4_template_chunks']="";$c['tinymce4_template_docs']="";$c['tinymce4_theme']="custom";$c['track_visitors']="0";$c['tree_page_click']="27";$c['tree_show_protected']="0";$c['udperms_allowroot']="0";$c['unauthorized_page']="1";$c['upload_files']="bmp,ico,gif,jpeg,jpg,png,psd,tif,tiff,fla,flv,swf,aac,au,avi,css,cache,doc,docx,gz,gzip,htaccess,htm,html,js,mp3,mp4,mpeg,mpg,ods,odp,odt,pdf,ppt,pptx,rar,tar,tgz,txt,wav,wmv,xls,xlsx,xml,z,zip,JPG,JPEG,PNG,GIF,svg,tpl";$c['upload_flash']="fla,flv,swf";$c['upload_images']="bmp,ico,gif,jpeg,jpg,png,psd,tif,tiff,svg";$c['upload_maxsize']="100485760";$c['upload_media']="au,avi,mp3,mp4,mpeg,mpg,wav,wmv";$c['use_alias_path']="1";$c['use_breadcrumbs']="0";$c['use_browser']="1";$c['use_captcha']="0";$c['use_editor']="1";$c['use_udperms']="1";$c['validate_referer']="1";$c['warning_visibility']="0";$c['webpwdreminder_message']="Здравствуйте, [+uid+]!\r\n\r\nЧтобы активировать ваш новый пароль, перейдите по следующей ссылке:\r\n\r\n[+surl+]\r\n\r\nПозже вы сможете использовать следующий пароль для авторизации: [+pwd+]\r\n\r\nЕсли это письмо пришло к вам по ошибке, пожалуйста, проигнорируйте его.\r\n\r\nС уважением, Администрация";$c['websignupemail_message']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации на [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации на [+sname+] ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['which_browser']="mcpuk";$c['which_editor']="none";$c['xhtml_urls']="0";$this->aliasListing=array();$a=&$this->aliasListing;$d=&$this->documentListing;$m=&$this->documentMap;$a[2]=array('id'=>2,'alias'=>'verhnee-menyu','path'=>'','parent'=>0,'isfolder'=>1,'alias_visible'=>0);$d['verhnee-menyu']=2;$m[]=array(0=>2);$a[3]=array('id'=>3,'alias'=>'tehnicheskie-stranicy','path'=>'','parent'=>0,'isfolder'=>1,'alias_visible'=>0);$d['tehnicheskie-stranicy']=3;$m[]=array(0=>3);$a[4]=array('id'=>4,'alias'=>'catalog','path'=>'','parent'=>2,'isfolder'=>1,'alias_visible'=>1);$d['catalog']=4;$m[]=array(2=>4);$a[67]=array('id'=>67,'alias'=>'3d_tur','path'=>'','parent'=>2,'isfolder'=>0,'alias_visible'=>1);$d['3d_tur']=67;$m[]=array(2=>67);$a[6]=array('id'=>6,'alias'=>'tehnologicheskoe-proektirovanie','path'=>'','parent'=>2,'isfolder'=>0,'alias_visible'=>1);$d['tehnologicheskoe-proektirovanie']=6;$m[]=array(2=>6);$a[7]=array('id'=>7,'alias'=>'delivery','path'=>'','parent'=>2,'isfolder'=>0,'alias_visible'=>1);$d['delivery']=7;$m[]=array(2=>7);$a[8]=array('id'=>8,'alias'=>'warranty','path'=>'','parent'=>2,'isfolder'=>0,'alias_visible'=>1);$d['warranty']=8;$m[]=array(2=>8);$a[9]=array('id'=>9,'alias'=>'payment','path'=>'','parent'=>2,'isfolder'=>0,'alias_visible'=>1);$d['payment']=9;$m[]=array(2=>9);$a[90046]=array('id'=>90046,'alias'=>'vopros-otvet','path'=>'','parent'=>2,'isfolder'=>0,'alias_visible'=>1);$d['vopros-otvet']=90046;$m[]=array(2=>90046);$a[10]=array('id'=>10,'alias'=>'servisnyj-centr','path'=>'','parent'=>2,'isfolder'=>0,'alias_visible'=>1);$d['servisnyj-centr']=10;$m[]=array(2=>10);$a[11]=array('id'=>11,'alias'=>'contacts','path'=>'','parent'=>2,'isfolder'=>0,'alias_visible'=>1);$d['contacts']=11;$m[]=array(2=>11);$a[12]=array('id'=>12,'alias'=>'stranica-ne-najdena','path'=>'','parent'=>3,'isfolder'=>0,'alias_visible'=>1);$d['stranica-ne-najdena']=12;$m[]=array(3=>12);$a[13]=array('id'=>13,'alias'=>'politika-konfidencialnosti','path'=>'','parent'=>3,'isfolder'=>0,'alias_visible'=>1);$d['politika-konfidencialnosti']=13;$m[]=array(3=>13);$a[30]=array('id'=>30,'alias'=>'search','path'=>'','parent'=>3,'isfolder'=>0,'alias_visible'=>1);$d['search']=30;$m[]=array(3=>30);$a[68]=array('id'=>68,'alias'=>'basket','path'=>'','parent'=>3,'isfolder'=>0,'alias_visible'=>1);$d['basket']=68;$m[]=array(3=>68);$a[69]=array('id'=>69,'alias'=>'ajax','path'=>'','parent'=>3,'isfolder'=>0,'alias_visible'=>1);$d['ajax']=69;$m[]=array(3=>69);$a[71]=array('id'=>71,'alias'=>'test','path'=>'','parent'=>3,'isfolder'=>0,'alias_visible'=>1);$d['test']=71;$m[]=array(3=>71);$a[98582]=array('id'=>98582,'alias'=>'sitemap.xml','path'=>'','parent'=>3,'isfolder'=>0,'alias_visible'=>1);$d['sitemap.xml']=98582;$m[]=array(3=>98582);$a[100857]=array('id'=>100857,'alias'=>'pereindeksirovat-evosearch','path'=>'','parent'=>3,'isfolder'=>0,'alias_visible'=>1);$d['pereindeksirovat-evosearch']=100857;$m[]=array(3=>100857);$a[88342]=array('id'=>88342,'alias'=>'neopublikovannye','path'=>'catalog','parent'=>4,'isfolder'=>1,'alias_visible'=>1);$d['catalog/neopublikovannye']=88342;$m[]=array(4=>88342);$c=&$this->contentTypes;$c=&$this->chunkCache;$c['mm_rules']='// more example rules are in assets/plugins/managermanager/example_mm_rules.inc.php
// example of how PHP is allowed - check that a TV named documentTags exists before creating rule

if ($modx->db->getValue($modx->db->select(\'count(id)\', $modx->getFullTableName(\'site_tmplvars\'), "name=\'documentTags\'"))) {
	mm_widget_tags(\'documentTags\', \' \'); // Give blog tag editing capabilities to the \'documentTags (3)\' TV
}
mm_widget_showimagetvs(); // Always give a preview of Image TVs

mm_createTab(\'SEO\', \'seo\', \'\', \'\', \'\', \'\');
mm_moveFieldsToTab(\'seoOverride,noIndex,sitemap_changefreq,sitemap_priority,sitemap_exclude\', \'seo\', \'\', \'\');
//mm_widget_tags(\'keyw\',\',\'); // Give blog tag editing capabilities to the \'documentTags (3)\' TV


//mm_createTab(\'Images\', \'photos\', \'\', \'\', \'\', \'850\');
//mm_moveFieldsToTab(\'images,photos\', \'photos\', \'\', \'\');

//mm_hideFields(\'longtitle,description,link_attributes,menutitle,content\', \'\', \'6,7\');

//mm_hideTemplates1(\'0,5,8,9,11,12\', \'2,3\');

//mm_hideTabs(\'settings, access\', \'2\');
mm_ddMultipleFields(\'cat-img\');

mm_ddMultipleFields(\'files\',\'\',\'\',\'text,file\',\'Название,Файл\');

mm_ddMultipleFields(\'cat-har\',\'\',\'\',\'text,text\',\'Название,Значение\');
';$c['head']='<head>

	[[SEOMeta]]
	
    <meta name="theme-color" content="#464646">

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#468996">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no">
	<meta name="yandex-verification" content="" />

    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    
    <style>[!Compress? &print=`true`  &files=`css/:shop.css,reset.css,uikit.min.css,custom.css,style.css,fonts.css,media.css,form.css,style_menu.css` &tofile=`css/all.compress.css`!]</style>
    <!--  Uikit  -->
    <script src="js/uikit-icons.min.js"></script>
    <script src="js/uikit.min.js"></script>

    <!--  /Uikit  -->
	<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js1"></script>
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css1">

    [[! 
    <link rel="stylesheet" type="text/css" href="/css/shop.css">
    <link href="/css/reset.css" type="text/css" rel="stylesheet" />
    <link href="/css/uikit.min.css" type="text/css" rel="stylesheet" />
    <link href="/css/custom.css" type="text/css" rel="stylesheet" />
    <link href="/css/style.css" type="text/css" rel="stylesheet" />
    <link href="/css/fonts.css" type="text/css" rel="stylesheet" />
    <link href="/css/media.css" type="text/css" rel="stylesheet" />
    <link href="/css/form.css" type="text/css" rel="stylesheet" />
    <link rel=\'stylesheet\' href=\'css/jquery.mmenu.all.css\' />
    <link rel=\'stylesheet\' href=\'css/style_menu.css\' /> 
    ]]
	<link rel=\'stylesheet\' href=\'css/catalog.css\' /> 
	<link rel=\'stylesheet\' href=\'css/catalogfilter.css\' />
	
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css">

</head>';$c['searchTpl']='<div class="it-search-in">
	<a href="[~[+id+]~]" class="search-it">
		[+pagetitle+]
	</a>
</div>';$c['left']='<aside class="left uk-position-fixed">
	<a href="[~1~]" class="left__logo-box">
		<img src="img/logo.png" alt="" class="left__logo">
		<div class="left__tagline">Центр оборудования</div>
	</a>
	<nav class="left__menu">
		[[DLMenu? &parents=`4` &maxDepth=`3` &parentRowTpl=`rowTplLeft` &rowTpl=`rowTplLeft` &innerRowTpl=`innerRowTpl`  &innerTpl=`innerTpl` &outerClass=`left__menu-list` ]]
	</nav>
</aside>';$c['rowTplLeft']='<li class="left__menu-item left__menu-item_top [+introtext+]"><a class="left__menu-link" href="[+url+]">[+title+]</a>[+wrap+]</li>
';$c['adaptive-menu']='<div class="adaptive-menu">
	<@IF:[*id:is(1)*]>
	
	<@ELSE>	
		<a href=[~1~] class="adaptive-menu__tagline">Центр оборудования </a>
	<@ENDIF>	
	
	
	<div class="adaptive-menu__wrap uk-flex uk-flex-wrap uk-flex-middle uk-flex-between">
	<a class="catalog-btn uk-navbar-toggle uk-flex-left" data-uk-toggle href="#categories-menu">Каталог</a>
	[[!-- 
	<div id="offcanvas-nav2" data-uk-offcanvas="overlay: true">
		<div class="uk-offcanvas-bar uk-offcanvas-bar__catalog uk-padding-remove">
			<button id="close-btn" class="uk-offcanvas-close uk-close-large" type="button" data-uk-close></button>
			<a class="dop-menu__link uk-navbar-toggle uk-flex-left" data-uk-toggle href="#categories-menu">Каталог</a>
			 <div class="left__menu__title">Каталог</div>
			<nav class="left__menu left__menu_adaptive">
				[[DLMenu? &parents=`4` &maxDepth=`1` &rowTpl=`rowTplLeft` &outerClass=`left__menu-list` &lastClass=`left__spezial`]]
			</nav>
			
		</div>
	</div>
	]]


		<a class="uk-navbar-toggle uk-hidden@m uk-flex-left" data-uk-toggle data-uk-navbar-toggle-icon href="#offcanvas-nav"></a>
		<div id="offcanvas-nav" data-uk-offcanvas="overlay: true">
			<div class="uk-offcanvas-bar">
				<button id="close-btn" class="uk-offcanvas-close uk-close-large" type="button" data-uk-close></button>
				<nav class="uk-width-auto">
					[[DLMenu? &parents=`2` &maxDepth=`1` &outerTpl=`outerTplVert`  &rowTpl=`rowTplVert` &outerClass=``]]
				</nav>
			</div>
		</div>

		<div class="uk-flex header__btn-container uk-first-column">
			<div class="adaptive-menu__buttons" data-uk-grid>
				<div>
					<a href="" class="search_button search_button-popup" aria-label="Поиск">
						<div class="icon">
						</div>
					</a>
				</div>	
			</div>
			<!--div class="header__btn-box header__btn-box-first comparison">
				<div class="header-btn-box__icon comparison__icon"></div>
				<div class="header__name-btn">Сравнение</div>
			</div-->
			
			<div class="header__btn-box cart">
				<a class="header-btn-box__icon cart__icon" href="[~68~]">[!ShopHeadBasket!]</a>
			</div>
		</div>
	</div>
	<div class="dop-menu">
		<ul class="uk-flex uk-child-width-1-3" >
			<li class="dop-menu__list">
				<a class="dop-menu__link uk-navbar-toggle uk-flex-left" data-uk-toggle href="#categories-menu">Каталог</a>
			</li>
			<li class="dop-menu__list">
				<a class="dop-menu__link dop-menu__link_whatsapp" href="whatsapp://send?phone=+79627404800">
					<img class="dop-menu__whatsapp" src="img/whatsapp-logo-w.svg" alt=""><span>Whatsapp</span>
				</a>
			</li>
			<li class="dop-menu__list"><a class="dop-menu__link" href="[~11~]">Контакты</a></li>
		</ul>
	</div>
	<!--  adaptive search         -->
	<div class="search_pop-up search-slyle">
		<div class="search-wrap">
			<form action="[~30~]" method="get" class="search-form">
				<div class="setdefaultvalue defaultvalue uk-flex uk-position-relative">
					<input class="search__input search__input_small" id="inp_search" name="search" type="text">
					<label class="search__label search__label_small" for="inp_search">Поиск по сайту...</label>
					<button id="search_but" class="search__btn search__btn_small" type="submit" aria-label="Найти"></button>
				</div>
			</form>

			<a href="#" class="close search_button pop" aria-label="Close"><img src="img/close-button.svg" alt="close"></a>
		</div>
	</div>



</div>';$c['header-scroll']='[[! <div class="header-scroll uk-padding-small">
	<div class="uk-flex uk-flex-start uk-flex-between">
		<div class="search search_scroll uk-width-2-3">
			<form action="[~30~]" method="get">
				<div class="setdefaultvalue defaultvalue uk-flex uk-position-relative">
					<input class="search__input" id="inp_search" name="search" type="text">
					<label class="search__label" for="inp_search">Поиск по сайту...</label>
					<button class="search__btn" aria-label="Найти">Найти</button>
				</div>
			</form>
		</div>
		<a class="header__whatsapp" title="WhatsApp" href="whatsapp://send?phone=+79627404800">
								<div class="uk-flex uk-flex-middle">
									<div class="header__whatsapp-icon"></div>
									<span class="header__whatsapp-text">WhatsApp</span>
								</div>
								<div class="header__whatsapp-number">+7 962 74-04-800</div>
							</a>

		<div class="header__contacts header__contacts_scroll">
			<a href="tel:" class="header__phone header__phone_scroll">
				+7 (8652) 74-04-08
			</a>
			<div class="header__adress header__adress_scroll"> <span class="header__adress-city">г. Ставрополь,</span> ул. Доватерцев, 44/2</div>
		</div>
		<div class="header__contacts header__contacts_scroll">
			<a href="tel:" class="header__phone header__phone_scroll">
				+7 (8652)73-17-16
			</a>
			<div class="header__adress header__adress_scroll">  <span class="header__adress-city">г. Ставрополь,</span> ул. Пирогова, 15/1</div>
		</div>


		<div class="uk-flex">
			<div class="header__btn-box header__btn-box-first comparison">
				<div class="header-btn-box__icon comparison__icon comparison__icon_blue"></div>
			</div>
			<div class="header__btn-box cart">
				<div class="header-btn-box__icon  cart__icon cart__icon__blue">
				</div>
			</div>
		</div>
	</div>
</div> ]]';$c['rowTplVert']=' <li class="[+introtext+]"><a class="top-menu__link" href="[+url+]">[+title+]</a></li>';$c['header']='<@IF:[*id:is(1)*]>
<header class="header">	
<@ELSE>	
<header class="header hidden">	
<@ENDIF>	
	<div class="header__wrap uk-flex-between uk-flex-wrap uk-child-width-auto uk-padding-left" data-uk-grid>
		<div class="header__right-box" data-uk-grid>
					<div class="search_block-for">
						<form action="[~30~]" method="get" name="search-form" class="search-form">
							<input type="text" name="search" placeholder="Поиск" class="input-search">

							<button type="submit" class="submit-btn">
								<i class="fa fa-search" aria-hidden="true"></i>
							</button>
						</form>
					</div>
			<div class="header__contacts">
				<a href="tel:+" class="header__phone">
					<span class="header__phone-city">+7 ()</span>
				</a>
				<div class="header__adress"> <span class="header__adress-city">г. Ставрополь,</span><br> </div>
				<div class="header__time-table">пн-сб. 9:00 — 18:00</div>
			</div>
			<div class="header__contacts">
				<a href="tel:+" class="header__phone">
					<span class="header__phone-city">+7 ()</span>
				</a>
				<div class="header__adress"> <span class="header__adress-city">г. Ставрополь,</span><br></div>
				<div class="header__time-table">пн-сб. 9:00 — 18:00</div>
			</div>

			<a class="header__whatsapp" title="WhatsApp" href="whatsapp://send?phone=+">
				<div class="uk-flex uk-flex-middle">
					<div class="header__whatsapp-icon"></div>
					<span class="header__whatsapp-text">WhatsApp</span>
				</div>
				<div class="header__whatsapp-number">+7 </div>
				<div class="header__whatsapp-number">+7 </div>
			</a>
			
		</div>

		<div class="uk-flex header__btn-container header__btn-container_dekstop">
			<div class="header__btn-box cart"><a href="[~68~]">[!ShopHeadBasket!]</a></div>
		</div>
	</div>
</header>';$c['top-menu']='<div class="top-menu">
                <nav class="top-menu__nav">
                   
						[[DLMenu? &parents=`2` &maxDepth=`1` &rowTpl=`rowTpl` &outerClass=`uk-flex top-menu__ul` &firstClass=`top-menu__link_first`]]
                    
                </nav>
            </div>';$c['rowTpl']='<li class="top-menu__li[+introtext+]"><a class="top-menu__link [+firstClass+]" href="[+url+]">[+title+]</a></li>';$c['scripts']='<script>
    [!Compress? &print = `true` &files = `js/:javascript.js, all-js.js, formochki.js, popup.js, shop.js` &tofile = `js/all-compress.js`!]
</script>

  <link rel=\'stylesheet\' href=\'css/jquery.mmenu.all.css\' />  
 <!-- <link rel=\'stylesheet\' href=\'https://cdnjs.cloudflare.com/ajax/libs/jQuery.mmenu/6.1.5/jquery.mmenu.all.css\' />  -->

[[! 
<script src="js/shop.js"></script>
<script src="js/javascript.js"></script>
<script src="js/all-js.js"></script>

<script src="js/formochki.js"></script>
<script src="js/popup.js"></script> ]]


[[!
<script>//<!-- search popup -->

    $(document).ready(function () {
        $(".search_button").on("click", function (e) {
            e.preventDefault();
            $(\'html,body\').animate({

            }, );
            $(".search_pop-up").slideToggle();
        });
    });

//<!-- /search popup  --></script> ]]




<!--  scrollup  -->
<a href="#" class="scrollup">Наверх</a>
<!--  /scrollup  -->

[[! <style>
    .searchBtn {
        float: left;
        cursor: pointer;
        width: 44px;
        height: 38px;
        line-height: 15px;
        background-image: url(search_ico.PNG);
        background-position: left 0;
        background-repeat: no-repeat;
    }

    .searchProgress {
        background-image: url(4.gif);
        background-position: left 0;
        float: left;
        cursor: pointer;
        width: 44px;
        height: 38px;
        line-height: 15px;
        background-repeat: no-repeat;
    }

    .textBox input {
        color: #999999;
        font: bold 14px arial;
        float: left;
        height: 20px;
        padding: 12px 0 0 9px;
        vertical-align: middle;
        width: 432px;
    }

    #content {
        text-align: center;
        text-decoration: none;
    }

    #content #sub_cont {
        width: 490px;
        display: none;
        height: 400px;
    }

    #content .no-rec {
        color: #000;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 14px;
        padding: 5px;
        border-bottom: solid #669900;
        text-align: center;
        background: #CCCC66;
    }

    #content .each_rec {
        color: #fff;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 14px;
        padding: 5px;
        border-bottom: solid #669900;
        text-align: justify;
        background: #CCCC66;
    }

    #content .each_rec:hover {
        background: #FFFFFF;
    }

    #content .each_rec a {
        color: #000;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 14px;
        text-decoration: none
    }

    .search-background {
        display: none;
        font-size: 13px;
        font-weight: bold;
        height: 160px;
        position: absolute;
        padding-top: 100px;
        text-align: center;
        text-decoration: none;
        width: 470px;
    }

    #heading {
        font-family: Georgia, "Times New Roman", Times, serif;
        font-size: 56px;
        color: #CC0000;
    }

    search-background label {
        border: solid #66FF00 1px;
    }

    #paging_button ul {
        width: 600px;
        padding: 0px;
        margin: 8px;
    }

    #paging_button ul li {
        -moz-border-radius: 6px;
        -webkit-border-radius: 6px;
        -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
        -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
        float: left;
        height: 20px;
        width: 20px;
        list-style-image: none;
        list-style-type: none;
        font-weight: bold;
        border: solid #CCCCCC 1px;
        margin: 3px;
        cursor: pointer;
    }
</style> ]]
<script src="js/catalogfilter.js"></script>
<script>
    jQuery(document).ready(function ($) {
        function showLoader() {
            $(\'.search-background\').fadeIn(200);
        }
        function hideLoader() {
            $(\'#sub_cont\').fadeIn(1500);
            $(\'.search-background\').fadeOut(200);
        }
        ;
        $(\'#search\').keyup(function (e) {
            if (e.keyCode == 10) {
                showLoader();
                $(\'#sub_cont\').fadeIn(1500);
                $("#content #sub_cont").load("[~71~]?val=" + $("#search").val(), hideLoader());
            }
        });
        $(".searchBtn").click(function () {
            showLoader();
            $(\'#sub_cont\').fadeIn(1500);
            $("#content #sub_cont").load("[~71~]?val=" + $("#search").val(), hideLoader());
        });
    });
</script>


 <script src="js/jquery.mmenu.all.min.js"></script> 

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery.mmenu/6.1.5/jquery.mmenu.all.js"></script>   -->
<script src="js/frontend.js"></script>


';$c['slider']='<div class="slider uk-position-relative">
                <div data-uk-slideshow="ratio: 1599:386; animation: pull; autoplay: true; autoplay-interval:6000;">
                    <ul class="uk-slideshow-items">
						[[DocLister? &tpl=`sliderTpl` &tvList=`img,sliderlink` &tvPrefix=``  &parents=`32`  &sortBy=`menuindex` &sortDir=`ASC` ]]
                    </ul>
					<ul class="uk-slideshow-nav uk-dotnav uk-position-bottom-center uk-margin"></ul>
					
                </div>
            </div>';$c['sliderTpl']='<li>
	<a href="[+sliderlink+]"><img src="[+img+]" alt="[+pagetitle+]" title="[+pagetitle+]"></a>
</li>';$c['about-block']='                <div class="about uk-child-width-1-2@xl uk-child-width-1-1 uk-grid-small" data-uk-grid>
                    {{about}}
                    <div class="advantages">
                        <div class="advantages__wrap">

                            <div class="advantages__item advantages__item_grl">
                                <div class="uk-flex uk-flex-middle">
                                    <img src="img/benef1.svg" alt="" class="advantages__icon">
                                    <div class="advantages__title uk-margin-left">Сервисное и гарантийное <br>
                                        обслуживание</div>
                                </div>
                            </div>
                            <div class="advantages__item advantages__item_two">
                                <div class="uk-flex uk-flex-middle">
                                    <img src="img/benef2.svg" alt="" class="advantages__icon">
                                    <div class="advantages__title uk-margin-left">Оснащение оборудованием <br>
                                        «Под ключ»</div>
                                </div>
                            </div>

                            <div class="advantages__item advantages__item_three">
                                <div class="uk-flex uk-flex-middle">
                                    <img src="img/benef3.svg" alt="" class="advantages__icon">
                                    <div class="advantages__title uk-margin-left">Собственный <br>автопарк</div>
                                </div>
                            </div>
                            <div class="advantages__item advantages__item_grr">
                                <div class="uk-flex uk-flex-middle">
                                    <img src="img/benef4.svg" alt="" class="advantages__icon">
                                    <div class="advantages__title uk-margin-left">Широкий <br>
                                        ассортимент товара</div>
                                </div>
                            </div>


                        </div>
                    </div>
                </div>';$c['about']='<div class="about-info">
	<h2 class="index-title">Центр оборудования </h2>
	<div class="about__text" style="text-align: justify; text-indent: 35px;">
		
	</div>
</div>';$c['partners']='                <div class="partner uk-width-1-1">
                    <h2 class="index-title">Наши партнеры</h2>
                    <div class="partner__wrap" >
						<div data-uk-slider="autoplay: true; autoplay-interval:3000">
							<div class="uk-position-relative">
								<div class="uk-slider-container">
									<ul class="uk-slider-items uk-child-width-1-6@xl uk-child-width-1-4@m uk-child-width-1-2@s uk-child-width-1-1">

									[!DocLister?
											&sortBy=`menuindex`
											&sortDir=`ASC`
											&display=`55`
											&tpl=`tplPartnerItem`
											&parents=`87797`
											&tvList=`img`										
									!]	
										
										
									</ul>
								</div>
							</div>
                            <div class="uk-hidden@m">
                                <a class="uk-position-center-left uk-position-small" href="#" data-uk-slidenav-previous data-uk-slider-item="previous"></a>
                                <a class="uk-position-center-right uk-position-small uk-slidenav-next uk-icon uk-slidenav" href="#" data-uk-slidenav-next data-uk-slider-item="next"></a>
                                
                            </div>
                            
                            
                        </div>
                    </div>
                </div>';$c['index-category']='<div class="index-catalog catalog">
	<h2 class="index-title">Каталог</h2>
	<div class="catalog__wrap uk-child-width-1-5@xl uk-child-width-1-4@l uk-child-width-1-3@s " data-uk-grid>
		[[DocLister? &tpl=`category` &tvList=`img` &tvPrefix=`` &addWhereList=`c.id NOT IN (29)`  &parents=`4`  &sortType=`orderBy` &orderBy=`menuindex ASC`]]
	</div>
</div>';$c['special']='<div class="special">
	<h2 class="index-title">Специальное предложение</h2>
	<div class="special__wrap uk-grid-match uk-grid-small uk-child-width-1-5@xl uk-child-width-1-3@l uk-child-width-1-2@m uk-child-width-1-2@s uk-child-width-1-1" data-uk-grid>

		[[DocLister? &tpl=`catalog__item` &tvList=`img, price, old-price` &tvPrefix=``  &parents=`14`  &sortBy=`menuindex` &sortDir=`ASC` ]]
		
	</div>
	<a href="#" class="more-btn">
		Больше предложений <img src="img/arrow-btn2.svg" alt="">
	</a>
</div>';$c['work']='                <div class="index-gallery gallery">
                    <h2 class="index-title">
                        Наши работы
                    </h2>
                    <div class="gallery__wrap uk-grid-match uk-child-width-1-4@l uk-child-width-1-3@m  uk-child-width-1-2@s  uk-child-width-1-1" data-uk-grid>
                        <div>
                            <a href="#" class="gallery__item">
                                <div class="gallery__photo">
                                    <img src="img/gal1.jpg" alt="">
                                </div>
                                <div class="gallery__title">
                                    Кафе “Coffe time”
                                </div>
                            </a>
                        </div>
                        <div>
                            <a href="#" class="gallery__item">
                                <div class="gallery__photo">
                                    <img src="img/gal2.jpg" alt="">
                                </div>
                                <div class="gallery__title">
                                    Оснащение оборудованием столовой “Кушать подано”
                                </div>
                            </a>
                        </div>
                        <div>
                            <a href="#" class="gallery__item">
                                <div class="gallery__photo">
                                    <img src="img/gal3.jpg" alt="">
                                </div>
                                <div class="gallery__title">
                                    Ресторан “Приходи, я жду”
                                </div>
                            </a>
                        </div>
                        <div>
                            <a href="#" class="gallery__item">
                                <div class="gallery__photo">
                                    <img src="img/gal4.jpg" alt="">
                                </div>
                                <div class="gallery__title">
                                    Оснащение оборудованием столовой “Кушать подано”
                                </div>
                            </a>
                        </div>
                    </div>
                    <a href="#" class="more-btn">
                        Посмотреть все работы <img src="img/arrow-btn2.svg" alt="">
                    </a>
                </div>';$c['footer']='<footer>
    <div class="footer__wrap uk-width-1-1">
        <div class="uk-child-width-1-4@l uk-child-width-1-2@s" data-uk-grid>
            <div class="footet__cont">
                <div class="footer__adress uk-margin-small-bottom">
                    г. Ставрополь,
                </div>
                <a href="tel:+" class="footer__phone">
                    +7
                </a>
                <div class="footer__time-table">
                    <ul class="footer__days">
                        <li class="footer__day"></li>
                        <li class="footer__day"></li>
                        <li class="footer__day"></li>
                        <li class="footer__day"></li>
                        <li class="footer__day"></li>
                        <li class="footer__day"></li>
                        <li class="footer__day footer__day_red"></li>
                    </ul>
                    <div class="footer__time-table">пн-сб. 9:00 — 18:00</div>
                </div>
				<img class="" style="display: block; margin-left: auto; margin-right: auto;" src="assets/images/catalog_/8.holodilniki-lari-vitriny-kamery/frizery/logo3h.png" alt="" width="406" height="39" />
            </div>
            <div class="footet__cont">
                <div class="footer__adress uk-margin-small-bottom">
                    г. Ставрополь,
                </div>
                <a href="tel:+" class="footer__phone">
                    +7
                </a>
                <div class="footer__time-table">
                    <ul class="footer__days">
                        <li class="footer__day"></li>
                        <li class="footer__day"></li>
                        <li class="footer__day"></li>
                        <li class="footer__day"></li>
                        <li class="footer__day"></li>
                        <li class="footer__day"></li>
                        <li class="footer__day footer__day_red"></li>
                    </ul>
                    <div class="footer__time-table">пн-сб. 9:00 — 18:00</div>
                </div>
            </div>
            <div class="footer__social-box">
                <a class="footer__whatsapp" href="whatsapp://send?phone=+"><img class="footer__whatsapp-icon" src="img/whatsapp-logo-hov.svg" alt="">+7</a>

                <div class="soc uk-margin-small-bottom">
                </div>
                <!-- 	<div class="callback footer__link">Обратная связь</div> -->
                <div class="callbackorder footer__link"><span>Заказать звонок</span></div>
            </div>

            <div class="footer__company">
                <div class="footer__copyright">
                    © [[yearCopyright]], 
                </div>
                <div>
                    <a href="[~13~]" class="footer__link">Политика конфиденциальности</a>
                </div>
                <div>
                    <a href="#" class="footer__link">Статьи</a>
                </div>
                
            </div>
        </div>
    </div>

</footer>
<div id="overlay-bg"><div>
{{svg}}';$c['category']='<div class="">
	<a href="[~[+id+]~]" class="catalog__cat-item">
		<div class="catalog__img">
			<img src="[+img+]" alt="[+pagetitle+]">
		</div>
		<!-- <div class="catalog__img">
			<img src="[[ImgCrop8? &img=`[+img+]` &w=`265` &h=`180` &backgr=`true` &quality=`100`]]" alt="[+pagetitle+]" title="[+pagetitle+]" />
		</div> -->
		<h4 class="catalog__cat-title uk-flex uk-flex-middle uk-flex-center">[+pagetitle+]</h4>
	</a>
</div>';$c['catalog__item']='	<div class="catalog__item">
		<a href="[~[+id+]~]" class="catalog__link">
			<div class="catalog__img-pr">
				<img src="[+img+]" alt="[+pagetitle+]">
			</div>
			<div class="catalog__title-pr">
				[+pagetitle+]
			</div>
		</a>

	
<!-- 		[[if? &is=`[+old-price+]:isempty` 
			&then=`<div class="catalog__price uk-flex uk-flex-center uk-flex-wrap"> <div class="catalog__price uk-flex uk-flex-around uk-flex-wrap">
		<div class="catalog__price-new">
				[+price+] ₽
			</div>
			<div class="catalog__price-old">
				[+old-price+] ₽
			</div>
		</div>` &else=``]]-->
		
		[[if? &is=`[+old-price+]:isempty` 
				&then=`<div class="catalog__price uk-flex uk-flex-center uk-flex-wrap">` 
				&else=` <div class="catalog__price uk-flex uk-flex-around uk-flex-wrap">`
		]] 
		
		
		
			[[if? &is=`[+price+]:isempty` 
				&then=`` 
				&else=`<div class="catalog__price-new">
				[+price+] ₽
			</div>`]]
			
			[[if? &is=`[+old-price+]:isempty` 
				&then=`` 
				&else=`<div class="catalog__price-old">	[+old-price+] ₽	</div>`]]
			
		</div>
		
		

			
		<div class="catalog__item-btn uk-flex uk-flex-wrap">
			[!if? &is=`[!ShopAction? &act=`stat` &id=`[+id+]`!]:=:n` &then=`
			<a href="#" class="catalog__btn-box uk-flex btn-basket" data-itemid="[+id+]">
				<img src="img/cart-color.svg" alt="" class="catalog__cart-icon">
				<div class="catalog__btn-text">в корзину</div>
			</a>
			<button class="cib_ok cat-item">
				<img src="img/cart-full.svg" alt="" class="catalog__cart-icon">
				<div class="catalog__btn-text">в корзинe</div>
			</button>
	` &else=`
			
			<button class="cib_ok cat-item" style="display:inline-flex;">
				<img src="img/cart-full.svg" alt="" class="catalog__cart-icon">
				<div class="catalog__btn-text">в корзинe</div>
			</button>
			`!]
			
			<a href="#" class="catalog__btn-box uk-flex">
				<img src="img/comparison-color.svg" alt="" class="catalog__comp-icon">
				<div class="catalog__btn-text">купить в один клик</div>
			</a>
		</div>
	</div>';$c['content']='<div class="content">
		[*content*]
		[*after-content*]
</div>';$c['way']='<h1>[*pagetitle*]</h1>
<div class="pathway">[[DLcrumbs? &tpl=`crumbsTpl` &hideMain=`0` &showCurrent=`1` &addWhereList=`c.id NOT IN (4)`]]</div>
	';$c['crumbsTpl']='<li><a class="" href="[+url+]">[+title+]</a></li>
<li><img class="bread-img" src="img/right-arrow-bread.svg" alt=""></li>';$c['POPUP']='<div class="popupbox">
	<div class="black">
		<div class="close"></div>
		<div class="popup popup_1">
			<div class="block block_features">
				<div class="wppr">
					<div class="iblock_title">Возможности системы</div>
					{{FEATURES}}
				</div>
			</div>
		</div><!--popup_1-->
		<div class="popup popup_2">
			<div class="block block_myform_2">
				<div class="iblock_title mini">Демонстрационная версия</div>
				{{FORM_REQUESTDEMO}}
			</div>
		</div><!--popup_2-->
		<div class="popup popup_3">
			<div class="block block_myform_3">
				<div class="iblock_title mini">Заказ обратного звонка</div>
				{{FORM_CALLBACK}}
			</div>
		</div><!--popup_3-->
		<div class="popup popup_4">
			<div class="block block_mobilemenu">
				<div class="mobilemenubox">
					<div class="mobilemenu">
						<div class="col col_1"></div>

						<div class="col col_2"></div>
					</div>
				</div>
			</div>
		</div><!--popup_4-->
		
		
		[[if? &is=`[!ShopBasket_Form!]:not_empty` &then=`
		<div class="popup popup_5">
			<div class="block block_myform_5">
				<div class="iblock_title mini">Покупка в один клик</div>
				<div class="shop_basket_form">
					[!ShopBasket_Form!]
				</div>
				<div class="shop_basket_itogo">
					<div class="shb_itogo">
						<div class="clr">&nbsp;</div>
						<div class="shbi_errors"></div>
						<div class="shbi_checkout">
							<button class="shop_basket_checkout font2" type="button" data-itogo="0">Оформить заказ на этот товар</button>
						</div>
						<div class="politikalink">Нажимая кнопку «Оформить&nbsp;заказ на&nbsp;этот&nbsp;товар», вы&nbsp;даете согласие на&nbsp;обработку персональных данных в&nbsp;соответствии с&nbsp;<a target="_blank" href="[~13~]">политикой конфиденциальности</a></div>
					</div>
				</div>
			</div>
		</div><!--popup_3-->
		`]]
	</div><!--black-->
</div><!--popupbox-->
';$c['FORM_CALLBACK']='<div class="myformbox">
	<div class="myform myform_3 formochki">
		<div class="frm_result frm_result_ok">Сообщение отправлено!</div>
		<form action="/" method="post">
			<div class="frm_row">
				<div class="frm_input frm_addon frm_addon_1">
					<input id="frm3_fname" type="text" name="fname" />
					<label for="frm3_fname">Как к вам обращаться?</label>
				</div>
			</div>
			<div class="frm_row">
				<div class="frm_input frm_addon frm_addon_2">
					<input id="frm3_phone" type="text" name="phone" />
					<label for="frm3_phone">Номер телефона</label>
				</div>
			</div>
			<div class="frm_row">
				<div class="frm_txt">Нажимая кнопку «Заказать, вы&nbsp;даете согласие <br> на&nbsp;обработку персональных данных в&nbsp;соответствии <br>с&nbsp;<a target="_blank" href="[~13~]">политикой конфиденциальности</a>.</div>
			</div>
			<div class="frm_row frm_result frm_result_er"></div>
			<div class="frm_row">
				<div class="frm_submit">
					<input type="hidden" name="formid" value="3" />
					<input type="hidden" name="pageid" value="[*id*]" />
					<button class="buttonlinkto" type="submit" name="send" value="y">Заказать<i></i></button>
				</div>
			</div>
		</form>
	</div><!--myform_3-->
</div><!--myformbox-->';$c['innerTpl']='<ul class="left__submenu [+classes+]">[+wrap+]</ul>';$c['innerRowTpl']='<!-- <li[+classes+]><a href="[+url+]">[+title+]</a></li> -->
<li class="left__submenu-item"><a class="left__submenu-item-link" href="[+url+]">[+title+]</a>[+wrap+]</li>
';$c['categoryFolderTpl']='<li class="left__menu-item left__menu-item_top [+introtext+]"><a class="left__menu-link" href="[+url+]">[+title+]</a>[+wrap+]</li>';$c['left_copy']='<div class="bg_overlay"></div>
<aside class="left uk-position-fixed">
    <a href="[~1~]" class="left__logo-box">
        <img src="img/logo.png" alt="" class="left__logo">
        <div class="left__tagline">Центр оборудования</div>
    </a>
    <a href="#categories-menu" class="menu-button categories-menu-button">
        Каталог<span class="flaticon-bars"></span>
    </a>
    <nav class="menu-item has-mega-menu" id="categories-menu">
        <div class="category-drop-list">
            <div class="category-drop-list-inner">
                [!Wayfinder?
					&startId=`4`
					&level=`2`
					&sortBy=`menuindex`
					&sortOrder=`ASC`
					&outerTpl=`leftMenuOuterTpl`
					&rowTpl=`leftMenuRowTpl`
					&hereClass=`menu-item-here`
                !]
            </div>
        </div>
    </nav>
</aside>';$c['leftMenuOuterTpl']='<ul class="sub-menu sub-menu-open">[+wf.wrapper+]</ul>';$c['leftMenuRowTpl']='<li class="menu-item has-mega [+wf.classnames+]">
    <!-- <a href="[+wf.link+]" title="[+wf.title+]">
        [+wf.linktext+]
    </a> -->
	<span> <a href="[+wf.link+]" title="[+wf.title+]">[+wf.linktext+]</a></span>
	[[Wayfinder?
		&startId=`[+id+]`
		&level=`1`
		&sortBy=`id`
		&sortOrder=`ASC`
		&where=`isfolder = 1`
		&outerTpl=`leftMenuInOuterTpl`
		&rowTpl=`leftMenuInRowTpl`
		&hereClass=`mega-item-title-here`
	]]
</li>';$c['leftMenuInOuterTpl']='<div class="sub-menu mega-menu">
	<div class="mega-menu-row">
		[+wf.wrapper+]
	</div>
</div>';$c['leftMenuInRowTpl']='<div class="mega-menu-col">
	<div class="mega-content">
		<p class="mega-item-title [+wf.classnames+]"><a href="[+wf.link+]" title="[+wf.title+]">[+wf.linktext+]</a></p>
		[[Wayfinder?
			&startId=`[+id+]`
			&sortBy=`id`
			&sortOrder=`ASC`
			&where=`isfolder = 1`
			&outerTpl=`leftMenuInInOuterTpl`
			&rowTpl=`leftMenuInInRowTpl`
		]]    
	</div>
</div>';$c['leftMenuInInOuterTpl']='<ul class="menu">
	[+wf.wrapper+]
</ul>';$c['Untitled chunk']='<li class="menu-item">
	<a href="[+wf.link+]" title="[+wf.title+]">
		[+wf.linktext+]
	</a>
</li>';$c['outerTplVert']='<ul class="left-nmenu__vert-ul">[+wrap+]</ul>';$c['tplCat']='';$c['tplCatItem']='';$c['item_content']='<div class="product uk-width-1-1 uk-margin-medium-top" data-uk-grid>

	<!------------------------------------------>
	
		<div class="uk-width-2-5@m uk-width-1 slider_in_item " data-uk-slideshow="animation: fade; ratio: 1:1; min-height: 300; max-height: 300" >
			<ul class="uk-slideshow-items slideshow-custom" data-uk-lightbox="animation: slide">
				[[ParseMultiImages? &id=`[*id*]` &t=`1`]]
			</ul>

			<div class="uk-position-small uk-position-relative" data-uk-slider>
				<ul class="uk-thumbnav uk-flex-nowrap uk-flex-center uk-slider-items uk-child-width-1-4@m uk-child-width-1-6@s uk-child-width-1-3" >
					[[ParseMultiImages? &id=`[*id*]` &t=`2`]]
				</ul> 
				<a class="uk-position-center-left uk-hidden-hover" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
				<a class="uk-position-center-right uk-hidden-hover" href="#" uk-slidenav-next uk-slider-item="next"></a>
			</div>
			<div class="uk-grid-small uk-flex-middle uk-child-width-1-2" data-uk-grid>
				<div>
					<a href="#" class="catalog__btn-box product__btn uk-flex">
						<img src="img/cart-color-w.svg" alt="" class="catalog__cart-icon">
						<div class="product__btn-text">в корзину</div>
					</a>
				</div>
				<div>
					<a href="#" class="catalog__btn-box uk-flex product__btn">
						<!--img src="img/comparison-color-w.svg" alt="" class="catalog__comp-icon"-->
						<div class="product__btn-text">купить в один клик</div>
					</a>
				</div>
			</div>
		</div>	
	

	<!------------------------------------------>
	<div class="product__right uk-width-3-5@m uk-width-1-1">

		<div class="uk-flex-middle  uk-child-width-auto@m uk-child-width-1-2" data-uk-grid>
			<div>	
				<div class="product__price">
					<span>Цена:</span> <b>[!Price? &price=`[*price*]` &round=`2` &delimiter=` ` !]</b>&nbsp;₽
				</div>
			</div>
			<div>
				<div class="product__cod">Код товара:<b> [*prod-cod*]</b></div>
			</div>	
		</div>
		<!-- <div class="uk-grid-small uk-flex-middle" data-uk-grid>

<div>
<a href="#" class="catalog__btn-box product__btn uk-flex">
<img src="img/cart-color-w.svg" alt="" class="catalog__cart-icon">
<div class="product__btn-text">в корзину</div>
</a>
</div>
<div>
<a href="#" class="catalog__btn-box uk-flex product__btn">
<img src="img/comparison-color-w.svg" alt="" class="catalog__comp-icon">
<div class="product__btn-text">сравнить</div>
</a>
</div>
</div> -->

		<div class="product__har uk-margin">
			<h3 class="product__title uk-margin-small-bottom">Характеристики</h3>
			[[ParseMultiParams? &act=`har2` &catparam=`[*cat-har*]`]]
			


			<div class="product__important uk-margin-small-top uk-width-2-3@xl uk-width-1-1">
				Внимание! Информация о товарах, размещенная на сайте, не является публичной офертой, определяемой положениями Части 2 Статьи 437 Гражданского кодекса Российской Федерации. Производители вправе вносить изменения в технические характеристики, внешний вид и комплектацию товаров без предварительного уведомления. Уточняйте характеристики у наших менеджеров перед оформлением заказа.
			</div>
		</div>

	</div>

	<div>
		<h3 class="product__title">Описание</h3>
		<div class="product__inform">[*content*]</div>
	</div>


</div>';$c['share']='<div class="share uk-margin-medium">
	<script src="//yastatic.net/es5-shims/0.0.2/es5-shims.min.js"></script>
	<script src="//yastatic.net/share2/share.js"></script>
	<div class="ya-share2" data-services="vkontakte,facebook,odnoklassniki,viber,whatsapp,skype"></div>
</div>';$c['item_content_2']='<div class="product uk-width-1-1 uk-margin-medium-top" data-uk-grid>

    <!------------------------------------------>

    <div class="uk-width-2-5@m uk-width-1 slider_in_item " data-uk-slideshow="animation: fade; ratio: 1:1; min-height: 300; max-height: 300" >
        <ul class="uk-slideshow-items">
            [[ParseMultiImages? &id=`[*id*]` &t=`1`]]
        </ul>

        <div class="uk-position-relative uk-margin" data-uk-slider>
            <ul class="uk-thumbnav uk-flex-nowrap uk-flex-center uk-slider-items uk-child-width-1-4@m uk-child-width-1-6@s uk-child-width-1-3">
                [[ParseMultiImages? &id=`[*id*]` &t=`2`]]
            </ul> 
            <a class="uk-position-center-left uk-hidden-hover" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
            <a class="uk-position-center-right uk-hidden-hover" href="#" uk-slidenav-next uk-slider-item="next"></a>
        </div>
        <div class="uk-grid-small uk-flex-middle uk-child-width-1-2" data-uk-grid>
            <div>
                [[if? &is=`[!ShopAction? &act=`stat` &id=`[*id*]`!]:=:n` 

                &then=`<a href="#" class="catalog__btn-box product__btn uk-flex btn-basket" data-itemid="[*id*]">
                    <img src="img/cart-color-w.svg" alt="" class="catalog__cart-icon">
                    <div class="product__btn-text">в корзину</div>
                </a>
                <button class="cib_ok catalog__btn-box product__btn uk-flex btn-basket" style="display:none;">
                    <img src="img/cart-full.svg" alt="" class="catalog__cart-icon">
                    <div class="product__btn-text">в корзине</div>
                </button>` 				  
                &else=`
                <button class="cib_ok catalog__btn-box product__btn uk-flex btn-basket" style="display:inline-block;">
                    <img src="img/cart-full.svg" alt="" class="catalog__cart-icon">
                    <div class="product__btn-text">в корзине</div>
                </button>
                `]]
            </div>
            <div>
                <a href="#" class="catalog__btn-box uk-flex product__btn">
                    <!--img src="img/comparison-color-w.svg" alt="" class="catalog__comp-icon"-->
                    <div class="product__btn-text">купить в один клик</div>
                </a>
            </div>
        </div>
    </div>	

    <div id="modal-center" class="uk-flex-top" uk-modal>
        <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">
            <div class="padding"></div>
            <button class="uk-modal-close-default" type="button" uk-close></button>
            <div class="slider_in_item" data-uk-slideshow="animation: fade; ratio: 1:1;">
                <ul class="uk-slideshow-items uk-slideshow-items__popup"> 

                    [[ParseMultiImages? &id=`[*id*]` &t=`3`]]
                </ul>

                <div class="uk-position-relative" data-uk-slider>
                    <!-- <ul class="uk-thumbnav uk-flex-nowrap uk-flex-center uk-slider-items uk-child-width-1-4@m uk-child-width-1-6@s uk-child-width-1-3" > -->
                    <ul class="uk-thumbnav uk-flex-nowrap uk-flex-center uk-slider-items uk-child-width-1-4@m uk-child-width-1-6@s uk-child-width-1-3">
                        [[ParseMultiImages? &id=`[*id*]` &t=`2`]]
                    </ul> 
                    <a class="uk-position-center-left uk-hidden-hover" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
                    <a class="uk-position-center-right uk-hidden-hover" href="#" uk-slidenav-next uk-slider-item="next"></a>
                </div>

            </div>		

        </div>
    </div>


    <!------------------------------------------>
    <div class="product__right uk-width-3-5@m uk-width-1-1">

        <div class="uk-child-width-auto@m uk-child-width-1-2 uk-flex-top" data-uk-grid>
            <div>	
                <div class="product__price">
                    <span>Цена:</span> <b>[[Price? &price=`[*price*]` &round=`2` &delimiter=` ` ]]</b>&nbsp;₽
                </div>
                <div class="product__price-text">
                    [*price-text*]
                </div>
                [[if? &is=`[*availability*]:isemty` &then=`` &else=`<div class="product__available uk-margin-small-top"><span class="product__available-span">Статус товара:</span> [*availability*]</div>`]]
				[[if? &is=`[*brand*]:not_empty` &then=`<div class="product__available uk-margin-small-top"><span class="product__available-span">Бренд:</span> [*brand*]</div>`]]
				[[if? &is=`[*model*]:not_empty` &then=`<div class="product__available uk-margin-small-top"><span class="product__available-span">Модель:</span> [*model*]</div>`]]
				[[if? &is=`[*country*]:not_empty` &then=`<div class="product__available uk-margin-small-top"><span class="product__available-span">Страна:</span> [*country*]</div>`]]
				[[if? &is=`[*manufacturer_code*]:not_empty` &then=`<div class="product__available uk-margin-small-top"><span class="product__available-span">Код производителя:</span> [*manufacturer_code*]</div>`]]

            </div>
            <div>
				[[if? &is=`[*article*]:not_empty` &then=`<div class="product__cod">Код товара:<b> [*article*]</b></div>`]]
            </div>	
        </div>



        <div class="product__har uk-margin">
            <h3 class="product__title uk-margin-small-bottom">Характеристики</h3>
            [[ParseMultiParams? &act=`har2` &catparam=`[*cat-har*]`]]
            <div class="product__important uk-margin-small-top uk-width-2-3@xl uk-width-1-1">Внимание! Информация о товарах, размещенная на сайте, не является публичной офертой, определяемой положениями Части 2 Статьи 437 Гражданского кодекса Российской Федерации. Производители вправе вносить изменения в технические характеристики, внешний вид и комплектацию товаров без предварительного уведомления. Уточняйте характеристики и цены у наших менеджеров перед оформлением заказа.
			</div>
        </div>

    </div>


    <div>
        <ul class="uk-subnav uk-subnav-pill" data-uk-tab="animation: uk-animation-fade">
            <li class="product__tab uk-padding-remove"><a href="#" class="product__tab-link">Описание</a></li>
            <li class="product__tab uk-padding-remove"><a href="#" class="product__tab-link">Документы</a></li>
            <li class="product__tab uk-padding-remove"><a href="#" class="product__tab-link">Видео</a></li>
        </ul>

        <ul class="uk-switcher uk-margin">
            <li>
                <div class="product__inform">[*content*]</div>
            </li>
            <li>
                <div class="product__file-box">
                    [[ParseMultiParams? &act=`file` &catparam=`[*files*]`]] 
                </div>
            </li>
            <li>[*video*]</li>
        </ul>
    </div>

</div>';$c['svg']='<svg id="svgicons" style="width:0;height:0;overflow:hidden;display:none;"
	 version="1.1"
	 baseProfile="full"
	 xmlns="http://www.w3.org/2000/svg"
	 xmlns:xlink="http://www.w3.org/1999/xlink">

<symbol id="icon-plane" viewBox="0 0 512.001 512.001">
<path d="M509.532,34.999c-2.292-2.233-5.678-2.924-8.658-1.764L5.213,225.734c-2.946,1.144-4.967,3.883-5.192,7.034
c-0.225,3.151,1.386,6.149,4.138,7.7l102.719,57.875l35.651,174.259c0.222,1.232,0.723,2.379,1.442,3.364
c0.072,0.099,0.131,0.175,0.191,0.251c1.256,1.571,3.037,2.668,5.113,3c0.265,0.042,0.531,0.072,0.795,0.088
c0.171,0.011,0.341,0.016,0.511,0.016c1.559,0,3.036-0.445,4.295-1.228c0.426-0.264,0.831-0.569,1.207-0.915
c0.117-0.108,0.219-0.205,0.318-0.306l77.323-77.52c3.186-3.195,3.18-8.369-0.015-11.555c-3.198-3.188-8.368-3.18-11.555,0.015
l-60.739,60.894l13.124-112.394l185.495,101.814c1.868,1.02,3.944,1.239,5.846,0.78c0.209-0.051,0.4-0.105,0.589-0.166
c1.878-0.609,3.526-1.877,4.574-3.697c0.053-0.094,0.1-0.179,0.146-0.264c0.212-0.404,0.382-0.8,0.517-1.202L511.521,43.608
C512.6,40.596,511.824,37.23,509.532,34.999z M27.232,234.712L432.364,77.371l-318.521,206.14L27.232,234.712z M162.72,316.936
c-0.764,0.613-1.429,1.374-1.949,2.267c-0.068,0.117-0.132,0.235-0.194,0.354c-0.496,0.959-0.784,1.972-0.879,2.986L148.365,419.6
l-25.107-122.718l275.105-178.042L162.72,316.936z M359.507,419.195l-177.284-97.307L485.928,66.574L359.507,419.195z"/>
</symbol>
	
<symbol id="icon-plus" viewBox="0 0 3200 3200">
<path d="M1600 176c393,0 749,159 1007,417 258,258 417,614 417,1007 0,393 -159,749 -417,1007 -258,258 -614,417 -1007,417 -393,0 -749,-159 -1007,-417 -258,-258 -417,-614 -417,-1007 0,-393 159,-749 417,-1007 258,-258 614,-417 1007,-417zm-760 1499c-41,0 -75,-34 -75,-75 0,-41 34,-75 75,-75l685 0 0 -685c0,-41 34,-75 75,-75 41,0 75,34 75,75l0 685 685 0c41,0 75,34 75,75 0,41 -34,75 -75,75l-685 0 0 685c0,41 -34,75 -75,75 -41,0 -75,-34 -75,-75l0 -685 -685 0zm1661 -976c-230,-231 -549,-373 -901,-373 -352,0 -671,142 -901,373 -231,230 -373,549 -373,901 0,352 142,671 373,901 230,231 549,373 901,373 352,0 671,-142 901,-373 231,-230 373,-549 373,-901 0,-352 -142,-671 -373,-901z"/>
</symbol>
	
<symbol id="icon-minus" viewBox="0 0 3200 3200">
<path d="M1600 176c393,0 749,159 1007,417 258,258 417,614 417,1007 0,393 -159,749 -417,1007 -258,258 -614,417 -1007,417 -393,0 -749,-159 -1007,-417 -258,-258 -417,-614 -417,-1007 0,-393 159,-749 417,-1007 258,-258 614,-417 1007,-417zm-760 1499c-41,0 -75,-34 -75,-75 0,-41 34,-75 75,-75l1520 0c41,0 75,34 75,75 0,41 -34,75 -75,75l-1520 0zm1661 -976c-230,-231 -549,-373 -901,-373 -352,0 -671,142 -901,373 -231,230 -373,549 -373,901 0,352 142,671 373,901 230,231 549,373 901,373 352,0 671,-142 901,-373 231,-230 373,-549 373,-901 0,-352 -142,-671 -373,-901z"/>
</symbol>

<symbol id="icon-delete" viewBox="0 0 3200 3200">
<path d="M1600 176c393,0 749,159 1007,417 258,258 417,614 417,1007 0,393 -159,749 -417,1007 -258,258 -614,417 -1007,417 -393,0 -749,-159 -1007,-417 -258,-258 -417,-614 -417,-1007 0,-393 159,-749 417,-1007 258,-258 614,-417 1007,-417zm-590 940c-29,-29 -29,-77 0,-106 29,-29 77,-29 106,0l484 484 484 -484c29,-29 77,-29 106,0 29,29 29,77 0,106l-484 484 484 484c29,29 29,77 0,106 -29,29 -77,29 -106,0l-484 -484 -484 484c-29,29 -77,29 -106,0 -29,-29 -29,-77 0,-106l484 -484 -484 -484zm1491 -417c-230,-231 -549,-373 -901,-373 -352,0 -671,142 -901,373 -231,230 -373,549 -373,901 0,352 142,671 373,901 230,231 549,373 901,373 352,0 671,-142 901,-373 231,-230 373,-549 373,-901 0,-352 -142,-671 -373,-901z"/>
</symbol>
	
<symbol id="icon-galochka" viewBox="0 0 305.002 305.002">
<path d="M152.502,0.001C68.412,0.001,0,68.412,0,152.501s68.412,152.5,152.502,152.5c84.089,0,152.5-68.411,152.5-152.5
S236.591,0.001,152.502,0.001z M152.502,280.001C82.197,280.001,25,222.806,25,152.501c0-70.304,57.197-127.5,127.502-127.5
c70.304,0,127.5,57.196,127.5,127.5C280.002,222.806,222.806,280.001,152.502,280.001z"/>
<path d="M218.473,93.97l-90.546,90.547l-41.398-41.398c-4.882-4.881-12.796-4.881-17.678,0c-4.881,4.882-4.881,12.796,0,17.678
l50.237,50.237c2.441,2.44,5.64,3.661,8.839,3.661c3.199,0,6.398-1.221,8.839-3.661l99.385-99.385
c4.881-4.882,4.881-12.796,0-17.678C231.269,89.089,223.354,89.089,218.473,93.97z"/>
</symbol>
	
<symbol id="icon-preim1" viewBox="0 0 512 512">
<path d="m497.9,422.3l-57.2-57.5c-2.1-2.1-5.2-3.1-8.3-3.1l-43.9,5c33-37.9 53.2-87.3 53.2-141 0-118.2-96.7-214.5-215.3-214.5s-215.4,97.3-215.4,215.5 96.7,214.5 215.3,214.5c53.2,0 102.3-19.9 140.2-52.7l-5,43.3c0,3.1 1,6.3 3.1,8.4l57.2,57.5c6,6.5 16.7,4 17.7-7.3l5.2-46 46.8-5.2c8.3-0.9 13-10.4 6.4-16.9zm-466.1-195.6c-1.06581e-14-107.8 87.4-194.6 194.5-194.6s194.5,86.8 194.5,194.6c0,49.6-18.5,94.7-48.9,129l-34.8-34.8c21.7-25.5 34.9-58.7 34.9-95.2 0-80.6-65.5-146.5-145.6-146.5s-145.7,65.9-145.7,146.5c-1.42109e-14,80.6 65.5,146.5 145.6,146.5 36.8,0 70.6-13.7 96.3-36.5l34.8,34.8c-34.6,31.6-80.7,50.8-131.1,50.8-107.1,0-194.5-86.8-194.5-194.6zm257.7,46.6c9.9-13.1 15.9-29.2 15.9-46.6 0-42.9-35.4-78.5-79.1-78.5-43.7,0-79.1,35.6-79.1,78.5s35.4,78.5 79.1,78.5c18.1,0 35.1-6.5 48.7-17.1l33.6,33.6c-22,19-50.8,30.6-82.3,30.6-69.7,0-125.9-56.5-125.9-125.5 0-69 56.2-125.5 125.9-125.5 68.7,0 124.8,56.5 125.9,125.5 0,30.4-10.9,58.4-29.1,80.2l-33.6-33.7zm-41.3-41.4c-4.2-4.2-10.4-4.2-14.6,0-4.2,4.2-4.2,10.5 0,14.6l27.3,27.3c-9.7,7.2-21.6,11.4-34.6,11.4-32.2,0-58.3-26.2-58.3-58.6 0-32.4 26-58.6 58.3-58.6s58.3,26.2 58.3,58.6c0,11.9-3.5,22.9-9.5,32.1l-26.9-26.8zm134.2,196.7l3-30.2 39.3,39.3-2.8,29.6-39.5-38.7zm57.7-4.7l-38.6-38.6 26.7-2.7 39.5,38.7-27.6,2.6z"/>
</symbol>

<symbol id="icon-preim2" viewBox="0 0 512 512">
<path d="M308.1,229.9v-92.8l-192.9,92.8V11H11v490h490V137.1L308.1,229.9z M95.4,31.9v230.4l192.9-92.8v92.8l192.9-92.8v117.8H31.9   V31.9H95.4z M31.9,308.1h213.7v172H31.9V308.1z M266.4,480.1v-172h214.8v172H266.4z"/>
</symbol>

<symbol id="icon-preim3" viewBox="0 0 512 512">
<path d="m476.4,38.7c-13.3-17.6-33.9-27.7-56.6-27.7h-327.6c-22.7,0-43.3,10.1-56.6,27.7-12.5,16.5-16.4,37.3-10.8,56.9 21.4,75.5 110.8,129.2 164.1,146.4l56.6,56.6v60.5h-136.4c-5.8,0-10.4,4.7-10.4,10.4v121c0,5.8 4.7,10.4 10.4,10.4h293.8c5.8,0 10.4-4.7 10.4-10.4v-121c0-5.8-4.7-10.4-10.4-10.4h-136.5v-60.5l56.6-56.6c53.4-17.2 142.7-70.9 164.2-146.4 5.6-19.6 1.7-40.4-10.8-56.9zm-83.9,441.4h-273v-100.1h273v100.1zm-347.7-390.2c-3.8-13.3-1.1-27.5 7.4-38.6 18-23.6 46.7-19.4 46.7-19.4-2.5,62.8 17.3,123.9 55.6,172.9-44.9-23.6-95.2-63.8-109.7-114.9zm276.6,124.2l-65.4,65.5-65.4-65.4c-48.2-48.2-73.7-114.2-70.8-182.3h272.5c2.9,68-22.6,134-70.9,182.2zm145.8-124.2c-14.5,51-64.7,91.3-109.7,114.8 38.3-49 58.1-110.1 55.6-172.8 0,0 29.3-4 46.7,19.4 8.4,11.3 11.2,25.3 7.4,38.6z"/>
</symbol>

<symbol id="icon-preim4" viewBox="0 0 512 512">
<path d="m400.8,124.7h-90.6v-67.7h-270.9c-15.6,0-28.1,12.5-28.1,28.1v261.5c0,15.6 12.5,28.1 28.1,28.1h32.4c-0.8,4.1-1.2,8.2-1.2,12.5 0,37.5 30.2,67.7 67.7,67.7 37.5,0 68.8-30.2 67.7-67.7 0-4.3-0.4-8.4-1.2-12.5h85.5 19.8 19c-0.8,4.1-1.2,8.2-1.2,12.5 0,37.5 30.2,67.7 67.7,67.7 37.5,0 67.7-30.2 67.7-67.7 0-4.3-0.4-8.4-1.2-12.5h10.5c15.6,0 28.1-12.5 28.1-29.2v-96.9l-99.8-123.9zm-262.5,310.5c-26,0-47.9-21.9-47.9-47.9s21.9-47.9 47.9-47.9c27.1,0 47.9,21.9 47.9,47.9s-21.9,47.9-47.9,47.9zm59-81.3c-11.6-20.5-33.6-34.4-59-34.4-25.4,0-47.4,13.8-59,34.4h-40c-4.2,0-7.3-3.1-7.3-7.3v-261.4c0-4.2 3.1-7.3 7.3-7.3h251.1v276.1h-93.1zm198.3,81.2c-26,0-47.9-21.9-47.9-47.9s21.9-47.9 47.9-47.9c26,0 47.9,21.9 47.9,47.9s-21.9,47.9-47.9,47.9zm85.4-89.6c0,4.2-4.2,8.3-8.3,8.3h-18.1c-11.6-20.5-33.6-34.4-59-34.4-25.4,0-47.4,13.8-59,34.4h-25.4v-209.4h80.2l89.6,111.5v89.6z"/>
</symbol>

<symbol id="icon-preim5" viewBox="0 0 512 512">
<path d="m501,257h-173.1v-157.4h-111.5l-70.9,200.2v25h-13.6v-252.3h-20.9v284.6h-98v19.8h118.9v-31.3h13.6v31.3h34.7c-0.2,1.7-0.3,3.5-0.3,5.2 0,31.3 26.1,57.3 57.3,57.3 31.3,0 57.3-26.1 57.3-57.3 0-1.8-0.1-3.5-0.3-5.2h69.3c-0.2,1.7-0.3,3.5-0.3,5.2 0,31.3 26.1,57.3 57.3,57.3s57.3-26.1 57.3-57.3c0-1.8-0.1-3.5-0.3-5.2h23.5v-119.9zm-263.8,161.6c-19.8,0-36.5-16.7-36.5-36.5s16.7-36.5 36.5-36.5c19.8,0 36.5,16.7 36.5,36.5s-16.7,36.5-36.5,36.5zm69.9-61.5h-18.4c-9.4-19-29.1-32.3-51.4-32.3-22.3,0-42,13.3-51.4,32.3h-19.4v-54.2l64.5-182.4h76.1v136.5 100.1zm113.6,61.5c-19.8,0-36.5-16.7-36.5-36.5s16.7-36.5 36.5-36.5 36.5,16.7 36.5,36.5-16.7,36.5-36.5,36.5zm59.4-61.5h-8c-9.4-19-29.1-32.3-51.4-32.3s-42,13.3-51.4,32.3h-41.3v-79.2h152.2v79.2z"/>
<path d="M89.2,207H11v128.2h78.2V207z M68.3,314.4H31.9v-86.5h36.5V314.4z"/>
</symbol>

<symbol id="icon-star" viewBox="0 0 487.222 487.222">
<path d="M486.554,186.811c-1.6-4.9-5.8-8.4-10.9-9.2l-152-21.6l-68.4-137.5c-2.3-4.6-7-7.5-12.1-7.5l0,0c-5.1,0-9.8,2.9-12.1,7.6
l-67.5,137.9l-152,22.6c-5.1,0.8-9.3,4.3-10.9,9.2s-0.2,10.3,3.5,13.8l110.3,106.9l-25.5,151.4c-0.9,5.1,1.2,10.2,5.4,13.2
c2.3,1.7,5.1,2.6,7.9,2.6c2.2,0,4.3-0.5,6.3-1.6l135.7-71.9l136.1,71.1c2,1,4.1,1.5,6.2,1.5l0,0c7.4,0,13.5-6.1,13.5-13.5
c0-1.1-0.1-2.1-0.4-3.1l-26.3-150.5l109.6-107.5C486.854,197.111,488.154,191.711,486.554,186.811z M349.554,293.911
c-3.2,3.1-4.6,7.6-3.8,12l22.9,131.3l-118.2-61.7c-3.9-2.1-8.6-2-12.6,0l-117.8,62.4l22.1-131.5c0.7-4.4-0.7-8.8-3.9-11.9
l-95.6-92.8l131.9-19.6c4.4-0.7,8.2-3.4,10.1-7.4l58.6-119.7l59.4,119.4c2,4,5.8,6.7,10.2,7.4l132,18.8L349.554,293.911z"/>
</symbol>

<symbol id="icon-heart" viewBox="0 0 471.701 471.701">
<path d="M433.601,67.001c-24.7-24.7-57.4-38.2-92.3-38.2s-67.7,13.6-92.4,38.3l-12.9,12.9l-13.1-13.1
c-24.7-24.7-57.6-38.4-92.5-38.4c-34.8,0-67.6,13.6-92.2,38.2c-24.7,24.7-38.3,57.5-38.2,92.4c0,34.9,13.7,67.6,38.4,92.3
l187.8,187.8c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-3.9l188.2-187.5c24.7-24.7,38.3-57.5,38.3-92.4
C471.801,124.501,458.301,91.701,433.601,67.001z M414.401,232.701l-178.7,178l-178.3-178.3c-19.6-19.6-30.4-45.6-30.4-73.3
s10.7-53.7,30.3-73.2c19.5-19.5,45.5-30.3,73.1-30.3c27.7,0,53.8,10.8,73.4,30.4l22.6,22.6c5.3,5.3,13.8,5.3,19.1,0l22.4-22.4
c19.6-19.6,45.7-30.4,73.3-30.4c27.6,0,53.6,10.8,73.2,30.3c19.6,19.6,30.3,45.6,30.3,73.3
C444.801,187.101,434.001,213.101,414.401,232.701z"/>
</symbol>

<symbol id="icon-skype" viewBox="0 0 32 32">
<path d="M30.664 18.316c0.119-0.756 0.182-1.528 0.182-2.317 0-8.2-6.647-14.846-14.847-14.846-0.787 0-1.562 0.065-2.317 0.183-1.367-0.846-2.981-1.336-4.711-1.336-4.955 0-8.972 4.016-8.972 8.972 0 1.729 0.49 3.342 1.336 4.712-0.117 0.757-0.181 1.527-0.181 2.316 0 8.2 6.647 14.845 14.845 14.845 0.787 0 1.563-0.061 2.318-0.18 1.369 0.844 2.981 1.335 4.71 1.335 4.956 0 8.972-4.017 8.972-8.972 0-1.73-0.489-3.342-1.336-4.711zM23.048 22.751c-0.628 0.904-1.551 1.611-2.756 2.119-1.208 0.509-2.636 0.763-4.285 0.763-1.976 0-3.612-0.346-4.904-1.044-0.915-0.5-1.66-1.171-2.232-2.007-0.574-0.837-0.864-1.657-0.864-2.456 0-0.472 0.18-0.882 0.53-1.216 0.354-0.337 0.809-0.506 1.347-0.506 0.44 0 0.819 0.133 1.127 0.395 0.306 0.263 0.562 0.645 0.772 1.149 0.251 0.584 0.524 1.072 0.815 1.462 0.289 0.385 0.695 0.706 1.221 0.957 0.52 0.252 1.213 0.378 2.080 0.378 1.186 0 2.145-0.257 2.879-0.763 0.737-0.511 1.092-1.132 1.092-1.883 0-0.599-0.191-1.075-0.583-1.446-0.395-0.376-0.906-0.662-1.539-0.861-0.636-0.202-1.489-0.416-2.559-0.641-1.436-0.314-2.638-0.678-3.611-1.098-0.974-0.421-1.75-0.996-2.325-1.722-0.576-0.733-0.864-1.645-0.864-2.725 0-1.030 0.303-1.95 0.911-2.752 0.607-0.804 1.485-1.419 2.63-1.847 1.141-0.428 2.484-0.643 4.023-0.643 1.231 0 2.295 0.142 3.196 0.426 0.899 0.285 1.648 0.662 2.247 1.135 0.595 0.472 1.033 0.969 1.31 1.491 0.277 0.523 0.417 1.035 0.417 1.534 0 0.464-0.18 0.885-0.53 1.253s-0.799 0.557-1.322 0.556c-0.472 0-0.842-0.109-1.099-0.339-0.25-0.223-0.513-0.578-0.797-1.072-0.359-0.69-0.789-1.228-1.289-1.612-0.487-0.377-1.29-0.574-2.407-0.572-1.034 0-1.861 0.211-2.486 0.624-0.628 0.42-0.929 0.907-0.93 1.478 0.001 0.358 0.104 0.659 0.311 0.917 0.21 0.26 0.502 0.486 0.878 0.676 0.376 0.193 0.758 0.342 1.142 0.45 0.389 0.11 1.034 0.269 1.93 0.48 1.124 0.242 2.144 0.513 3.060 0.808 0.915 0.297 1.695 0.654 2.34 1.080 0.65 0.425 1.158 0.966 1.521 1.621 0.365 0.655 0.547 1.456 0.547 2.397 0.001 1.134-0.314 2.154-0.944 3.057z"></path>
</symbol>

<symbol id="icon-instagram" viewBox="0 0 32 32">
<path d="M23.169 0h-14.338c-4.869 0-8.831 3.962-8.831 8.831v14.338c0 4.869 3.961 8.831 8.831 8.831h14.338c4.87 0 8.831-3.962 8.831-8.831v-14.338c0-4.869-3.961-8.831-8.831-8.831zM29.161 23.169c0 3.304-2.688 5.992-5.992 5.992h-14.338c-3.304 0-5.991-2.688-5.991-5.992v-14.338c0-3.304 2.688-5.992 5.991-5.992h14.338c3.304 0 5.992 2.688 5.992 5.992v14.338z"></path>
<path d="M16 7.755c-4.547 0-8.246 3.699-8.246 8.246s3.699 8.245 8.246 8.245 8.246-3.699 8.246-8.245c0-4.547-3.699-8.246-8.246-8.246zM16 21.406c-2.981 0-5.406-2.425-5.406-5.406s2.425-5.406 5.406-5.406 5.406 2.425 5.406 5.406c0 2.981-2.425 5.406-5.406 5.406z"></path>
<path d="M24.591 5.347c-0.547 0-1.084 0.221-1.471 0.609-0.388 0.386-0.611 0.924-0.611 1.473 0 0.547 0.223 1.085 0.611 1.473 0.386 0.386 0.924 0.609 1.471 0.609 0.549 0 1.085-0.223 1.473-0.609 0.388-0.388 0.609-0.926 0.609-1.473 0-0.549-0.221-1.086-0.609-1.473-0.386-0.388-0.924-0.609-1.473-0.609z"></path>
</symbol>

<symbol id="icon-vkontakte" viewBox="0 0 304.36 304.36">
<path d="M261.945,175.576c10.096,9.857,20.752,19.131,29.807,29.982
c4,4.822,7.787,9.798,10.684,15.394c4.105,7.955,0.387,16.709-6.746,17.184l-44.34-0.02c-11.436,0.949-20.559-3.655-28.23-11.474
c-6.139-6.253-11.824-12.908-17.727-19.372c-2.42-2.642-4.953-5.128-7.979-7.093c-6.053-3.929-11.307-2.726-14.766,3.587
c-3.523,6.421-4.322,13.531-4.668,20.687c-0.475,10.441-3.631,13.186-14.119,13.664c-22.414,1.057-43.686-2.334-63.447-13.641
c-17.422-9.968-30.932-24.04-42.691-39.971C34.828,153.482,17.295,119.395,1.537,84.353C-2.01,76.458,0.584,72.22,9.295,72.07
c14.465-0.281,28.928-0.261,43.41-0.02c5.879,0.086,9.771,3.458,12.041,9.012c7.826,19.243,17.402,37.551,29.422,54.521
c3.201,4.518,6.465,9.036,11.113,12.216c5.142,3.521,9.057,2.354,11.476-3.374c1.535-3.632,2.207-7.544,2.553-11.434
c1.146-13.383,1.297-26.743-0.713-40.079c-1.234-8.323-5.922-13.711-14.227-15.286c-4.238-0.803-3.607-2.38-1.555-4.799
c3.564-4.172,6.916-6.769,13.598-6.769h50.111c7.889,1.557,9.641,5.101,10.721,13.039l0.043,55.663
c-0.086,3.073,1.535,12.192,7.07,14.226c4.43,1.448,7.35-2.096,10.008-4.905c11.998-12.734,20.561-27.783,28.211-43.366
c3.395-6.852,6.314-13.968,9.143-21.078c2.096-5.276,5.385-7.872,11.328-7.757l48.229,0.043c1.43,0,2.877,0.021,4.262,0.258
c8.127,1.385,10.354,4.881,7.844,12.817c-3.955,12.451-11.65,22.827-19.174,33.251c-8.043,11.129-16.645,21.877-24.621,33.072
C252.26,161.544,252.842,166.697,261.945,175.576L261.945,175.576z M261.945,175.576"/>
</symbol>

<symbol id="icon-whatsapp" viewBox="0 0 32 32">
<path d="M32 15.588c0 8.609-7.033 15.588-15.709 15.588-2.755 0-5.342-0.704-7.594-1.94l-8.697 2.764 2.836-8.363c-1.43-2.349-2.254-5.104-2.254-8.049 0-8.609 7.033-15.588 15.71-15.588 8.677 0 15.709 6.979 15.709 15.588zM16.291 2.482c-7.283 0-13.207 5.879-13.207 13.105 0 2.868 0.935 5.523 2.516 7.684l-1.65 4.867 5.076-1.613c2.085 1.369 4.583 2.168 7.267 2.168 7.282 0 13.207-5.878 13.207-13.105s-5.925-13.106-13.208-13.106zM24.224 19.178c-0.097-0.159-0.353-0.255-0.738-0.446s-2.279-1.116-2.631-1.243c-0.353-0.127-0.61-0.191-0.867 0.191s-0.994 1.243-1.22 1.498c-0.225 0.256-0.449 0.288-0.834 0.096s-1.625-0.595-3.096-1.896c-1.145-1.013-1.918-2.263-2.142-2.646s-0.023-0.589 0.169-0.779c0.174-0.171 0.385-0.446 0.578-0.669s0.257-0.382 0.385-0.637c0.129-0.255 0.065-0.478-0.032-0.669s-0.867-2.071-1.188-2.836c-0.321-0.764-0.641-0.637-0.866-0.637s-0.481-0.032-0.738-0.032-0.674 0.096-1.027 0.478c-0.353 0.383-1.347 1.307-1.347 3.187s1.379 3.697 1.572 3.951c0.192 0.255 2.663 4.238 6.578 5.768s3.915 1.019 4.621 0.955c0.705-0.064 2.278-0.924 2.6-1.816 0.32-0.893 0.32-1.658 0.224-1.817z"></path>
</symbol>

<symbol id="icon-basket" viewBox="0 0 486.569 486.569">
<path d="M146.069,320.369h268.1c30.4,0,55.2-24.8,55.2-55.2v-112.8c0-0.1,0-0.3,0-0.4c0-0.3,0-0.5,0-0.8c0-0.2,0-0.4-0.1-0.6
c0-0.2-0.1-0.5-0.1-0.7s-0.1-0.4-0.1-0.6c-0.1-0.2-0.1-0.4-0.2-0.7c-0.1-0.2-0.1-0.4-0.2-0.6c-0.1-0.2-0.1-0.4-0.2-0.6
c-0.1-0.2-0.2-0.4-0.3-0.7c-0.1-0.2-0.2-0.4-0.3-0.5c-0.1-0.2-0.2-0.4-0.3-0.6c-0.1-0.2-0.2-0.3-0.3-0.5c-0.1-0.2-0.3-0.4-0.4-0.6
c-0.1-0.2-0.2-0.3-0.4-0.5c-0.1-0.2-0.3-0.3-0.4-0.5s-0.3-0.3-0.4-0.5s-0.3-0.3-0.4-0.4c-0.2-0.2-0.3-0.3-0.5-0.5
c-0.2-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.3-0.6-0.4c-0.2-0.1-0.3-0.2-0.5-0.3s-0.4-0.2-0.6-0.4c-0.2-0.1-0.4-0.2-0.6-0.3
s-0.4-0.2-0.6-0.3s-0.4-0.2-0.6-0.3s-0.4-0.1-0.6-0.2c-0.2-0.1-0.5-0.2-0.7-0.2s-0.4-0.1-0.5-0.1c-0.3-0.1-0.5-0.1-0.8-0.1
c-0.1,0-0.2-0.1-0.4-0.1l-339.8-46.9v-47.4c0-0.5,0-1-0.1-1.4c0-0.1,0-0.2-0.1-0.4c0-0.3-0.1-0.6-0.1-0.9c-0.1-0.3-0.1-0.5-0.2-0.8
c0-0.2-0.1-0.3-0.1-0.5c-0.1-0.3-0.2-0.6-0.3-0.9c0-0.1-0.1-0.3-0.1-0.4c-0.1-0.3-0.2-0.5-0.4-0.8c-0.1-0.1-0.1-0.3-0.2-0.4
c-0.1-0.2-0.2-0.4-0.4-0.6c-0.1-0.2-0.2-0.3-0.3-0.5s-0.2-0.3-0.3-0.5s-0.3-0.4-0.4-0.6c-0.1-0.1-0.2-0.2-0.3-0.3
c-0.2-0.2-0.4-0.4-0.6-0.6c-0.1-0.1-0.2-0.2-0.3-0.3c-0.2-0.2-0.4-0.4-0.7-0.6c-0.1-0.1-0.3-0.2-0.4-0.3c-0.2-0.2-0.4-0.3-0.6-0.5
c-0.3-0.2-0.6-0.4-0.8-0.5c-0.1-0.1-0.2-0.1-0.3-0.2c-0.4-0.2-0.9-0.4-1.3-0.6l-73.7-31c-6.9-2.9-14.8,0.3-17.7,7.2
s0.3,14.8,7.2,17.7l65.4,27.6v61.2v9.7v74.4v66.5v84c0,28,21,51.2,48.1,54.7c-4.9,8.2-7.8,17.8-7.8,28c0,30.1,24.5,54.5,54.5,54.5
s54.5-24.5,54.5-54.5c0-10-2.7-19.5-7.5-27.5h121.4c-4.8,8.1-7.5,17.5-7.5,27.5c0,30.1,24.5,54.5,54.5,54.5s54.5-24.5,54.5-54.5
s-24.5-54.5-54.5-54.5h-255c-15.6,0-28.2-12.7-28.2-28.2v-36.6C126.069,317.569,135.769,320.369,146.069,320.369z M213.269,431.969
c0,15.2-12.4,27.5-27.5,27.5s-27.5-12.4-27.5-27.5s12.4-27.5,27.5-27.5S213.269,416.769,213.269,431.969z M428.669,431.969
c0,15.2-12.4,27.5-27.5,27.5s-27.5-12.4-27.5-27.5s12.4-27.5,27.5-27.5S428.669,416.769,428.669,431.969z M414.169,293.369h-268.1
c-15.6,0-28.2-12.7-28.2-28.2v-66.5v-74.4v-5l324.5,44.7v101.1C442.369,280.769,429.669,293.369,414.169,293.369z"/>
</symbol>

<symbol id="icon-home" viewBox="0 0 24 24">
<path d="M12 3c0 0-6.186 5.34-9.643 8.232-0.203 0.184-0.357 0.452-0.357 0.768 0 0.553 0.447 1 1 1h2v7c0 0.553 0.447 1 1 1h3c0.553 0 1-0.448 1-1v-4h4v4c0 0.552 0.447 1 1 1h3c0.553 0 1-0.447 1-1v-7h2c0.553 0 1-0.447 1-1 0-0.316-0.154-0.584-0.383-0.768-3.433-2.892-9.617-8.232-9.617-8.232z"></path>
</symbol>

<symbol id="icon-search" viewBox="0 0 24 24">
<path d="M10 1q1.828 0 3.496 0.715t2.871 1.918 1.918 2.871 0.715 3.496q0 1.57-0.512 3.008t-1.457 2.609l5.68 5.672q0.289 0.289 0.289 0.711 0 0.43-0.285 0.715t-0.715 0.285q-0.422 0-0.711-0.289l-5.672-5.68q-1.172 0.945-2.609 1.457t-3.008 0.512q-1.828 0-3.496-0.715t-2.871-1.918-1.918-2.871-0.715-3.496 0.715-3.496 1.918-2.871 2.871-1.918 3.496-0.715zM10 3q-1.422 0-2.719 0.555t-2.234 1.492-1.492 2.234-0.555 2.719 0.555 2.719 1.492 2.234 2.234 1.492 2.719 0.555 2.719-0.555 2.234-1.492 1.492-2.234 0.555-2.719-0.555-2.719-1.492-2.234-2.234-1.492-2.719-0.555z"></path>
</symbol>

<symbol id="icon-phone" viewBox="0 0 32 32">
<path d="M30.906 23.141c-1.341-1.354-2.682-2.689-3.983-3.977-0.707-0.7-1.533-1.070-2.398-1.070s-1.691 0.37-2.391 1.064l-0.178 0.178c-0.707 0.7-1.44 1.427-2.147 2.154-0.145-0.073-0.291-0.145-0.429-0.218-0.324-0.159-0.634-0.311-0.905-0.482-2.127-1.334-4.083-3.111-5.972-5.443-0.918-1.13-1.559-2.134-2.008-3.151 0.628-0.608 1.242-1.229 1.843-1.836 0.152-0.152 0.31-0.31 0.462-0.462 1.473-1.48 1.467-3.396-0.007-4.882-0.449-0.456-0.912-0.912-1.354-1.354-0.198-0.198-0.396-0.396-0.595-0.595-0.211-0.211-0.416-0.416-0.628-0.628-0.449-0.456-0.918-0.925-1.387-1.381-0.707-0.694-1.539-1.057-2.398-1.057s-1.691 0.363-2.391 1.057c-0.337 0.337-0.68 0.674-1.004 1.004-0.476 0.482-0.971 0.978-1.467 1.453-0.925 0.879-1.44 1.988-1.539 3.303-0.152 2.068 0.423 3.937 0.938 5.338 1.176 3.164 2.973 6.164 5.496 9.169 3.144 3.739 6.93 6.699 11.25 8.806 2.378 1.156 4.419 1.744 6.408 1.856 0.145 0.007 0.291 0.013 0.429 0.013 1.678 0 3.059-0.595 4.102-1.757 0.449-0.502 0.931-0.971 1.44-1.467 0.258-0.251 0.522-0.509 0.786-0.773 1.48-1.486 1.486-3.389 0.026-4.862zM29.625 26.748c-0.251 0.251-0.509 0.502-0.76 0.753-0.509 0.495-1.037 1.011-1.526 1.559-0.773 0.865-1.751 1.229-3.105 1.156-1.751-0.099-3.567-0.628-5.727-1.678-4.096-1.995-7.689-4.803-10.669-8.344-2.391-2.847-4.089-5.668-5.192-8.641-0.68-1.823-0.931-3.237-0.832-4.578 0.066-0.865 0.39-1.572 0.991-2.14 0.509-0.509 1.011-1.017 1.5-1.506 0.324-0.324 0.654-0.661 0.984-0.991 0.251-0.251 0.654-0.548 1.143-0.548s0.892 0.297 1.149 0.548c0.456 0.449 0.925 0.918 1.367 1.367 0.211 0.211 0.416 0.423 0.628 0.628 0.198 0.198 0.396 0.396 0.595 0.595 0.443 0.443 0.898 0.898 1.348 1.348 0.793 0.799 0.799 1.572 0.007 2.365-0.152 0.159-0.31 0.31-0.462 0.469-0.641 0.647-1.308 1.321-1.975 1.962-0.33 0.317-0.654 0.859-0.33 1.638 0.515 1.235 1.262 2.438 2.345 3.772 2.015 2.477 4.116 4.386 6.408 5.827 0.357 0.225 0.72 0.403 1.070 0.575 0.211 0.099 0.403 0.198 0.595 0.304 0.238 0.132 0.476 0.192 0.713 0.192v0c0.377 0 0.727-0.165 1.037-0.482 0.747-0.773 1.526-1.539 2.273-2.286l0.178-0.178c0.251-0.251 0.654-0.548 1.136-0.548s0.885 0.297 1.143 0.548c1.295 1.288 2.636 2.623 3.97 3.97 0.773 0.76 0.766 1.572 0 2.345z"></path>
</symbol>

<symbol id="icon-email" viewBox="0 0 483.3 483.3">
<path d="M424.3,57.75H59.1c-32.6,0-59.1,26.5-59.1,59.1v249.6c0,32.6,26.5,59.1,59.1,59.1h365.1c32.6,0,59.1-26.5,59.1-59.1
v-249.5C483.4,84.35,456.9,57.75,424.3,57.75z M456.4,366.45c0,17.7-14.4,32.1-32.1,32.1H59.1c-17.7,0-32.1-14.4-32.1-32.1v-249.5
c0-17.7,14.4-32.1,32.1-32.1h365.1c17.7,0,32.1,14.4,32.1,32.1v249.5H456.4z"/>
<path d="M304.8,238.55l118.2-106c5.5-5,6-13.5,1-19.1c-5-5.5-13.5-6-19.1-1l-163,146.3l-31.8-28.4c-0.1-0.1-0.2-0.2-0.2-0.3
c-0.7-0.7-1.4-1.3-2.2-1.9L78.3,112.35c-5.6-5-14.1-4.5-19.1,1.1c-5,5.6-4.5,14.1,1.1,19.1l119.6,106.9L60.8,350.95
c-5.4,5.1-5.7,13.6-0.6,19.1c2.7,2.8,6.3,4.3,9.9,4.3c3.3,0,6.6-1.2,9.2-3.6l120.9-113.1l32.8,29.3c2.6,2.3,5.8,3.4,9,3.4
c3.2,0,6.5-1.2,9-3.5l33.7-30.2l120.2,114.2c2.6,2.5,6,3.7,9.3,3.7c3.6,0,7.1-1.4,9.8-4.2c5.1-5.4,4.9-14-0.5-19.1L304.8,238.55z" />
</symbol>

<symbol id="icon-phonecall" viewBox="0 0 473.806 473.806">
<path d="M374.456,293.506c-9.7-10.1-21.4-15.5-33.8-15.5c-12.3,0-24.1,5.3-34.2,15.4l-31.6,31.5c-2.6-1.4-5.2-2.7-7.7-4
c-3.6-1.8-7-3.5-9.9-5.3c-29.6-18.8-56.5-43.3-82.3-75c-12.5-15.8-20.9-29.1-27-42.6c8.2-7.5,15.8-15.3,23.2-22.8
c2.8-2.8,5.6-5.7,8.4-8.5c21-21,21-48.2,0-69.2l-27.3-27.3c-3.1-3.1-6.3-6.3-9.3-9.5c-6-6.2-12.3-12.6-18.8-18.6
c-9.7-9.6-21.3-14.7-33.5-14.7s-24,5.1-34,14.7c-0.1,0.1-0.1,0.1-0.2,0.2l-34,34.3c-12.8,12.8-20.1,28.4-21.7,46.5
c-2.4,29.2,6.2,56.4,12.8,74.2c16.2,43.7,40.4,84.2,76.5,127.6c43.8,52.3,96.5,93.6,156.7,122.7c23,10.9,53.7,23.8,88,26
c2.1,0.1,4.3,0.2,6.3,0.2c23.1,0,42.5-8.3,57.7-24.8c0.1-0.2,0.3-0.3,0.4-0.5c5.2-6.3,11.2-12,17.5-18.1c4.3-4.1,8.7-8.4,13-12.9
c9.9-10.3,15.1-22.3,15.1-34.6c0-12.4-5.3-24.3-15.4-34.3L374.456,293.506z M410.256,398.806
C410.156,398.806,410.156,398.906,410.256,398.806c-3.9,4.2-7.9,8-12.2,12.2c-6.5,6.2-13.1,12.7-19.3,20
c-10.1,10.8-22,15.9-37.6,15.9c-1.5,0-3.1,0-4.6-0.1c-29.7-1.9-57.3-13.5-78-23.4c-56.6-27.4-106.3-66.3-147.6-115.6
c-34.1-41.1-56.9-79.1-72-119.9c-9.3-24.9-12.7-44.3-11.2-62.6c1-11.7,5.5-21.4,13.8-29.7l34.1-34.1c4.9-4.6,10.1-7.1,15.2-7.1
c6.3,0,11.4,3.8,14.6,7c0.1,0.1,0.2,0.2,0.3,0.3c6.1,5.7,11.9,11.6,18,17.9c3.1,3.2,6.3,6.4,9.5,9.7l27.3,27.3
c10.6,10.6,10.6,20.4,0,31c-2.9,2.9-5.7,5.8-8.6,8.6c-8.4,8.6-16.4,16.6-25.1,24.4c-0.2,0.2-0.4,0.3-0.5,0.5
c-8.6,8.6-7,17-5.2,22.7c0.1,0.3,0.2,0.6,0.3,0.9c7.1,17.2,17.1,33.4,32.3,52.7l0.1,0.1c27.6,34,56.7,60.5,88.8,80.8
c4.1,2.6,8.3,4.7,12.3,6.7c3.6,1.8,7,3.5,9.9,5.3c0.4,0.2,0.8,0.5,1.2,0.7c3.4,1.7,6.6,2.5,9.9,2.5c8.3,0,13.5-5.2,15.2-6.9
l34.2-34.2c3.4-3.4,8.8-7.5,15.1-7.5c6.2,0,11.3,3.9,14.4,7.3c0.1,0.1,0.1,0.1,0.2,0.2l55.1,55.1
C420.456,377.706,420.456,388.206,410.256,398.806z"/>
<path d="M256.056,112.706c26.2,4.4,50,16.8,69,35.8s31.3,42.8,35.8,69c1.1,6.6,6.8,11.2,13.3,11.2c0.8,0,1.5-0.1,2.3-0.2
c7.4-1.2,12.3-8.2,11.1-15.6c-5.4-31.7-20.4-60.6-43.3-83.5s-51.8-37.9-83.5-43.3c-7.4-1.2-14.3,3.7-15.6,11
S248.656,111.506,256.056,112.706z"/>
<path d="M473.256,209.006c-8.9-52.2-33.5-99.7-71.3-137.5s-85.3-62.4-137.5-71.3c-7.3-1.3-14.2,3.7-15.5,11
c-1.2,7.4,3.7,14.3,11.1,15.6c46.6,7.9,89.1,30,122.9,63.7c33.8,33.8,55.8,76.3,63.7,122.9c1.1,6.6,6.8,11.2,13.3,11.2
c0.8,0,1.5-0.1,2.3-0.2C469.556,223.306,474.556,216.306,473.256,209.006z"/>
</symbol>

<symbol id="icon-user" viewBox="0 0 482.9 482.9">
<path d="M239.7,260.2c0.5,0,1,0,1.6,0c0.2,0,0.4,0,0.6,0c0.3,0,0.7,0,1,0c29.3-0.5,53-10.8,70.5-30.5
c38.5-43.4,32.1-117.8,31.4-124.9c-2.5-53.3-27.7-78.8-48.5-90.7C280.8,5.2,262.7,0.4,242.5,0h-0.7c-0.1,0-0.3,0-0.4,0h-0.6
c-11.1,0-32.9,1.8-53.8,13.7c-21,11.9-46.6,37.4-49.1,91.1c-0.7,7.1-7.1,81.5,31.4,124.9C186.7,249.4,210.4,259.7,239.7,260.2z
M164.6,107.3c0-0.3,0.1-0.6,0.1-0.8c3.3-71.7,54.2-79.4,76-79.4h0.4c0.2,0,0.5,0,0.8,0c27,0.6,72.9,11.6,76,79.4
c0,0.3,0,0.6,0.1,0.8c0.1,0.7,7.1,68.7-24.7,104.5c-12.6,14.2-29.4,21.2-51.5,21.4c-0.2,0-0.3,0-0.5,0l0,0c-0.2,0-0.3,0-0.5,0
c-22-0.2-38.9-7.2-51.4-21.4C157.7,176.2,164.5,107.9,164.6,107.3z"/>
<path d="M446.8,383.6c0-0.1,0-0.2,0-0.3c0-0.8-0.1-1.6-0.1-2.5c-0.6-19.8-1.9-66.1-45.3-80.9c-0.3-0.1-0.7-0.2-1-0.3
c-45.1-11.5-82.6-37.5-83-37.8c-6.1-4.3-14.5-2.8-18.8,3.3c-4.3,6.1-2.8,14.5,3.3,18.8c1.7,1.2,41.5,28.9,91.3,41.7
c23.3,8.3,25.9,33.2,26.6,56c0,0.9,0,1.7,0.1,2.5c0.1,9-0.5,22.9-2.1,30.9c-16.2,9.2-79.7,41-176.3,41
c-96.2,0-160.1-31.9-176.4-41.1c-1.6-8-2.3-21.9-2.1-30.9c0-0.8,0.1-1.6,0.1-2.5c0.7-22.8,3.3-47.7,26.6-56
c49.8-12.8,89.6-40.6,91.3-41.7c6.1-4.3,7.6-12.7,3.3-18.8c-4.3-6.1-12.7-7.6-18.8-3.3c-0.4,0.3-37.7,26.3-83,37.8
c-0.4,0.1-0.7,0.2-1,0.3c-43.4,14.9-44.7,61.2-45.3,80.9c0,0.9,0,1.7-0.1,2.5c0,0.1,0,0.2,0,0.3c-0.1,5.2-0.2,31.9,5.1,45.3
c1,2.6,2.8,4.8,5.2,6.3c3,2,74.9,47.8,195.2,47.8s192.2-45.9,195.2-47.8c2.3-1.5,4.2-3.7,5.2-6.3
C447,415.5,446.9,388.8,446.8,383.6z"/>
</symbol>

<symbol id="icon-location" viewBox="0 0 477 477">
<path d="M238.4,0C133,0,47.2,85.8,47.2,191.2c0,12,1.1,24.1,3.4,35.9c0.1,0.7,0.5,2.8,1.3,6.4c2.9,12.9,7.2,25.6,12.8,37.7
c20.6,48.5,65.9,123,165.3,202.8c2.5,2,5.5,3,8.5,3s6-1,8.5-3c99.3-79.8,144.7-154.3,165.3-202.8c5.6-12.1,9.9-24.7,12.8-37.7
c0.8-3.6,1.2-5.7,1.3-6.4c2.2-11.8,3.4-23.9,3.4-35.9C429.6,85.8,343.8,0,238.4,0z M399.6,222.4c0,0.2-0.1,0.4-0.1,0.6
c-0.1,0.5-0.4,2-0.9,4.3c0,0.1,0,0.1,0,0.2c-2.5,11.2-6.2,22.1-11.1,32.6c-0.1,0.1-0.1,0.3-0.2,0.4
c-18.7,44.3-59.7,111.9-148.9,185.6c-89.2-73.7-130.2-141.3-148.9-185.6c-0.1-0.1-0.1-0.3-0.2-0.4c-4.8-10.4-8.5-21.4-11.1-32.6
c0-0.1,0-0.1,0-0.2c-0.6-2.3-0.8-3.8-0.9-4.3c0-0.2-0.1-0.4-0.1-0.7c-2-10.3-3-20.7-3-31.2c0-90.5,73.7-164.2,164.2-164.2
s164.2,73.7,164.2,164.2C402.6,201.7,401.6,212.2,399.6,222.4z"/>
<path d="M238.4,71.9c-66.9,0-121.4,54.5-121.4,121.4s54.5,121.4,121.4,121.4s121.4-54.5,121.4-121.4S305.3,71.9,238.4,71.9z
M238.4,287.7c-52.1,0-94.4-42.4-94.4-94.4s42.4-94.4,94.4-94.4s94.4,42.4,94.4,94.4S290.5,287.7,238.4,287.7z"/>
</symbol>

<symbol id="icon-clock" viewBox="0 0 41.301 41.301">
<path d="M20.642,0c5.698,0,10.857,2.317,14.602,6.047c3.73,3.746,6.047,8.905,6.047,14.603
c0,5.698-2.317,10.857-6.047,14.603c-3.746,3.73-8.904,6.047-14.602,6.047S9.786,38.983,6.056,35.253
C2.31,31.507,0.008,26.349,0.008,20.65c0-5.698,2.301-10.857,6.047-14.603C9.786,2.317,14.944,0,20.642,0L20.642,0z M31.166,19.523
c0.619,0,1.111,0.508,1.111,1.127c0,0.619-0.492,1.127-1.111,1.127H20.674h-0.032c-0.413,0-0.778-0.238-0.968-0.571l-0.016-0.016
l0,0l-0.016-0.032l0,0v-0.016l0,0l-0.016-0.032l0,0l-0.016-0.032l0,0v-0.016l0,0l-0.016-0.032l0,0l-0.016-0.016l0,0v-0.032l0,0
l-0.016-0.032l0,0v-0.016l0,0l-0.016-0.032l0,0v-0.032l0,0v-0.016v-0.016l-0.016-0.016l0,0v-0.032l0,0v-0.032l0,0V20.73l0,0v-0.016
l0,0v-0.032l0,0V20.65l0,0V7.206c0-0.619,0.492-1.111,1.111-1.111c0.619,0,1.127,0.492,1.127,1.111v12.317H31.166z M33.657,7.635
c-3.333-3.333-7.936-5.381-13.015-5.381S10.96,4.301,7.627,7.635C4.31,10.968,2.246,15.571,2.246,20.65
c0,5.079,2.063,9.682,5.381,13.016c3.333,3.333,7.936,5.381,13.015,5.381s9.682-2.048,13.015-5.381
c3.333-3.333,5.397-7.936,5.397-13.016C39.054,15.571,36.991,10.968,33.657,7.635L33.657,7.635z"/>
</symbol>

<symbol id="icon-youtube" viewBox="0 0 310 310">
<path d="M297.917,64.645c-11.19-13.302-31.85-18.728-71.306-18.728H83.386c-40.359,0-61.369,5.776-72.517,19.938
C0,79.663,0,100.008,0,128.166v53.669c0,54.551,12.896,82.248,83.386,82.248h143.226c34.216,0,53.176-4.788,65.442-16.527
C304.633,235.518,310,215.863,310,181.835v-53.669C310,98.471,309.159,78.006,297.917,64.645z M199.021,162.41l-65.038,33.991
c-1.454,0.76-3.044,1.137-4.632,1.137c-1.798,0-3.592-0.484-5.181-1.446c-2.992-1.813-4.819-5.056-4.819-8.554v-67.764
c0-3.492,1.822-6.732,4.808-8.546c2.987-1.814,6.702-1.938,9.801-0.328l65.038,33.772c3.309,1.718,5.387,5.134,5.392,8.861
C204.394,157.263,202.325,160.684,199.021,162.41z"/>
</symbol>

<symbol id="icon-facebook" viewBox="0 0 310 310">
<path d="M81.703,165.106h33.981V305c0,2.762,2.238,5,5,5h57.616c2.762,0,5-2.238,5-5V165.765h39.064
c2.54,0,4.677-1.906,4.967-4.429l5.933-51.502c0.163-1.417-0.286-2.836-1.234-3.899c-0.949-1.064-2.307-1.673-3.732-1.673h-44.996
V71.978c0-9.732,5.24-14.667,15.576-14.667c1.473,0,29.42,0,29.42,0c2.762,0,5-2.239,5-5V5.037c0-2.762-2.238-5-5-5h-40.545
C187.467,0.023,186.832,0,185.896,0c-7.035,0-31.488,1.381-50.804,19.151c-21.402,19.692-18.427,43.27-17.716,47.358v37.752H81.703
c-2.762,0-5,2.238-5,5v50.844C76.703,162.867,78.941,165.106,81.703,165.106z"/>
</symbol>

<symbol id="icon-close" viewBox="0 0 52 52">
<path d="M26,0C11.664,0,0,11.663,0,26s11.664,26,26,26s26-11.663,26-26S40.336,0,26,0z M26,50C12.767,50,2,39.233,2,26
S12.767,2,26,2s24,10.767,24,24S39.233,50,26,50z"/>
<path d="M35.707,16.293c-0.391-0.391-1.023-0.391-1.414,0L26,24.586l-8.293-8.293c-0.391-0.391-1.023-0.391-1.414,0
s-0.391,1.023,0,1.414L24.586,26l-8.293,8.293c-0.391,0.391-0.391,1.023,0,1.414C16.488,35.902,16.744,36,17,36
s0.512-0.098,0.707-0.293L26,27.414l8.293,8.293C34.488,35.902,34.744,36,35,36s0.512-0.098,0.707-0.293
c0.391-0.391,0.391-1.023,0-1.414L27.414,26l8.293-8.293C36.098,17.316,36.098,16.684,35.707,16.293z"/>	
</symbol>

<symbol id="icon-strelka1-1" viewBox="0 0 800 2500">
<path d="M5 56c-10,-17 -4,-40 13,-51 18,-10 41,-4 52,13l730 1232 -730 1232c-11,17 -34,23 -52,13 -17,-11 -23,-34 -13,-51l708 -1194 -708 -1194z"/>
</symbol>

<symbol id="icon-strelka1-2" viewBox="0 0 800 2500">
<path d="M795 56c10,-17 4,-40 -13,-51 -18,-10 -41,-4 -52,13l-730 1232 730 1232c11,17 34,23 52,13 17,-11 23,-34 13,-51l-708 -1194 708 -1194z"/>
</symbol>

<symbol id="icon-arrow" viewBox="0 0 32.635 32.635">
<path d="M30.171,16.66H0.888C0.397,16.66,0,16.263,0,15.773c0-0.49,0.397-0.888,0.888-0.888h29.283
c0.49,0,0.888,0.397,0.888,0.888C31.059,16.263,30.661,16.66,30.171,16.66z"/>
<path d="M15.529,31.302c-0.232,0-0.464-0.091-0.638-0.271c-0.341-0.352-0.332-0.914,0.021-1.255
l14.471-14.004L14.912,1.768c-0.352-0.34-0.361-0.902-0.021-1.255c0.342-0.352,0.902-0.36,1.255-0.02l15.13,14.642
c0.173,0.167,0.27,0.397,0.27,0.638c0,0.24-0.097,0.47-0.27,0.637l-15.13,14.643C15.974,31.219,15.751,31.302,15.529,31.302z"/>
</symbol>

<symbol id="icon-uparrow" viewBox="0 0 490.4 490.4">
<path d="M245.2,490.4c135.2,0,245.2-110,245.2-245.2S380.4,0,245.2,0S0,110,0,245.2S110,490.4,245.2,490.4z M245.2,24.5
c121.7,0,220.7,99,220.7,220.7s-99,220.7-220.7,220.7s-220.7-99-220.7-220.7S123.5,24.5,245.2,24.5z"/>
<path d="M185,216.2l48-48v183.4c0,6.8,5.5,12.3,12.3,12.3c6.8,0,12.3-5.5,12.3-12.3V168.3l48,48c2.4,2.4,5.5,3.6,8.7,3.6
s6.3-1.2,8.7-3.6c4.8-4.8,4.8-12.5,0-17.3l-68.9-68.9c-4.8-4.8-12.5-4.8-17.3,0L167.9,199c-4.8,4.8-4.8,12.5,0,17.3
C172.4,221,180.2,221,185,216.2z"/>
</symbol>

<symbol id="icon-arrowdown" viewBox="0 0 487 487">
<path d="M392.15,324.9c-5.3-5.3-13.8-5.3-19.1,0l-116,116V13.5c0-7.5-6-13.5-13.5-13.5s-13.5,6-13.5,13.5v427.4l-116-116
c-5.3-5.3-13.8-5.3-19.1,0c-5.3,5.3-5.3,13.8,0,19.1l139,139c2.5,2.5,6,4,9.5,4s7-1.4,9.5-4l139-139
C397.35,338.8,397.35,330.2,392.15,324.9z"/>
</symbol>

<symbol id="icon-arrow2" viewBox="0 0 477.175 477.175">
<path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5
c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z "/>
</symbol>

<symbol id="icon-checkbox2" viewBox="0 0 24 24">
<path d="M4 1h16q1.242 0 2.121 0.879t0.879 2.121v16q0 1.242-0.879 2.121t-2.121 0.879h-16q-1.242 0-2.121-0.879t-0.879-2.121v-16q0-1.242 0.879-2.121t2.121-0.879zM20 3h-16q-0.414 0-0.707 0.293t-0.293 0.707v16q0 0.414 0.293 0.707t0.707 0.293h16q0.414 0 0.707-0.293t0.293-0.707v-16q0-0.414-0.293-0.707t-0.707-0.293z"/>
<path fill="#f25f9f" d="M16 8.523q0.406 0 0.703 0.293t0.297 0.707-0.297 0.711l-4.945 4.945q-0.289 0.289-0.703 0.289-0.422 0-0.711-0.289l-2.828-2.828q-0.289-0.289-0.289-0.711 0-0.414 0.293-0.707t0.707-0.293q0.406 0 0.703 0.297l2.117 2.125 4.242-4.242q0.297-0.297 0.711-0.297z"/>
</symbol>
	
<symbol id="icon-checkbox" viewBox="0 0 24 24">
<path d="M4 1h16q1.242 0 2.121 0.879t0.879 2.121v16q0 1.242-0.879 2.121t-2.121 0.879h-16q-1.242 0-2.121-0.879t-0.879-2.121v-16q0-1.242 0.879-2.121t2.121-0.879zM20 3h-16q-0.414 0-0.707 0.293t-0.293 0.707v16q0 0.414 0.293 0.707t0.707 0.293h16q0.414 0 0.707-0.293t0.293-0.707v-16q0-0.414-0.293-0.707t-0.707-0.293z"/>
</symbol>

</svg>';$c['asInputTpl']='<form action="[~30~]" method="get">
	<div class="setdefaultvalue defaultvalue uk-flex uk-position-relative">
		<input class="search__input" id="input_search" name="search" type="text" placeholder="Поиск по сайту...">
		<!--label class="search__label" for="inp_search">Поиск по сайту...</label-->
		<button class="search__btn" aria-label="Найти">Найти</button>
	</div>
</form>';$c['asGrpResultTpl']='<div id="[+as.grpResultId+]" class="ajaxSearch_grpResult">
[+as.listResults+]
[+as.footerGrpResult+]
</div>';$c['asResultsTpl']='[+as.noResults:is=`1`:then=`
  <div class="[+as.noResultClass+]">
    [+as.noResultText+]
  </div>
`:else=`
<p class="ajaxSearch_resultsInfos">[+as.resultsFoundText+]<span class="ajaxSearch_resultsDisplayed">[+as.resultsDisplayedText+]</span></p>
  [+as.listGrpResults+]
`+]';$c['asResultTpl']='<div class="[+as.resultClass+]">
  <a class="[+as.resultLinkClass+]" href="[+as.resultLink+]" title="[+as.longtitle+]">[+as.pagetitle+]</a>
</div>';$c['loader']='<div class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>';$c['seo-mark']='<div style="display:none" itemscope="" itemtype="http://schema.org/LocalBusiness">
        <a itemprop="url" href="" title="ООО «Центр оборудования »">
        <span itemprop="name">ООО «Центр оборудования »</span>
    </a>
        <div itemprop="telephone">+7</div>
		<div itemprop="telephone">+7 </div>
	
        <div itemprop="email"></div>
        <data itemprop="openingHours" value="Mo-Fr 09:00-18:00">пн-пт 09:00 — 18:00</data>
        <img itemprop="image" src="img/logo.png" alt="ООО «Центр оборудования »">
        <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
            <span itemprop="addressLocality"></span>,
            <span itemprop="streetAddress"></span>
        </div>
    </div>';$c['scripts Копия']='<script src="js/jquery.3.3.1.js"></script>
<script>
	[!Compress?&print=`true` &files=`js/: javascript.js, all-js.js, formochki.js, popup.js, shop.js` &tofile=`js/all-compress.js`!]
</script>

<link rel=\'stylesheet\' href=\'css/jquery.mmenu.all.css\' />


[[! 
<script src="js/shop.js"></script>
<script src="js/javascript.js"></script>
<script src="js/all-js.js"></script>

<script src="js/formochki.js"></script>
<script src="js/popup.js"></script> ]]


[[!
<script>//<!-- search popup -->

    $(document).ready(function () {
        $(".search_button").on("click", function (e) {
            e.preventDefault();
            $(\'html,body\').animate({
                
            },);
            $(".search_pop-up").slideToggle();
        });
    });

//<!-- /search popup  --></script> ]]




<!--  scrollup  -->
<a href="#" class="scrollup">Наверх</a>
<!--  /scrollup  -->

[[! <style>
.searchBtn {
	float: left;
	cursor: pointer;
	width: 44px;
	height: 38px;
	line-height: 15px;
	background-image: url(search_ico.PNG);
	background-position: left 0;
	background-repeat: no-repeat;
}

.searchProgress {
	background-image: url(4.gif);
	background-position: left 0;
	float: left;
	cursor: pointer;
	width: 44px;
	height: 38px;
	line-height: 15px;
	background-repeat: no-repeat;
}

.textBox input {
	color: #999999;
	font: bold 14px arial;
	float: left;
	height: 20px;
	padding: 12px 0 0 9px;
	vertical-align: middle;
	width: 432px;
}

#content {
	text-align: center;
	text-decoration: none;
}

#content #sub_cont {
	width: 490px;
	display: none;
	height: 400px;
}

#content .no-rec {
	color: #000;
	font-family: Arial, Helvetica, sans-serif;
	font-size: 14px;
	padding: 5px;
	border-bottom: solid #669900;
	text-align: center;
	background: #CCCC66;
}

#content .each_rec {
	color: #fff;
	font-family: Arial, Helvetica, sans-serif;
	font-size: 14px;
	padding: 5px;
	border-bottom: solid #669900;
	text-align: justify;
	background: #CCCC66;
}

#content .each_rec:hover {
	background: #FFFFFF;
}

#content .each_rec a {
	color: #000;
	font-family: Arial, Helvetica, sans-serif;
	font-size: 14px;
	text-decoration: none
}

.search-background {
	display: none;
	font-size: 13px;
	font-weight: bold;
	height: 160px;
	position: absolute;
	padding-top: 100px;
	text-align: center;
	text-decoration: none;
	width: 470px;
}

#heading {
	font-family: Georgia, "Times New Roman", Times, serif;
	font-size: 56px;
	color: #CC0000;
}

search-background label {
	border: solid #66FF00 1px;
}

#paging_button ul {
	width: 600px;
	padding: 0px;
	margin: 8px;
}

#paging_button ul li {
	-moz-border-radius: 6px;
	-webkit-border-radius: 6px;
	-moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
	-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
	float: left;
	height: 20px;
	width: 20px;
	list-style-image: none;
	list-style-type: none;
	font-weight: bold;
	border: solid #CCCCCC 1px;
	margin: 3px;
	cursor: pointer;
}
</style> ]]

<script>
   jQuery(document).ready(function($) {
        function showLoader() {
            $(\'.search-background\').fadeIn(200);
        }
        function hideLoader() {
            $(\'#sub_cont\').fadeIn(1500);
            $(\'.search-background\').fadeOut(200);
        }
        ;
        $(\'#search\').keyup(function (e) {
            if (e.keyCode == 10) {
                showLoader();
                $(\'#sub_cont\').fadeIn(1500);
                $("#content #sub_cont").load("[~71~]?val=" + $("#search").val(), hideLoader());
            }
        });
        $(".searchBtn").click(function () {
            showLoader();
            $(\'#sub_cont\').fadeIn(1500);
            $("#content #sub_cont").load("[~71~]?val=" + $("#search").val(), hideLoader());
        });
    });
</script>



';$c['filterForm']='<div class="filterForm">
	<div class="filterForm-group">
		<h3>Цена</h3>
	</div>
	<div class="filterForm-group">
		<h3>Модель</h3>
		<div class="filterForm-group__item checkbox">
			<label><input type="checkbox" class="common_selector" value="InFocus"> InFocus</label>
			<label><input type="checkbox" class="common_selector" value="InFocus"> InFocus</label>
			<label><input type="checkbox" class="common_selector" value="InFocus"> InFocus</label>
		</div>
	</div>
	<div class="filterForm-group">
		<h3>Страна</h3>
		<div class="filterForm-group__item checkbox">
			<label><input type="checkbox" class="common_selector" value="InFocus"> InFocus</label>
			<label><input type="checkbox" class="common_selector" value="InFocus"> InFocus</label>
			<label><input type="checkbox" class="common_selector" value="InFocus"> InFocus</label>
		</div>
	</div>
	<div class="filterForm-group">
		<h3>Наличие</h3>
		<div class="filterForm-group__item radio">
			<label><input type="radio" name="a" class="common_selector" value="Да">Да</label>
			<label><input type="radio" name="a" class="common_selector" value="Нет">Нет</label>
		</div>
	</div>
</div>
<script>
$(document).ready(function(){

    filter_data();

    function filter_data()
    {
        $(\'.filter_data\').html(\'<div id="loading" style="" ></div>\');
        var action = \'fetch_data\';
        var minimum_price = $(\'#hidden_minimum_price\').val();
        var maximum_price = $(\'#hidden_maximum_price\').val();
        var brand = get_filter(\'brand\');
        var ram = get_filter(\'ram\');
        var storage = get_filter(\'storage\');
        $.ajax({
            url:"fetch_data.php",
            method:"POST",
            data:{action:action, minimum_price:minimum_price, maximum_price:maximum_price, brand:brand, ram:ram, storage:storage},
            success:function(data){
                $(\'.filter_data\').html(data);
            }
        });
    }

    function get_filter(class_name)
    {
        var filter = [];
        $(\'.\'+class_name+\':checked\').each(function(){
            filter.push($(this).val());
        });
        return filter;
    }

    $(\'.common_selector\').click(function(){
        filter_data();
    });

    $(\'#price_range\').slider({
        range:true,
        min:1000,
        max:65000,
        values:[1000, 65000],
        step:500,
        stop:function(event, ui)
        {
            $(\'#price_show\').html(ui.values[0] + \' - \' + ui.values[1]);
            $(\'#hidden_minimum_price\').val(ui.values[0]);
            $(\'#hidden_maximum_price\').val(ui.values[1]);
            filter_data();
        }
    });

});
</script>';$c['catalog_itemTpl']='<div class="catalog__item">
	<a href="[+link+]" class="catalog__link">
		<div class="catalog__img-pr">
			<img src="[+img_mini+]" alt="[+pagetitle+]" />
		</div>
		<div class="catalog__title-pr">[+title+]</div>
	</a>
	
	<div class="catalog__price uk-flex [[if? &is=`[+tv.old-price+]:isempty` &then=`uk-flex-center` &else=`uk-flex-around`]] uk-flex-wrap">
		[+price_f+]
		[+old_price_f+]
	</div>
	
	<div class="uk-flex shopbtns shopbtns2 catalogitemid" data-docid="[+id+]" data-price="[+price_i+]">
		[+shop_basket_button+]
		<button class="v1klik uk-flex">Купить&nbsp;в&nbsp;1&nbsp;клик</button>
	</div>
</div>';$c['catalog_itemTpl_Page']='<div class="product uk-width-1-1 uk-margin-medium-top" data-uk-grid>

	<!------------------------------------------>

	<div class="uk-width-2-5@m uk-width-1 slider_in_item " data-uk-slideshow="animation: fade; ratio: 1:1; min-height: 300; max-height: 300" >
		<ul class="uk-slideshow-items">
			[[ParseMultiImages? &id=`[+id+]` &t=`1`]]
		</ul>

		<div class="uk-position-relative uk-margin" data-uk-slider>
			<ul class="uk-thumbnav uk-flex-nowrap uk-flex-center uk-slider-items uk-child-width-1-4@m uk-child-width-1-6@s uk-child-width-1-3">
				[[ParseMultiImages? &id=`[+id+]` &t=`2`]]
			</ul> 
			<a class="uk-position-center-left uk-hidden-hover" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
			<a class="uk-position-center-right uk-hidden-hover" href="#" uk-slidenav-next uk-slider-item="next"></a>
		</div>
	</div>	

	<div id="modal-center" class="uk-flex-top" uk-modal>
		<div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">
			<div class="padding"></div>
			<button class="uk-modal-close-default" type="button" uk-close></button>
			<div class="slider_in_item" data-uk-slideshow="animation: fade; ratio: 1:1;">
				<ul class="uk-slideshow-items uk-slideshow-items__popup"> 
					[[ParseMultiImages? &id=`[+id+]` &t=`3`]]
				</ul>

				<div class="uk-position-relative" data-uk-slider>
					<ul class="uk-thumbnav uk-flex-nowrap uk-flex-center uk-slider-items uk-child-width-1-4@m uk-child-width-1-6@s uk-child-width-1-3">
						[[ParseMultiImages? &id=`[+id+]` &t=`2`]]
					</ul> 
					<a class="uk-position-center-left uk-hidden-hover" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
					<a class="uk-position-center-right uk-hidden-hover" href="#" uk-slidenav-next uk-slider-item="next"></a>
				</div>

			</div>		

		</div>
	</div>


	<!------------------------------------------>
	<div class="product__right uk-width-3-5@m uk-width-1-1">

		<div class="uk-child-width-auto@m uk-child-width-1-2 uk-flex-top" data-uk-grid>
			<div>	
				<div class="product__price"><span>Цена:</span> <b>[+price+]</b>&nbsp;<span class="ruble">&#8381;</span></div>

				[+price_text_f+]
				
				<div class="uk-flex shopbtns shopbtns1 catalogitemid" data-uk-grid data-docid="[+id+]" data-price="[+price_i+]">
					[+shop_basket_button+]
					<button class="v1klik uk-flex">Купить&nbsp;в&nbsp;1&nbsp;клик</button>
				</div>

				[+availability_f+]

				[+brand_f+]

				[+model_f+]

				[+country_f+]

				[+manufacturer_code_f+]
			</div>

			<div>[+article_f+]</div>
		</div>



		<div class="product__har uk-margin">
			[+specifications_list_f+]
			
			<div class="product__important uk-margin-small-top uk-width-2-3@xl uk-width-1-1">Внимание! Информация о товарах, размещенная на сайте, не является публичной офертой, определяемой положениями Части 2 Статьи 437 Гражданского кодекса Российской Федерации. Производители вправе вносить изменения в технические характеристики, внешний вид и комплектацию товаров без предварительного уведомления. Уточняйте характеристики и цены у наших менеджеров перед оформлением заказа.
			</div>
		</div>

	</div>


	<div>
		<ul class="uk-subnav uk-subnav-pill" data-uk-tab="animation: uk-animation-fade">
			<li class="product__tab uk-padding-remove"><a href="#" class="product__tab-link">Описание</a></li>
			<li class="product__tab uk-padding-remove"><a href="#" class="product__tab-link">Документы</a></li>
			<li class="product__tab uk-padding-remove"><a href="#" class="product__tab-link">Видео</a></li>
		</ul>

		<ul class="uk-switcher uk-margin">
			<li>
				<div class="product__inform">[+content+]</div>
			</li>
			<li>
				<div class="product__file-box">
					[[ParseMultiParams? &act=`file` &catparam=`[+tv.files+]`]] 
				</div>
			</li>
			<li>[+tv.video+]</li>
		</ul>
	</div>

</div>
';$c['tplPartnerItem']='
<li class="partner__item uk-paddind-small uk-flex uk-flex-middle uk-flex-center">
		<img src="[+tv.img+]" alt="">
</li>
';$c['catalog_itemTpl_Page_old']='<div class="cat_itm [+dl.class+]">
    <div class="ci_imgs">
        <div class="ci_img"><a data-fancybox="catitempage" href="[+tv.images+]"><img src="[+tv.images_mini+]" alt="[+pagetitle+]" /></a></div>

        <div class="ci_miniimgs">
            [+mini_images+]
        </div>
    </div>

    <div class="ci_infobox">
        <div class="ci_info">
            <div class="ci_left">
                <div class="ci_art">Арт.&nbsp;[+tv.article+]</div>

                <div class="ci_desc">[+tv.descript+]</div>
            </div>

            <div class="ci_right">
                <div class="ci_shop">
                    [+tv.discount+]
                    <div class="ci_price"><span class="price font2">[+tv.price+]</span> <span class="ruble">руб.</span></div>

                    <div class="ci_basket [+inbasket+]">
                        <button type="button" class="addtobasket font2" data-itemid="[+id+]">Добавить в корзину</button>
                        <div class="cib_ok">[[ico?&n=`galochka`]]&nbsp; <a class="as2" href="[~45~]">В корзине</a></div>
                        <div class="svgloading"></div>
                    </div>
                </div>
            </div>
            <br>
        </div><!--.ci_info-->

        [+cf.prms+]

        <div class="cip_content">
            <h2>Описание</h2>

            [*content*]
        </div>
    </div><!--.ci_infobox-->
    <br>
</div><!--.cat_itm-->

';$c['evoSearch']='<div class="search_title"><a href="[+url+]">[+url+]</a></div>
<div class="search_extract">[+extract+]</div>

';$s=&$this->snippetCache;$s['eFilter']='//импортировать общие параметры из модуля eLists
 
 //устанавливает нужные плейсхолдеры для вывода формы и результатов поиска
 //вызов [!eFilter!]
 //в результате формируется плейсхолдер [+eFilter_form+] для показа формы поиска
 //а также [+eFilter_ids+] - список подходящих id для вставки в DocLister и ряд других
 //
 // дополнительные параметры вызова
 // &removeDisabled=`1` - удалять варианты с нулевым результатом из списка возможных (по умолчанию - 0 - варианты в списке остаются с атрибутом disabled)
 // &ajax=`1` - режим ajax - подгрузка формы и результатов поиска после сабмита формы поиска без перезагрузки страницы (по умолчанию - отключен)
 //
 //это центральный сниппет для фильтрации
 //работает совместно с DocLister, multiTV и DocInfo - они должны быть установлены

require MODX_BASE_PATH . \'assets/snippets/eFilter/snippet.eFilter.php\';

//print\'<!--\';print_r($eFltr->filter_values_full[100]);print\'-->\';//DELTA
//print\'<!--\';print_r($eFltr->filter_values_full[101]);print\'-->\';//DELTA
//print\'<!--\';print_r($eFltr->content_ids);print\'-->\';//DELTA';$s['eFilterProps']='{"param_tv_id":"23","product_templates_id":"4","param_cat_id":"19,11","tovarChunkName":"catalog_itemTpl","pattern_folder":"assets\\/images\\/pattern\\/"}';$s['eFilterResult']='//импортировать общие параметры из модуля eLists
 //использует для работы сниппет DocLister и выводит список товаров, при этом заменяя плейсхолдер [+params+] на список параметров товара, отмеченных для вывода в список
 //использует общие параметры из модуля eLists, также параметры $paramRow и $paramOuter для вывода параметров товара
 //доп.информация черпается из плейсхолдеров, установленных сниппетом [!eFilter!] который должен вызываться раньше
 //пример вызова [!eFilterResult? &tpl=`tovarDL` &addWhereList=`c.template=9` &parents=`[*id*]` &depth=`3` &paginate=`pages` &display=`15` &tvList=`image,price`!] [+pages+]
 //все параметры аналогичны параметрам вызова DocLister + доп.параметры $paramRow и $paramOuter для вывода параметров товара

 
//получаем из плейсхолдера список документов для documents
$ids = $modx->getPlaceholder(\'eFilter_ids\');

//фиксим DocLister - при пустом списке documents и пустом фильтре - отдавать все
//при пустом списке documents и НЕ пустом фильтре - ничего не отдавать
if(empty($ids) && (isset($_GET))) {
    $ids = $modx->config[\'site_start\'];
    $f = $_GET;
    foreach($f as $k => $val){
        if (preg_match("/^f(\\d+)/i", $k, $matches)) {
            if ($val != \'0\' && $val != \'\') {$ids = \'4294967295\';}
        }
    }
    if ($ids == $modx->config[\'site_start\']) {$ids = \'\';}    
}
if(empty($ids) && (isset($_GET[\'f\']))) {
    $ids = $modx->config[\'site_start\'];
    $f = $_GET[\'f\'];
    foreach($f as $k=>$v){
        foreach ($v as $val) {
            if ($val != \'0\' && $val != \'\') {$ids = \'4294967295\';}
        }
    }
    if ($ids == $modx->config[\'site_start\']) {$ids = \'\';}    
}

//получаем из плейсхолдера список ТВ для вывода в список
$tv_list = $modx->getPlaceholder(\'eFilter_tv_list\');
//..и их имена из кэпшн
$tv_names = $modx->getPlaceholder(\'eFilter_tv_names\');

// удаляеи из списка общие исключенные ТВ (в настройках модуля) -
// (например цена и т.п., которая выводится отдельно и есть у всех
if (isset($exclude_tvs_from_list) && $exclude_tvs_from_list != \'\') {
    $exclude_tvs = explode(\',\', $exclude_tvs_from_list);
    foreach($exclude_tvs as $k => $v){
        if (isset($tv_names[$v])) {
            unset($tv_names[$v]);
        }
        if (isset($tv_list[$v])) {
            unset($tv_list[$v]);
        }
    }
}
///////



//заменяем плейсхолдер [+params+] в чанке вывода товаров 
//на нужный вывод параметров товаров
//шаблоны вывода параметра в списке по умолчанию
$paramRow = isset($paramRow) ? $paramRow : \'<div class="eFilter_list_param eFilter_list_param[+param_id+]"><span class="eFilter_list_title">[+param_title+]: </span><span class="eFilter_list_value eFilter_list_value[+param_id+]">[+param_value+]</span></div>\';
$paramOuter = isset($paramOuter) ? $paramOuter : \'<div class="eFilter_list_params">[+wrapper+]</div>\';


$tovar_params_tpl = \'\';
foreach($tv_names as $tv_id=>$tv_name) {
    $param_value = \'[+tv.\' . $tv_list[$tv_id] . \'+]\';
    $tovar_params_tpl .= str_replace(
        array(\'[+param_title+]\', \'[+param_value+]\', \'[+param_id+]\'),
        array($tv_name, $param_value, $tv_id),
        $paramRow
    );
}

$tovar_params_wrapper = str_replace(
    array(\'[+wrapper+]\'),
    array($tovar_params_tpl),
    $paramOuter
);

$tovarChunkName = isset($params[\'tpl\']) && !empty($params[\'tpl\']) ? $params[\'tpl\'] : $tovarChunkName;
$tovarChunk = $modx->getChunk($tovarChunkName);
$tovarChunk = \'@CODE:\' . str_replace(\'[+params+]\', $tovar_params_wrapper, $tovarChunk);
$params[\'tpl\'] = $tovarChunk;
///////конец замены чанка вывода товаров


$out = \'\';
$pid = isset($pid) ? $pid : $modx->documentIdentifier;
$params[\'ownerTPL\'] = isset($ownerTPL) ? $ownerTPL :\'@CODE: <div id="eFiltr_results_wrapper"><div class="eFiltr_loader"></div><div id="eFiltr_results">[+dl.wrap+][+pages+]</div></div>\';

//параметры сортировки и вывода из сессии
$docid = isset($docid) ? (int)$docid : $modx->documentIdentifier;
$display = isset($_SESSION[\'sortDisplay\']) ? $modx->db->escape($_SESSION[\'sortDisplay\']) : ($params[\'display\'] ? $params[\'display\'] : \'12\');
$sortBy = isset($_SESSION[\'sortBy\']) ? $modx->db->escape($_SESSION[\'sortBy\']) : ($params[\'sortBy\'] ? $params[\'sortBy\'] : \'menuindex\');
$sortOrder = isset($_SESSION[\'sortOrder\']) ? $modx->db->escape($_SESSION[\'sortOrder\']) : ($params[\'sortOrder\'] ? $params[\'sortOrder\'] : \'DESC\');
$params[\'orderBy\'] = $sortBy . \' \' . $sortOrder;
$params[\'display\'] = $display;
if ($display == \'all\') unset($params[\'display\']);

if (!empty($ids)) {
    $params[\'documents\'] = $ids;
    unset($params[\'parents\']);
    unset($params[\'depth\']);
} else {
    $params[\'parents\'] = $pid;
}
$params[\'addWhereList\'] = \'c.template IN(\' . $product_templates_id . \')\';
if (!empty($tv_list)) {
    $params[\'tvList\'] = $params[\'tvList\'] == \'\' ? implode(\',\', $tv_list) : $params[\'tvList\'] . \',\' . implode(\',\', $tv_list);
    $params[\'renderTV\'] = $params[\'renderTV\'] == \'\' ? implode(\',\', $tv_list) : $params[\'renderTV\'] . \',\' . implode(\',\', $tv_list);
}
$params[\'tvSortType\'] = \'UNSIGNED\';
if (!empty($params)) {
    $out .= $modx->runSnippet("DocLister", $params);
}
//Найдено [+count+], показано с [+eFRes_from+] по [+eFRes_to+]
$DL_id = isset($params[\'id\']) && !empty($params[\'id\']) ? $params[\'id\'] . \'.\' : \'\';
if ($count == \'0\') { 
    $from = $to = 0;
} else {
    $display = $modx->getPlaceholder($DL_id . \'display\');
    $current = $modx->getPlaceholder($DL_id . \'current\');
    $from = ($current - 1) * $params[\'display\'] + 1;
    $to = $from - 1 + $display;
}
$modx->setPlaceholder("eFRes_from", $from);
$modx->setPlaceholder("eFRes_to", $to);

return $out;';$s['eFilterResultProps']='{"param_tv_id":"23","product_templates_id":"4","param_cat_id":"19,11","tovarChunkName":"catalog_itemTpl","pattern_folder":"assets\\/images\\/pattern\\/"}';$s['multiParams']='//импортировать общие параметры из модуля eLists
 
 //служебный сниппет для формирования возможных значений из списков из модуля, дерева либо нужных категорий TV

 // использование
 // если вы храните списки возможных значений в модуле eLists, то просто скопируйте соответствующую строку в поле "возможные значения" нужного TV 
 // (тип выставляете который требуется - селект, чекбоксы, радио и т.п.)
 // @EVAL return $modx->runSnippet("multiParams", array("parent"=>"2")); - выглядит это примерно так в модуле
 // где 2 - это id родителя нужного списка в отдельной таблице (он формируется автоматом)
 // 
 // если вам не нужно первое пустое значение в tv (например, у вас тип ввода - чекбокс- вызывайте multiParams с дополнительным параметром "firstEmpty" => "0"
 //
 // если же вы предпочитаете хранить списки возможных значений TV в дереве, то добавляйте к вызову в поле "возможные значения" дополнительный параметр \'action\'=>\'getParamsFromTree\'
 // т.е. итоговый вызов в поле "возможные значения" для TV будет выглядеть так
 // @EVAL return $modx->runSnippet("multiParams", array("parent"=>"25", "action"=>"getParamsFromTree"));
 // где 25 - это id ресурса-родителя нужного списка в дереве, его подставляем самостоятельно
 // 
 // @EVAL return $modx->runSnippet("multiParams", array("field"=>"template", "value"=>"15", "action"=>"getParamsFromTree"));
 // позволяет в выпадающий список вывести все ресурсы с template=15 (для фильтрации можно использовать любое поле из таблицы site_content
 //
 // @EVAL return $modx->runSnippet("multiParams", array("field"=>"description","value"=>"58", "action"=>"getParamsFromTree", "order" => "menuindex ASC", "firstEmpty" => "0"));
 // выбираем в выпадающий список все ресурсы у которых в поле description значение 58, сортируем по menuindex с возрастанием, первый пустой не показываем (важно для вывода в виде чекбоксов)
 // сортировка по умолчанию - сначала по pagetitle по возрастанию, потом по menuindex по возрастанию
 //
 
$out = \'\';
$firstEmpty = isset($firstEmpty) && (int)$firstEmpty == 0 ? false : true;
$order = isset($order) && !empty($order) ? $order : "pagetitle ASC, menuindex ASC";
if ($firstEmpty) {
    $out .= \'||\';
}
switch ($action){
    case \'getParamsToMultiTV\' :
        $tmp = array_merge(array_map(\'trim\', explode(\',\', $param_cat_id)), array_map(\'trim\', explode(\',\', $param_cat_id_common)));
        $tmp = array_diff($tmp, array(\'\'));
        $sql = "SELECT `id`,`caption` FROM " . $modx->getFullTableName(\'site_tmplvars\') . " WHERE `category` IN (" . implode(\',\', $tmp) . ") ORDER BY `rank` ASC, `caption` ASC";
        $q = $modx->db->query($sql);
        while($row = $modx->db->getRow($q)){
            $out .= $row[\'caption\'] . \'==\' . $row[\'id\'] . \'||\';
        }
        break;
    
    case \'getParamsFromTree\' :
        if (isset($field) && isset($value)) {
            $sql = "SELECT pagetitle, id FROM " . $modx->getFullTableName(\'site_content\') . " WHERE `" . $field . "`=\'" . $value . "\' ORDER BY " . $order;
        } else {
            $sql = "SELECT pagetitle, id FROM " . $modx->getFullTableName(\'site_content\') . " WHERE parent IN(" . $parent . ") ORDER BY " . $order;
        }
        $q = $modx->db->query($sql);
        while ($row = $modx->db->getRow($q)) {
            //в выпадающем списке админки показываем вместе с id ресурса
            $out .= $row[\'pagetitle\'] . (strpos($_SERVER[\'REQUEST_URI\'], MGR_DIR) !== FALSE ? \' (\' . $row[\'id\'] . \')\' : \'\') . \'==\' . $row[\'id\'] . \'||\';
        }
        break;

    case \'showParamsFromTree\':
        $ids = isset($params[\'ids\']) ? $params[\'ids\'] : \'\';
        $no_href = isset($nohref) ? true : false;
        $arr = array();
        if ($ids != \'\') {
            $ids = str_replace(\'||\', \',\', $ids);
            $q = $modx->db->query("SELECT id,pagetitle FROM " . $modx->getFullTableName("site_content") . " WHERE id IN (" . $ids . ") AND published=1 AND deleted=0");
            while ($row = $modx->db->getRow($q)) {
                if (!$no_href) {
                    $arr[] = \'<a href="\' . $modx->makeUrl($row[\'id\']) . \'">\' . $row[\'pagetitle\'] . \'</a>\';
                } else {
                    $arr[] = $row[\'pagetitle\'];
                }
            }
        }
        $out = implode(\', \', $arr) . \'  \';
        break;
    
    default:
        $sql = "SELECT title, id FROM " . $modx->getFullTableName(\'list_value_table\') . " WHERE parent={$parent} ORDER BY sort ASC, title ASC";
        $q = $modx->db->query($sql);
        while ($row = $modx->db->getRow($q)) {
            $out .= $row[\'title\'] . \'||\';
        }
        break;
}
$out = substr($out, 0, -2);
return $out;';$s['multiParamsProps']='{"param_tv_id":"23","product_templates_id":"4","param_cat_id":"19,11","tovarChunkName":"catalog_itemTpl","pattern_folder":"assets\\/images\\/pattern\\/"}';$s['tovarParams']='// импортировать общие параметры из модуля eLists
// предназначен для вывода параметров товара в нужном месте шаблона товара
// пример вызова [[tovarParams]] - в нужном месте шаблона "Товар"
// доп.параметры - большинство импортируется из модуля, для вывода списка параметров $paramRow и $paramOuter


//массив id тв, разрешенных для данного типа товаров в конфиге родителя
$allowedParams = array();

//заменяем плейсхолдер [+params+] в чанке вывода товаров 
//на нужный вывод параметров товаров
//шаблоны вывода параметра в списке по умолчанию
$paramRow = isset($paramRow) ? $paramRow : \'<div class="eFilter_list_param eFilter_list_param[+param_id+]"><span class="eFilter_list_title">[+param_title+]: </span><span class="eFilter_list_value eFilter_list_value[+param_id+]">[+param_value+]</span></div>\';
$paramOuter = isset($paramOuter) ? $paramOuter : \'<div class="eFilter_item_params">[+wrapper+]</div>\';

$out = \'\';
$tovar_params_tpl = \'\';

include_once(MODX_BASE_PATH . \'assets/snippets/eFilter/eFilter.class.php\');
$eFltr = new eFilter($modx, $params);
$eFltr->docid = $modx->documentObject[\'parent\'];


//получаем общий список тв-параметров из категорий "параметры для товара" - $param_cat_id
$tv_list = array();
$sql = "SELECT a.`id`,a.`name`,a.`caption`,a.`elements` FROM " . $modx->getFullTableName(\'site_tmplvars\') . " as a, " . $modx->getFullTableName(\'site_tmplvar_templates\') . " as b WHERE a.`category` IN (" . $param_cat_id . ") AND `a`.`id` = `b`.`tmplvarid` AND `b`.`templateid` IN(" . $params[\'product_templates_id\'] . ")  ORDER BY b.`rank` ASC, a.`caption` ASC";

$q = $modx->db->query($sql);
while($row = $modx->db->getRow($q)){
    if (!isset($tv_list[$row[\'id\']])) {
        $tv_list[$row[\'id\']][\'name\'] = $row[\'name\'];
        $tv_list[$row[\'id\']][\'caption\'] = $row[\'caption\'];
        $tv_list[$row[\'id\']][\'elements\'] = $row[\'elements\'];
    }
}

//находим разрешенные для данного товара параметры
//сначала ищем в родителе
$allowedParams = array();
$doc = $modx->documentIdentifier;
$allowedTmp = $eFltr->getFilterParam ($eFltr->param_tv_name);

//если тут пусто, проверим первую тегованную категорию из параметра tv_category_tag
if (isset($tv_category_tag) && $tv_category_tag != \'\' && empty($allowedTmp)) {
    $q = $modx->db->getValue("SELECT value FROM " . $modx->getFullTableName(\'site_tmplvar_contentvalues\') . " WHERE tmplvarid={$tv_category_tag} AND contentid=" . $modx->documentIdentifier);
    if ($q) {
        $cats = explode(\',\', $q);
        if (isset($cats[0]) && (int)$cats[0] > 0) {
            $allowedTmp = $eFltr->getFilterParam ( $eFltr->param_tv_name, (int)$cats[0]);
        }
    }
}

//итоговый массив разрешенных для данного товара параметров
if (isset($allowedTmp[\'fieldValue\'])) {
    foreach ($allowedTmp[\'fieldValue\'] as $k=>$v) {
        $allowedParams[$v[\'param_id\']] = \'1\';
    }
}


//оставляем только разрешенные для данного товара параметры в списке
foreach ($tv_list as $k => $v) {
    if (!isset($allowedParams[$k])) {
        unset($tv_list[$k]);
    }
}

// удаляем из списка общие исключенные ТВ (в настройках модуля) -
// (например цена и т.п., которая выводится отдельно и есть у всех
if (isset($exclude_tvs_from_list) && $exclude_tvs_from_list != \'\') {
    $exclude_tvs = explode(\',\', $exclude_tvs_from_list);
    foreach($exclude_tvs as $k=>$v){
        if (isset($tv_list[$v])) {
            unset($tv_list[$v]);
        }
    }
}
///////


foreach($tv_list as $tv_id=>$v) {
    $param_title = $v[\'caption\'];
    $param_value = \'[*\' . $v[\'name\'] . \'*]\';
    $param_value = stristr($v[\'elements\'], \'getParamsFromTree\') === FALSE ? \'[*\' . $v[\'name\'] . \'*]\' : \'[[if? &is=`[*\' . $v[\'name\'] . \'*]:!empty` &then=`[[multiParams? &action=`showParamsFromTree` &ids=`[*\' . $v[\'name\'] . \'*]`]]`]]\';

    $tovar_params_tpl .= $eFltr->parseTpl(
        array(\'[+param_title+]\', \'[+param_value+]\', \'[+param_id+]\'),
        array($param_title, $param_value, $tv_id),
        $paramRow
    );
}

$out = $eFltr->parseTpl(
    array(\'[+wrapper+]\'),
    array($tovar_params_tpl),
    $paramOuter
);

return $out;';$s['tovarParamsProps']='{"param_tv_id":"23","product_templates_id":"4","param_cat_id":"19,11","tovarChunkName":"catalog_itemTpl","pattern_folder":"assets\\/images\\/pattern\\/"}';$s['summary']='return require MODX_BASE_PATH.\'assets/snippets/summary/snippet.summary.php\';';$s['FormLister']='return require MODX_BASE_PATH.\'assets/snippets/FormLister/snippet.FormLister.php\';';$s['phpthumb']='return require MODX_BASE_PATH.\'assets/snippets/phpthumb/snippet.phpthumb.php\';';$s['DLMenu']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLMenu.php\';';$s['DocInfo']='return require MODX_BASE_PATH.\'assets/snippets/docinfo/snippet.docinfo.php\';';$s['DLCrumbs']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLCrumbs.php\';';$s['DLSitemap']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLSitemap.php\';';$s['if']='return require MODX_BASE_PATH.\'assets/snippets/if/snippet.if.php\';';$s['DocLister']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DocLister.php\';';$s['Compress']='/**
 * Compress
 *
 * Компрессор CSS & JS
 *
 * @version 18.1
 * @date    25.01.2018
 *
 *
 *
 *
 */
$version= \'v18.1\';

/*
	&compress=true/false
	&files - компрессит в &tofile все указанные файлы
	&tofile - файл, в который комперссить все указанные файлы
	&print=false/true - выводить код, а не путь к файлу
	&r=false/true - принудительно пересоздает компресс-файлы
	&rvars=false/true - замена переменных
	[!Compress? &files=`css/styles.css`!]
	[!Compress? &files=`css: styles.css, catalog.css; css2: shop.css; css3/dop.css` &tofile=`css/all.compress.css`!]
*/
//-----------------------------------------------------------------
$root= rtrim(MODX_BASE_PATH, "/\\\\");

$strtr[\'.css\']= array(
);
$strtr[\'.js\']= array(
);
$pregreplace[\'.css\'][0]= array(
	"/\\/\\*(.*)\\*\\//sU"              => "",
	"/[\\s]{2,}/"                    => " ",
	"/[\\s]*([{\\}\\[\\];:])[\\s]*/"     => \'${1}\',
	"/[\\s]*([,>])[\\s]*/"            => \'${1}\',
	"/([^0-9])0px/"                 => \'${1}0\',
	"/;\\}/"                         => \'}\',
	"/\\)and\\(/"                     => \') and (\',
);
$pregreplace[\'.css\'][1]= array(
);
$pregreplace[\'.js\'][0]= array(
	"/\\/\\/(.*)$/mU"                 => "",
	"/\\/\\*(.*)\\*\\//sU"              => "",
);
$pregreplace[\'.js\'][1]= array(
	"/[\\s]{2,}/"                    => " ",
	"/[\\s]*([\\(\\){\\}\\[\\];:])[\\s]*/" => \'${1}\',
	"/[\\s]*([<,:>])[\\s]*/"          => \'${1}\',
	"/[\\s]*([=+!\\/-])[\\s]*/"        => \'${1}\',
	"/[\\s]*([?|\\*])[\\s]*/"          => \'${1}\',
);
//-----------------------------------------------------------------
if(true)
{
	if($file) $files= $file;
	$slash= (substr($files,0,1)=="/" ?false :true);
	$root .= $slash ? \'/\' : \'\';
	if($files)
	{
		$filetype= substr($files, strrpos($files,\'.\'));
		$file_to= $tofile;
		if( ! $file_to)
		{
			$slashpos= strrpos($files, \'/\');
			$file_to= $slashpos === false ? \'\' : substr($files, 0, $slashpos+1);
			$file_to .= \'_compress.\';
			$file_to .= $slashpos === false ? $files : substr($files, $slashpos+1);
		}
		$tmp1= explode(\';\', $files);
		if(is_array($tmp1) && count($tmp1))
		{
			foreach( $tmp1 AS $row1 )
			{
				$tmp2= explode(\':\', trim($row1));
				if(count($tmp2) == 1)
				{
					$filepath= trim($row1);
					if( ! file_exists($root.$filepath)) continue;
					$filesarray[]= $filepath;
					if( ! file_exists($root.$file_to) || filectime($root.$filepath)>filectime($root.$file_to) || filemtime($root.$filepath)>filemtime($root.$file_to)) $refresh= true;
				}else{
					$tmp3= explode(\',\', $tmp2[1]);
					foreach($tmp3 AS $row3)
					{
						$filepath= $tmp2[0] . trim($row3);
						if( ! file_exists($root.$filepath)) continue;
						$filesarray[]= $filepath;
						if( ! file_exists($root.$file_to) || filectime($root.$filepath)>filectime($root.$file_to) || filemtime($root.$filepath)>filemtime($root.$file_to)) $refresh= true;
					}
				}
			}
		}
	}
	if(isset($strtr[$filetype])) $strtr_type= $strtr[$filetype];
	if(isset($pregreplace[$filetype][0])) $pregreplace_type_0= $pregreplace[$filetype][0];
	if(isset($pregreplace[$filetype][1])) $pregreplace_type_1= $pregreplace[$filetype][1];
}
//-----------------------------------------------------------------
$refresh= ($refresh || ! empty($r) ?true :false);
if($refresh && is_array($filesarray) && count($filesarray))
{
	$size_before= 0;
	$file_to_handle= fopen( $root . $file_to, \'w\' );	
	if( ! $file_to_handle) return;
	if( ! $file ) fwrite( $file_to_handle, "/*{$files}*/\\n\\n" );
	foreach( $filesarray AS $filerow ) $size_before += filesize( $root . $filerow );
	foreach( $filesarray AS $filerow )
	{
		$filecontent= "";
		$file_handle= fopen( $root . $filerow, \'r\' );
		if( $file_handle )
		{
			while( ! feof( $file_handle ) ) $filecontent .= fread( $file_handle, 1024*64 );
			fclose( $file_handle );
			if( $filecontent )
			{
				if( $compress !== \'false\' )
				{
					if( is_array($pregreplace_type_0) && count($pregreplace_type_0) )
					{
						foreach( $pregreplace_type_0 AS $pattern => $replacement )
							$filecontent= preg_replace( $pattern, $replacement, $filecontent );
					}
					if( $filetype == \'.css\' ) if( $strtr_type ) $filecontent= strtr( $filecontent, $strtr_type );
					
					if( $filetype != \'.css\' )
					{
						$parts= array();
						$kovpos= $curpos= 0;
						$string_flag= false;
						while( true )
						{
							$kov1= ( $string_flag === \'2\' ? false : strpos( $filecontent, "\\"", $curpos+1 ) );
							$kov2= ( $string_flag === \'1\' ? false : strpos( $filecontent, "\'", $curpos+1 ) );
							if( $kov1 === false && $kov2 === false )
							{
								$parts[]= array( substr( $filecontent, $kovpos ).( $string_flag === \'1\' ? "\\"" : ( $string_flag === \'2\' ? "\'" : \'\' ) ), ( $string_flag ? $string_flag : false ) );
								break;
							}else{
								if( $kov1 === false ) $kov1= $kov2 + 1;
								if( $kov2 === false ) $kov2= $kov1 + 1;
								$curpos= ( $kov1 < $kov2 ? $kov1 : $kov2 );
								$ii= 1; $cc= 0;
								if( $string_flag )
								{
									while( substr( $filecontent, $curpos-$ii, 1 ) == "\\\\" )
									{
										$ii++; $cc++;
									}
								}
								$vse_eshe_text= ( $string_flag && $cc%2!=0 ? true : false );
								if( ! $string_flag || ( ! $parts[count($parts)-1][1] && ! $vse_eshe_text ) )
								{
									$parts[]= array( substr( $filecontent, $kovpos+( $string_flag ? 1 : 0 ), $curpos-($kovpos+( $string_flag ? 1 : -1 )) ),
												( $string_flag ? $string_flag : false ) );
									$string_flag= ( $string_flag ? false : ( $kov1 < $kov2 ? \'1\' : \'2\' ) );
									$kovpos= $curpos;
								}
							}
						}
						
						if( $rvars === \'true\' )
						{
							preg_match_all( "/var [a-zA-Z0-9_]+?/U", $filecontent, $matches );
							if( is_array($matches) && count($matches) )
							{
								foreach( $matches[0] AS $row )
								{
									$var= str_replace( \'var \', \'\', $row );
									$vars[ $var ]= true;
								}
								foreach( $matches[0] AS $row )
								{
									$var= str_replace( \'var \', \'\', $row );
									do{ $varnum++; }while( $vars[ \'_\'.$varnum ] );
									$pregreplace_type_1[ "/([^a-zA-Z0-9_])(". $var .")([^a-zA-Z0-9_])/U" ]= \'${1}_\'.$varnum.\'${3}\';
								}
							}
						}
						
						$filecontent= \'\';
						if( is_array($parts) && count($parts) )
						{
							foreach( $parts AS $part )
							{
								if( ! $part[1] )
								{
									if( is_array($pregreplace_type_1) && count($pregreplace_type_1) )
									{
										foreach( $pregreplace_type_1 AS $pattern => $replacement )
											$part[0]= preg_replace( $pattern, $replacement, $part[0] );
									}
									if( $strtr_type ) $part[0]= strtr( $part[0], $strtr_type );
								}
								$filecontent .= $part[0];
							}
						}
					}
				}
				fwrite( $file_to_handle, "/*{$filerow}*/\\n".$filecontent."\\n\\n" );
			}
		}
	}
	$size_after= filesize( $root . $file_to );
	fwrite( $file_to_handle, "/*Compress {$version} - ".round( $size_after * 100 / $size_before )."%".( $md5_after ? " - ".$md5_after : "" )."*/" );
	fclose( $file_to_handle );
}
//-----------------------------------------------------------------
if($print === \'true\')
{
	$filecontent= \'\';
	$file_to_handle= fopen($root .$file_to, \'r\');
	if($file_to_handle)
	{
		while( ! feof($file_to_handle)) $filecontent .= fread($file_to_handle, 1024*64);
		fclose($file_to_handle);
	}
	return $filecontent;
}else return $file_to;';$s['ImgCrop8']='/**
 * ImgCrop8
 *
 * Кроп картинок
 *
 * @version   8.0
 * @date      16.06.2017
 *
 *
 */
	
/*
	$img= assets/images/img.jpg
	$dopimg= assets/images/dopimg.jpg
	$toimg= assets/images/toimg.jpg
	
	$w= (int)156
	$h= (int)122
	$backgr= 0/1
	$fill= 0/1
	$x= center/left/right
	$y= center/top/bottom
	$bgcolor= R,G,B,A / x:y / fill:a;b;c;d|b;c;d
	$wm= 0/1
	$filter= a;b;c;d|b;c;d
	$png= 0/1
	$ellipse= max / (int)56
	$degstep= (int)5
	$dopimg_xy= x:y
	$quality= (int)80
	$fullpath
	$r= 0/1
*/
//--------------------------------------------------------------------------------------
$ipathnotphoto= \'template/img/nophoto.png\';
$ipathwatermark= \'template/img/watermark.png\';
//--------------------------------------------------------------------------------------
//
//
//
//
//
//
//
//
//--------------------------------------------------------------------------------------
$w= intval($w);
$h= intval($h);
$backgr= ($backgr===true || $backgr===\'true\' ? true : false);
$fill= ($fill===true || $fill===\'true\' ? true : false);
$x= ($x==\'right\' ? $x : \'center\');
$y= ($y==\'bottom\' ? $y : \'center\');
$bgcolor= (empty($bgcolor) ? \'255,255,255,127\' : $bgcolor);
$wm= (empty($wm) ? false : $wm);
$png= (empty($png) ? false : $png);
$filter= (empty($filter) ? -1 : $filter);
$refresh= (empty($r) ? false : true);
$ellipse= ($ellipse == \'max\' ? \'max\' : intval($ellipse));
$quality= intval($quality);
if($quality === 0) $quality= ($_GET[\'ww\']<=800 ? 60 : 80);
else $quality= ($quality<0 || $quality>100 ? 80 : $quality);
$base= ltrim(MODX_BASE_URL, DIRECTORY_SEPARATOR);
$img= trim(urldecode($img));
$slashflag= (strpos($img, DIRECTORY_SEPARATOR)===0 ? true : false);
if($slashflag) $img= ltrim($img, DIRECTORY_SEPARATOR);
$baseflag= ($base && strpos($img, $base)===0 ? true : false);
if($baseflag) $img= ltrim($img, $base);
$root= MODX_BASE_PATH;
if($dopimg)
{
	$dopimg= trim(urldecode($dopimg));
	$dopimg= ltrim($dopimg, DIRECTORY_SEPARATOR);
	$dopimg= ltrim($dopimg, $base);
	$dopimg= $root.$dopimg;
}
if($toimg)
{
	$toimg= trim(urldecode($toimg));
	$toimg= ltrim($toimg, DIRECTORY_SEPARATOR);
	$toimg= ltrim($toimg, $base);
}
if( ! file_exists($root.$img) || ! is_file($root.$img))
{
	$img= $ipathnotphoto;
	if($fill){ $fill= false; $backgr= true; $bgcolor= \'1:1\'; }
}
if( ! file_exists($root.$img) || ! is_file($root.$img)) return false;
if($wm && ( ! file_exists($root.$ipathwatermark) || ! is_file($root.$ipathwatermark))) return false;
if( ! $toimg)
{
	$imgrassh= substr($img, strrpos($img,\'.\'));
	$newimg= \'_th\'.md5($img . $w . $h . $backgr . $fill . $x . $y . $bgcolor . $wm . $filter . $ellipse . $dopimg . $quality) . ($png ? \'.png\' : $imgrassh);
	$newimg_dir= dirname($img) .DIRECTORY_SEPARATOR.\'.th\'.DIRECTORY_SEPARATOR;
	if( ! file_exists($root.$newimg_dir)) mkdir($root.$newimg_dir, 0777);
	$newimg_path= $root.$newimg_dir.$newimg;
	$newimg_path_return= ($fullpath ? MODX_SITE_URL : ($slashflag?DIRECTORY_SEPARATOR:\'\').($baseflag?$base:\'\')) .$newimg_dir .$newimg;
}else{
	$newimg_path= $root.$toimg;
	$newimg_path_return= ($fullpath ? MODX_SITE_URL : ($slashflag?DIRECTORY_SEPARATOR:\'\').($baseflag?$base:\'\')) .$toimg;
}
if( ! file_exists($newimg_path) || filectime($root.$img) > filectime($newimg_path)) $refresh= true;
if(filesize($root.$img) > 1024*1024*10) return $img;
//--------------------------------------------------------------------------------------
if( $refresh )
{
	$img1_info= getimagesize( $root . $img );
	if( ! $img1_info[ 1 ] ) return false;
	$ot= $img1_info[ 0 ] / $img1_info[ 1 ];
	$dstW= ( $w > 0 ? $w : $img1_info[ 0 ] );
	$dstH= ( $h > 0 ? $h : $img1_info[ 1 ] );
	$dstX= 0;
	$dstY= 0;
	$srcW= $img1_info[ 0 ];
	$srcH= $img1_info[ 1 ];
	$srcX= 0;
	$srcY= 0;
	if( $fill )
	{
		$srcW= $img1_info[ 0 ];
		$srcH= round( $img1_info[ 0 ] / ( $dstW / $dstH ) );
		if( $srcH > $img1_info[ 1 ] )
		{
			$srcW= round( $img1_info[ 1 ] / ( $dstH / $dstW ) );
			$srcH= $img1_info[ 1 ];
		}
		if( $x == \'center\' ) $srcX= round( ( $img1_info[ 0 ] - $srcW ) / 2 );
		if( $x == \'right\' ) $srcX= $img1_info[ 0 ] - $srcW;
		if( $y == \'center\' ) $srcY= round( ( $img1_info[ 1 ] - $srcH ) / 2 );
		if( $y == \'bottom\' ) $srcY= $img1_info[ 1 ] - $srcH;
	}else{
		if( ( $img1_info[ 0 ] > $w && $w > 0 ) || ( $img1_info[ 1 ] > $h && $h > 0 ) )
		{
			$dstH= round( $dstW / $ot );
			if( $dstH > $h && $h > 0 )
			{
				$dstH= $h;
				$dstW= round( $dstH * $ot );
			}
		}else{
			$dstW= $img1_info[ 0 ];
			$dstH= $img1_info[ 1 ];
		}
		if( $backgr )
		{
			if( $dstW < $w )
			{
				if( $x == \'center\' ) $dstX= round( ( $w - $dstW ) / 2 );
				if( $x == \'right\' ) $dstX= $w - $dstW;
			}
			if( $dstH < $h )
			{
				if( $y == \'center\' ) $dstY= round( ( $h - $dstH ) / 2 );
				if( $y == \'bottom\' ) $dstY= $h - $dstH;
			}
		}
	}
	$crW= ( $backgr && $w > 0 ? $w : $dstW );
	$crH= ( $backgr && $h > 0 ? $h : $dstH );
	if( strstr( $bgcolor, "," ) )
	{
		$rgba_arr= explode( ",", $bgcolor );
		for( $kk=0; $kk<=3; $kk++ )
		{
			$rgba_arr[ $kk ]= intval( $rgba_arr[ $kk ] );
			if( $kk <= 2 && ( $rgba_arr[ $kk ] < 0 || $rgba_arr[ $kk ] > 255 ) ) $rgba_arr[ $kk ]= 255;
			if( $kk == 3 && ( $rgba_arr[ $kk ] < 0 || $rgba_arr[ $kk ] > 127 ) ) $rgba_arr[ $kk ]= 127;
		}
		$bgcolor= \'rgba\';
	}elseif( strpos( $bgcolor, \'fill:\' ) === 0 ){
		$effect= substr( $bgcolor, strpos( $bgcolor, \':\' )+1 );
		$bgcolor= \'fill\';
	}else{
		$coord_arr= explode( ":", $bgcolor );
		$bgcolor= \'coord\';
	}
	//--------------------------------------------------------------------------------------
	if($img1_info[2] == 1) $img1= imagecreatefromgif($root.$img);
	elseif($img1_info[2] == 2) $img1= imagecreatefromjpeg($root.$img);
	elseif($img1_info[2] == 6) $img1= imagecreatefromwbmp($root.$img);
	elseif($img1_info[2] == 3){ $img1= imagecreatefrompng($root.$img); $png= true; }
	if( $bgcolor == \'coord\' )
	{
		$col= imagecolorat( $img1, $coord_arr[ 0 ], $coord_arr[ 1 ] );
		$bgcolor= imagecolorsforindex( $img1, $col );
		$rgba_arr[ 0 ]= $bgcolor[ \'red\' ];
		$rgba_arr[ 1 ]= $bgcolor[ \'green\' ];
		$rgba_arr[ 2 ]= $bgcolor[ \'blue\' ];
		$rgba_arr[ 3 ]= $bgcolor[ \'alpha\' ];
	}
	$img2= ImageCreateTrueColor( $crW, $crH );
	if( $png )
	{
		imagealphablending( $img2, true );
		imagesavealpha( $img2, true );
		$col= imagecolorallocatealpha( $img2, $rgba_arr[ 0 ], $rgba_arr[ 1 ], $rgba_arr[ 2 ], $rgba_arr[ 3 ] );
	}else{
		$col= imagecolorallocate( $img2, $rgba_arr[ 0 ], $rgba_arr[ 1 ], $rgba_arr[ 2 ] );
	}
	if( $bgcolor == \'fill\' )
	{
		imagecopyresampled( $img2, $img1, 0, 0, 0, 0, $crW, $crH, $img1_info[0], $img1_info[1] );
		$effect= explode( \'|\', $effect );
		if( ! empty( $effect ) )
		{
			foreach( $effect AS $row )
			{
				$tmp= explode( \';\', $row );
				if( $tmp[ 0 ] == 2 || $tmp[ 0 ] == 3 || $tmp[ 0 ] == 10 ) imagefilter( $img2, $tmp[ 0 ], $tmp[ 1 ] );
				elseif( $tmp[ 0 ] == 4 ) imagefilter( $img2, $tmp[ 0 ], $tmp[ 1 ], $tmp[ 2 ], $tmp[ 3 ], $tmp[ 4 ] );
				elseif( $tmp[ 0 ] == 11 ) imagefilter( $img2, $tmp[ 0 ], $tmp[ 1 ], $tmp[ 2 ] );
				else imagefilter( $img2, $tmp[ 0 ] );
			}
		}
	}else{
		imagefill( $img2, 0,0, $col );
	}
	imagecopyresampled( $img2, $img1, $dstX, $dstY, $srcX, $srcY, $dstW, $dstH, $srcW, $srcH );
	if( $wm )
	{
		$wm_info= getimagesize( $root . $ipathwatermark );
		$img3= imagecreatefrompng( $root . $ipathwatermark );
		$wm_ot= $wm_info[ 0 ] / $wm_info[ 1 ];
		$wmW= $wm_info[ 0 ];
		$wmH= $wm_info[ 1 ];
		if( $crW < $wm_info[ 0 ] )
		{
			$wmW= $crW - round( $crW / 30 );
			$wmH= round( $wmW / $wm_ot );
		}
		if( $crH < $wmH )
		{
			$wmH= $crH - round( $crH / 30 );
			$wmW= round( $wmH * $wm_ot );
		}
		$wmX= round( ( $crW - $wmW ) / 2 );
		$wmY= round( ( $crH - $wmH ) / 2 );
		imagecopyresampled( $img2, $img3, $wmX, $wmY, 0, 0, $wmW, $wmH, $wm_info[ 0 ], $wm_info[ 1 ] );
		imagedestroy( $img3 );
	}
	$filter= explode( \'|\', $filter );
	if( ! empty( $filter ) )
	{
		foreach( $filter AS $row )
		{
			$tmp= explode( \';\', $row );
			if( $tmp[ 0 ] == 2 || $tmp[ 0 ] == 3 || $tmp[ 0 ] == 10 ) imagefilter( $img2, $tmp[ 0 ], $tmp[ 1 ] );
			elseif( $tmp[ 0 ] == 4 ) imagefilter( $img2, $tmp[ 0 ], $tmp[ 1 ], $tmp[ 2 ], $tmp[ 3 ], $tmp[ 4 ] );
			elseif( $tmp[ 0 ] == 11 ) imagefilter( $img2, $tmp[ 0 ], $tmp[ 1 ], $tmp[ 2 ] );
			else imagefilter( $img2, $tmp[ 0 ] );
		}
	}
	if( $ellipse )
	{
		$degstep= ( $degstep ? intval( $degstep ) : 5 );
		$w= ( $crW > $crH ? $crH : $crW );
		$cntr= ($w/2);
		$coord= array();
		$opacitycolor= imagecolorallocatealpha( $img2, 255, 255, 255, 127 );
		if( $ellipse == \'max\' ) $ellipse_r= $cntr-1; else $ellipse_r= $ellipse;
		for( $part=1; $part<=4; $part++ )
		{
			for( $deg=0; $deg<90; $deg+=$degstep )
			{
				$mydeg= $deg;
				if( $part == 2 || $part == 4 ) $mydeg= 90 - $deg;
				if( ! $coord[ $mydeg ][ \'x\' ] ) $coord[ $mydeg ][ \'x\' ]= round( $ellipse_r * cos( deg2rad( $mydeg ) ) );
				if( ! $coord[ $mydeg ][ \'y\' ] ) $coord[ $mydeg ][ \'y\' ]= round( $ellipse_r * sin( deg2rad( $mydeg ) ) );
				$x= $coord[ $mydeg ][ \'x\' ];
				$y= $coord[ $mydeg ][ \'y\' ];
				if( $part == 4 ){ $y *= -1; }
				if( $part == 3 ){ $x *= -1; $y *= -1; }
				if( $part == 2 ){ $x *= -1; }
				$points[]= $cntr + $x;
				$points[]= $cntr + $y;
			}
		}
		$points[]= $cntr + $ellipse_r; $points[]= $cntr;
		$points[]= $w; $points[]= $cntr;
		$points[]= $w; $points[]= $w;
		$points[]= 0; $points[]= $w;
		$points[]= 0; $points[]= 0;
		$points[]= $w; $points[]= 0;
		$points[]= $w; $points[]= $cntr;
		$png= true;
		imagealphablending( $img2, false );
		imagesavealpha( $img2, true );
		imagefilledpolygon( $img2, $points, count($points)/2, $opacitycolor );
		//$autrum= imagecolorallocate( $img2, 216, 181, 85 );
		//imageellipse( $img2, $cntr, $cntr, $ellipse_r*2, $ellipse_r*2, $autrum );
	}
	if($dopimg)
	{
		if($dopimg_xy) $dopimg_xy= explode(\':\', $dopimg_xy);
		imagealphablending($img2, true);
		imagesavealpha($img2, true);
		$dopimg_info= getimagesize($dopimg);
		$img3= imagecreatefrompng($dopimg);
		$diX= round(($crW - $dopimg_info[0]) /2) + ($dopimg_xy[0] ? intval($dopimg_xy[0]) : 0);
		$diY= round(($crH - $dopimg_info[1]) /2) + ($dopimg_xy[1] ? intval($dopimg_xy[1]) : 0);
		imagecopyresampled($img2, $img3, $diX, $diY, 0, 0, $dopimg_info[0], $dopimg_info[1], $dopimg_info[0], $dopimg_info[1]);
		imagedestroy($img3);
	}
	//--------------------------------------------------------------------------------------
	if($png) imagepng($img2, $newimg_path);
	elseif($img1_info[2] == 1) imagegif($img2, $newimg_path, $quality);
	elseif($img1_info[2] == 2) imagejpeg($img2, $newimg_path, $quality);
	elseif($img1_info[2] == 6) imagewbmp($img2, $newimg_path);
		
	chmod($newimg_path, 0755);
	imagedestroy($img1);
	imagedestroy($img2);
} //if($refresh)
return $newimg_path_return;';$s['Search']='$prefix_table= \'alta_\'; 			//префикс таблиц БД
$template = \'3,4\'; 					//шаблоны, участвующие в выборке (можно через запятую перечислять)
$tvParams = \'18,13,20,22,19,21\';				//если нужно искать по определенным полям (артикул, подрорбное описание и т.д.)	(можно через запятую перечислять)
$tpl = \'searchTpl\';					//шаблон для вывода
$tvList= \'\';  			//TV-параметры, необходимые для вывода 
	
if ( mb_strlen($_GET[\'search\'] , "UTF-8") >= 1 ) {
	
	if( ! $id) $id= $modx->documentIdentifier; 
	
	$documents = \'\';
	$needly = $modx->db->escape(addslashes(urldecode($_GET[\'search\'])));
	$output = array();
	$needlyStrict = \'\';
	$re = \'/([a-zA-Zа-яА-Я\\d]*)/ui\';
	
	preg_match_all($re, $needly, $matches);
	
	if (is_array($matches[0]) && count($matches[0])>0){
		foreach($matches[0] as $elem){
			$elem = trim($elem);
			if ($elem) {
				$needlyStrict .="(sc.pagetitle LIKE \'%".$elem."%\' OR sc.content LIKE \'%".$elem."%\') AND ";
			}
		}
	}
	
	if (is_numeric( ($parentCat = $_GET[\'cat\']) )) {
		$needlyStrict .="sc.parent = ".$parentCat." AND ";
	}
	
	$sql = "SELECT sc.id, sc.pagetitle, sc.createdon , sc.parent , prnt.pagetitle AS prntpgt FROM ".$prefix_table."site_content AS sc
		INNER JOIN  ".$prefix_table."site_content AS prnt ON sc.parent = prnt.id
		WHERE ".$needlyStrict."
		sc.template IN (".$template.") AND sc.published = 1  AND sc.isfolder = 0  AND sc.deleted = 0  AND sc.type = \'document\' 
		LIMIT 250";	
	
	// print $sql;
	
	$result = $modx->db->query($sql);
	$i = 0;
	
		
	$sql2 = "SELECT sc.id, sc.pagetitle, sc.createdon , sc.parent  FROM ".$prefix_table."site_content AS sc
		WHERE ".$needlyStrict."
		sc.template IN (".$template.") AND sc.published = 1  AND sc.isfolder = 0  AND sc.parent = 0  AND sc.deleted = 0  AND sc.type = \'document\' 
		LIMIT 250";	
	
	
	// print $sql2;
	
	$result2 = $modx->db->query($sql2);
	
	
	$collect = array();
	while( $row = $modx->db->getRow( $result )) {
		
		// print_r($row);
		
		$tvArr = array();
		$sqlTV = "SELECT tv.value, t.name FROM ".$prefix_table."site_tmplvar_contentvalues AS tv
		INNER JOIN ".$prefix_table."site_tmplvars AS t ON tv.tmplvarid = t.id
		WHERE tv.contentid = ".$row[\'id\']. ($tvParams ? " AND tv.tmplvarid IN (".$tvParams.") " : "")."
		LIMIT 20";
		
		$resultTV = $modx->db->query($sqlTV);
		while( $rowTV = $modx->db->getRow( $resultTV ) ) {
			$tvArr[$rowTV[\'name\'] ] = $rowTV[\'value\'];
		}
		
		$collect[$i][\'data\'] = $row;
		$collect[$i][\'TV\'] = $tvArr;	
		
		if (is_null($tvArr[\'availability\'])) {
			$collect[$i][\'TV\'][\'availability\'] = 1;
		}
		
		
		$i++;
	}
	
	
	while( $row = $modx->db->getRow( $result2 )) {
		
		//print_r($row);
		$tvArr = array();
		$sqlTV = "SELECT tv.value, t.name FROM ".$prefix_table."site_tmplvar_contentvalues AS tv
		INNER JOIN ".$prefix_table."site_tmplvars AS t ON tv.tmplvarid = t.id
		WHERE tv.contentid = ".$row[\'id\']. ($tvParams ? " AND tv.tmplvarid IN (".$tvParams.") " : "")."
		LIMIT 20";
		
		$resultTV = $modx->db->query($sqlTV);
		while( $rowTV = $modx->db->getRow( $resultTV ) ) {
			$tvArr[$rowTV[\'name\'] ] = $rowTV[\'value\'];
		}
		
		$collect[$i][\'data\'] = $row;
		$collect[$i][\'TV\'] = $tvArr;	
		
		if (is_null($tvArr[\'availability\'])) {
			$collect[$i][\'TV\'][\'availability\'] = 1;
		}
		
		
		$i++;
	}
	
	
	$collectCat = array();
	
	if (is_array($collect) && count($collect) > 0) {
		foreach ($collect as $key => $row) {
			if (!array_key_exists ($row[\'data\'][\'parent\'] , $collectCat)) $collectCat[$row[\'data\'][\'parent\'] ] =$row[\'data\'][\'prntpgt\'];
			$documents .= $documents == \'\' ? $row[\'data\'][\'id\'] : \',\'.$row[\'data\'][\'id\'];
		}
		
	}
	
}



echo \'<div class="searchTit">Найдено по запросу &laquo; <a href="\'.$modx->makeUrl($modx->documentIdentifier).\'?search=\'.$needly.\'">\'.urldecode($needly).\'</a> &raquo;: \'.count($collect).\'</div><br>\';


//echo \'<div class="searchTitMin">В категориях:</div>\';

/*echo \'<div class="searchCats">\';
if (is_array($collectCat) && count($collectCat) > 0) {
	foreach ($collectCat as $key => $row) {
		echo \'<a href="\'.$modx->makeUrl($modx->documentIdentifier).\'?search=\'.$needly.\'&cat=\'.$key.\'">\'.$row.\'</a>\';
	}
}
echo \'</div>\';*/


 echo \'<div class="search-results">\';

/*echo  $modx->runSnippet(\'Ditto\',array(	\'startID\'	=>\'parents\',
									  \'documents\'	=> $documents,
									  \'noResults\'	=> \' \',
									  \'sortDir\' 	=> \'ASC\',
									  \'tpl\'       => $tpl,
									  \'depth\'     => 5
									 ));*/


echo  $modx->runSnippet(\'DocLister\',array(	\'idType\'	=>\'documents\',
									  \'documents\'	=> $documents,
									  \'sortDir\' 	=> \'ASC\',
									  \'tpl\'       => $tpl,
									  \'tvPrefix\'  => $tvPrefix,
										\'tvList\'    => $tvList,     
									  \'depth\'     => 5,
										\'display\' => 20,  
										  \'paginate\' => \'pages\',
										\'TplNextP\' => \'\',
										\'TplPrevP\' => \'\'
									 ));


echo \'</div>\';';$s['sgController']='return require MODX_BASE_PATH.\'assets/snippets/simplegallery/sgController.php\';';$s['sgLister']='return require MODX_BASE_PATH.\'assets/snippets/simplegallery/sgLister.php\';';$s['sgThumb']='return require MODX_BASE_PATH.\'assets/snippets/simplegallery/sgThumb.php\';';$s['SuperPuperForms']='//SuperPuperForms
	//v004
	//13.09.2016
	//===============================================================================
	/*
&form=`2`
&popup=`1;2`
&class=`className1;className21,className22`
[!SuperPuperForms? &form=`2`!]
[!SuperPuperForms? &popup=`1;2` &class=`className1;className21,className22`!]
*/

	//===============================================================================
$js= \'superpuperforms/superpuperforms.js\'; // Путь к файлу JS
$js2= \'superpuperforms/jquery.fileupload.js\'; // Путь к файлу jquery.fileupload.js
$css= \'superpuperforms/superpuperforms.css\'; // Путь к файлу CSS
$telefonchik__flag= false; // Прыгающий телефончик
$veriword__flag[ 1 ]= false; // Captcha 1-й формы
$veriword__flag[ 2 ]= false; // Captcha 2-й формы
$filetypes= \'/.png/.jpg/.jpeg/.gif/.svg\'; ///.docx/.doc/.xls/\';
//===============================================================================
//smtp//mail//default//
$mailtype= \'smtp\';
//КОМУ (через запятую)

//$mailto= \'\';
$mailto= \'\';

//Видимые копии (через запятую)
$mailcc= false;
//Скрытые копии (через запятую)
$mailbcc= false;

//ОТ (если SMTP, то это поле - логин)
$mailfrom= \'\';


//Пароль от почты (если SMTP)
$mailpassw= \'\';

//Любимый киногерой: ----- //Секретный вопрос от почты
//Сервер SMTP (если SMTP)
$smtp= \'smtp.yandex.ru\';

//Порт SMTP (если SMTP)
$smtpport= 465;

//SNIPPET SuperPuperForms 
//===============================================================================
//
//
//
//===============================================================================


$popup= explode( \';\', $popup );
$class= explode( \';\', $class );
if( $popup ) foreach( $popup AS $key => $row ) if( intval( trim( $row ) ) ) $popup_forms[ intval( trim( $row ) ) ]= trim( $class[ $key ] );
$form= intval( trim( $form ) );
if( $form ) $form_flag= true;
//===============================================================================
if( $_GET[ \'act\' ] == \'superpuperforms_captcha\' )
{
	print \'{"result":"ok","text":"superpuperforms/dmt_captcha/veriword.php?id=\'. addslashes( $_GET[ \'dmtcaptchaid\' ] ) .\'"}\';
	if( isset( $_GET[ \'ajax\' ] ) ){ exit(); }
}
if( $_GET[ \'act\' ] == \'superpuperforms_send\' )
{
	$spfs_formid= intval( $_POST[ \'spfs_formid\' ] );
	$spfs_name= addslashes( trim( $_POST[ \'spfs_name\' ] ) );
	$spfs_email= addslashes( trim( $_POST[ \'spfs_email\' ] ) );
	$spfs_phone= addslashes( trim( $_POST[ \'spfs_phone\' ] ) );
	$spfs_kogda= addslashes( trim( $_POST[ \'spfs_kogda\' ] ) );
	$spfs_pageid= intval( $_POST[ \'spfs_pageid\' ] );
	$spfs_text= addslashes( trim( $_POST[ \'spfs_text\' ] ) );
	$spfs_pagetitle=addslashes( trim( $_POST[ \'spfs_pagetitle\' ] ) );

	$spfs_dir= addslashes( trim( $_POST[ \'spfs_dir\' ] ) );
	
	$spfs_file= $_FILES[\'spfs_file\'];
	
	
	if($spfs_file[\'tmp_name\'])
	{
		$photoflag= true;
		$photoflag_error= true;
		if(is_uploaded_file($spfs_file[\'tmp_name\']))
		{
			$rassh= substr($spfs_file[\'name\'],strrpos($spfs_file[\'name\'],\'.\'));
			if(strpos($filetypes,\'/\'.$rassh.\'/\')!==false || $spfs_file[\'type\']==\'application/x-zip-compressed\')
			{
				if($spfs_file[\'size\'] < 1024*1024*10) //10 Мб
				{
					$ip= $_SERVER[\'REMOTE_ADDR\'];
					$folder= \'assets/images/superpuperforms/\'.$ip.\'/\';
					srand(time());
					$file= md5($spfs_file[\'name\'].rand(10,99)).$rassh;
					if( ! file_exists(MODX_BASE_PATH.$folder)) mkdir(MODX_BASE_PATH.$folder, 0777, true);
					if(move_uploaded_file($spfs_file[\'tmp_name\'], MODX_BASE_PATH.$folder.$file))
					{
						$photoflag_error= false;
					}else $result= \'{"result":"error","text":"Ошибка загрузки файла! 002"}\';
				}else $result= \'{"result":"error","text":"Слишком большой файл! Больше 10Мб."}\';
			}else $result= \'{"result":"error","text":"Неверное расширение файла!"}\';
		}else $result= \'{"result":"error","text":"Ошибка загрузки файла! 001"}\';
	}

	if($result)
	{
	}
	elseif( $veriword__flag[ $spfs_formid ] && $_POST[ \'spfs_veriword\' ] != $_SESSION[ \'DMTCaptcha\' ][ \'superpuperforms_\'.$spfs_formid ] ){
		$result= \'{"result":"error","text":"Введен неверный текст с картинки!"}\';
	}
	elseif( ! $spfs_phone ){
		if( $spfs_formid == 2 ){
			$result= \'{"result":"error","text":"Необходимо указать контактные данные!"}\';
		}
		
	}
	if( ! $result )
	{
		$subject= ( $spfs_formid == 2 ? \'Заказ звонка\' : ($spfs_formid == 4 ? \'Заказ автобуса\' : ($spfs_formid == 3 ? \'Вопрос от клиента\' : ( $spfs_formid == 6 ? \'Заказ прайса\' :\'Письмо\' )))) ." с сайта www.". $_SERVER[ \'HTTP_HOST\' ];

		$message= \'<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>\'. $subject .\'</title></head><body><h2>\'. $subject .\'</h2>\';

		if( $spfs_pageid ) $message .= \'<p><b>Отправлено со страницы:</b> \'. $modx->makeUrl( $spfs_pageid, \'\', \'\', \'full\' ) .\'</p>\';
		if( $spfs_name ) $message .= \'<p><b>Имя Отчество:</b> \'. $spfs_name .\'</p>\';
		if( $spfs_email ) $message .= \'<p><b>E-mail:</b> \'. $spfs_email .\'</p>\';
		if( $spfs_phone ) $message .= \'<p><b>Контактный телефон:</b> \'. $spfs_phone .\'</p>\';
		if( $spfs_kogda ) $message .= \'<p><b>Когда позвонить?</b> \'. $spfs_kogda .\'</p>\';
		if( $spfs_tema ) $message .= \'<p><b>Комментарий к звонку:</b> \'. $spfs_tema .\'</p>\';
		if( $spfs_file && ! $photoflag_error ) $message .= \'<p><a href="http://\'.$_SERVER[\'HTTP_HOST\'].\'/\'.$folder.$file.\'">Файл</a></p>\';
		$message .= \'<p><b>Дата и время сообщения:</b> \'. date( \'d.m.Y - H:i\' ) .\'</p>\';
		if( $spfs_text ) $message .= \'<p><b>Сообщение:</b><br />\'. $spfs_text .\'</p>\';
		if($spfs_pagetitle) $message .= \'<p><b>Интересующий товар:</b> \'. $spfs_pagetitle .\'</p>\';
		
		if( $spfs_dir ) $message .= \'<p><b>Направление</b> \'. $spfs_dir .\'</p>\';
		if( $spfs_pass ) $message .= \'<p><b>Количество пассажиров</b> \'. $spfs_pass .\'</p>\';
		
		
		$message .= \'</body></html>\';
		
		
		// ============================================================================
		if( $mailtype == \'smtp\' || $mailtype == \'mail\' )
		{
			$modx->loadExtension(\'modxmailer\');
			if (false) {
				$modx->mail->SMTPDebug   = 2;
				$modx->mail->Debugoutput = \'html\';
			}
			$modx->mail->CharSet= \'utf-8\';
			$modx->mail->From= $mailfrom;
			$modx->mail->Sender   = $mailfrom;
			$modx->mail->FromName= "";
			
			$modx->mail->isHTML( true );
			$modx->mail->Subject= $subject;
			$modx->mail->Body= $message;
			
			$mailto= explode( \',\', $mailto ); foreach( $mailto AS $row ) $modx->mail->addAddress( trim( $row ) );
			if( $mailcc ){ $mailcc= explode( \',\', $mailcc ); foreach( $mailcc AS $row ) $modx->mail->addCC( trim( $row ) ); }
			if( $mailbcc ){ $mailbcc= explode( \',\', $mailbcc ); foreach( $mailbcc AS $row ) $modx->mail->addBCC( trim( $row ) ); }
			$phpmailer_result= $modx->mail->Send();
		}else{
			$headers= "Content-type: text/html; charset=utf-8\\n";
			$headers .= "From: <". $mailfrom .">\\n";
			$phpmailer_result= mail( $mailto, $subject, $message, $headers );
		}
		// ============================================================================	

		if( $phpmailer_result )
		{
			$result= \'{"result":"ok","text":"Сообщение успешно отправлено!<br />С Вами свяжется наш специалист."}\';
		}else{
			$result= \'{"result":"error","text":"Ошибка сервера! Повторите попытку позже."}\';
		}
	}
	print $result;
	if( isset( $_GET[ \'ajax\' ] ) ){ header( \'Content-Type:text/html; charset=UTF-8\' ); exit(); }
}
?>
<link rel="stylesheet" type="text/css" href="<?= $css ?>" />
<script type="text/javascript" src="<?= $js ?>"></script>
<script type="text/javascript">
	(function($){$(document).ready(function(){
	<?php
	if( ! $form_flag )
	{
		foreach( $popup_forms AS $formId => $className )
		{
			$className= str_replace( \',\', \', .\', $className );
			print \'$( ".\'. $className .\'" ).click(function(){ superpuperforms_show( \'. $formId .\' ); return false; });\';
		}
	}
	?>
	});})(jQuery);
</script>
<?php if( $telefonchik__flag && ! $form_flag ){ ?>
<div class="superpuperforms_wrapper superpuperforms_wrapper_krzhk"><div class="spfs_krzhk">&nbsp;</div></div>
<?php } ?>
<div class="superpuperforms_wrapper <?=( ! $form_flag ? \'superpuperforms_wrapper_popup\' : \'superpuperforms_wrapper_default\' )?>">
	<?php if( ! $form_flag ){ ?>
	<div class="spfs_black"><div class="spfs_white"><div class="spfs_krestik"></div>
		<?php } ?>

		<?php if( ( $form_flag && $form == 1 ) || ( ! $form_flag && $popup_forms[ 1 ] ) ){ ?>
		<div class="spfs_formwrapper spfs_formwrapper_1 <?=( ! $form_flag ? \'spfs_formwrapper_popup\' : \'\' )?>" data-formid="1">
			<?=( $form_flag ? \'<div class="spfs_label"> </div>\' : \'\' )?><div class="spfs_tit">Напишите нам</div><div class="clr">&nbsp;</div>
			<div class="spfs_result"></div>
			<form action="<?= $modx->makeUrl( $modx->documentIdentifier ); ?>" method="post">
				<div class="spfs_label">Имя Отчество:</div><div class="spfs_input"><input class="form_elem" type="text" name="spfs_name" /></div>
				<div class="clr">&nbsp;</div>
				<div class="spfs_label"><?=( $form_flag ? \'Адрес электронной почты\' : \'E-mail\' )?>:<div class="zvd">*</div></div><div class="spfs_input"><input class="form_elem" type="text" name="spfs_email" /></div>
				<div class="clr">&nbsp;</div>
				<div class="spfs_label">Номер телефона:<div class="zvd">*</div></div><div class="spfs_input"><input class="form_elem" type="text" name="spfs_phone" /></div>
				<div class="clr">&nbsp;</div>

				<!-- input type="file" name="spfs_file" / -->

				<div class="spfs_label">Сообщение:</div><div class="spfs_input">
				<textarea class="form_elem" name="spfs_text"><?php print $mail_text;?></textarea>
				</div>
				<div class="clr">&nbsp;</div>
				<?php if( $veriword__flag[ 1 ] ){ ?>
				<div class="spfs_captcha">
					<div class="spfs_label spfs_br"><img src="superpuperforms/dmt_captcha/veriword.php?id=superpuperforms_1" /><div class="spfs_change">Изменить число</div><div class="zvd">*</div></div>
					<div class="spfs_input spfs_br">Введите текст с картинки:<br /><input class="form_elem" type="text" name="spfs_veriword" /></div>
					<div class="clr">&nbsp;</div>
				</div>
				<?php } ?>
				<div class="spfs_label"><div class="zvd">*</div></div><div class="spfs_input">- поля обязательные для заполнения!</div>
				<div class="clr">&nbsp;</div>
				<input class="spfs_pageid" type="hidden" name="spfs_pageid" value="[~[*id*]~]" />
				<input type="hidden" name="spfs_formid" value="1" />
				<div class="spfs_label"> </div><div class="spfs_input"><button class="spfs_submit btn-call" type="button">Отправить сообщение</button></div>
				<div class="clr">&nbsp;</div>
				<p class="conf">Нажимая на кнопку Отправить, вы даете согласие на обработку персональных данных в соответствии с <a href="[~13~]">политикой конфиденциальности</a>.</p>
			</form>
		</div>
		<?php } ?>


		<?php if( ( $form_flag && $form == 2 ) || ( ! $form_flag && $popup_forms[ 2 ] ) ){ ?>
		<div class="spfs_formwrapper spfs_formwrapper_2 <?=( ! $form_flag ? \'spfs_formwrapper_popup\' : \'\' )?>" data-formid="2">
			<?=( $form_flag ? \'<div class="spfs_label"> </div>\' : \'\' )?><div class="spfs_tit">Заказ обратного звонка</div>
			<div class="spfs_result"></div>
			<form action="<?= $modx->makeUrl( $modx->documentIdentifier ); ?>" method="post">
				<div class="spfs_label">Имя Отчество:</div><div class="spfs_input"><input class="form_elem" type="text" name="spfs_name" /></div>
				<div class="clr">&nbsp;</div>
				<div class="spfs_label">Номер телефона:<div class="spfs_txt">с кодом города</div></div><div class="spfs_input"><input class="form_elem" type="text" name="spfs_phone" /></div>
				<div class="clr">&nbsp;</div>
				<div class="spfs_label">Когда позвонить?</div><div class="spfs_input"><input class="form_elem" type="text" name="spfs_kogda" /></div>
				<div class="clr">&nbsp;</div>
				<?php if( $veriword__flag[ 2 ] ){ ?>
				<div class="spfs_captcha">
					<div class="spfs_label spfs_br"><img src="superpuperforms/dmt_captcha/veriword.php?id=superpuperforms_2" /><div class="spfs_change">Изменить число</div></div>
					<div class="spfs_input spfs_br">Введите текст с картинки:<br /><input class="form_elem" type="text" name="spfs_veriword" /></div>
					<div class="clr">&nbsp;</div>
				</div>
				<?php } ?>
				<input class="spfs_pageid" type="hidden" name="spfs_pageid" value="[~[*id*]~]" />
				<input type="hidden" name="spfs_formid" value="2" />
				<div class="spfs_label"> </div><div class="spfs_input"><button class="spfs_submit btn-call" type="button">Отправить заявку</button></div>
				<div class="clr">&nbsp;</div>
				<p class="conf">Нажимая на кнопку Отправить, вы даете согласие на обработку персональных данных в соответствии с <a href="[~13~]">политикой конфиденциальности</a>.</p>
			</form>
		</div>
		<?php } ?>		
	
		
		<?php if( ( $form_flag && $form == 3 ) || ( ! $form_flag && $popup_forms[ 3 ] ) ){ ?>
		<div class="spfs_formwrapper spfs_formwrapper_3 <?=( ! $form_flag ? \'spfs_formwrapper_popup\' : \'\' )?>" data-formid="3">
			<?=( $form_flag ? \'<div class="spfs_label"> </div>\' : \'\' )?>
			<div class="spfs_result"></div>
			<div class="clr"></div>
			<form action="<?= $modx->makeUrl( $modx->documentIdentifier ); ?>" method="post">
				<div class="inp_box setdefaultvalue defaultvalue">
                        <input id="forname" type="text"  name="spfs_name">
                        <label for="forname">Имя</label>
                    </div>
                    <div class="inp_box setdefaultvalue defaultvalue">
                        <input id="inp_email" type="text" name="spfs_email" >
                        <label for="inp_email">Email</label>
                    </div>
					<div class="inp_box long setdefaultvalue defaultvalue">
                        <input type="text" id="inp_text" name="spfs_text">
                        <label for="inp_text">Написать нам</label>
                    </div>
                    <div class="conf">
                        Нажимая кнопку «Отправить» вы даете согласие <br> на обработку персональных данных в соответствии <br> с <a href="[~13~]">политикой конфиденциальности</a>.
                    </div>
                    <button type="button" class="spfs_submit btn" aria-label="Отправить сообщение">Оставить заявку</button>
				<div class="clr"></div>
				<?php if( $veriword__flag[ 3 ] ){ ?>
				<div class="spfs_captcha">
					<div class="spfs_label spfs_br"><img src="superpuperforms/dmt_captcha/veriword.php?id=superpuperforms_3" alt="" /><div class="spfs_change">Изменить число</div><div class="zvd">*</div></div>
					<div class="spfs_input spfs_br">Введите текст с картинки:<br /><input class="form_elem" type="text" name="spfs_veriword" /></div>
					<div class="clr">&nbsp;</div>
				</div>
				<?php } ?>

			</form>
		</div>
		<?php } ?>		

						

		<?php if( ! $form_flag ){ ?>
		</div></div>
	<?php } ?>
</div>
<?php
//';$s['Wayfinder']='return require MODX_BASE_PATH.\'assets/snippets/wayfinder/snippet.wayfinder.php\';';$s['catalog__old']='$id = $modx->documentIdentifier;
$document = $modx->getDocument($id,\'isfolder\',1,0);
$isfolder = $document[\'isfolder\'];

$tvList= \'cat-img,img,price,popul,intro-prod\';  	// Перечисляем TV-параметры, необходимые для вывода 
$tvList2= \'cat-img,img,price,popul,intro-prod, article,price-text,video,availability,brand,model,country,manufacturer_code,files\';
$tplCat = \'category\'; 					// шаблон категории
$tplCatItem = \'catalog__item\'; 			// шаблон карточки в каталоге
$tvPrefix = \'\'; // Чтобы параметвы выводились без префикса



	if ($isfolder == 1) {
		$categories = $modx->runSnippet(\'DocLister\',array(
			\'tvList\'  => $tvList,
			\'tpl\'     => $tplCat,
			\'orderBy\' => \'menuindex ASC\',
			\'filters\' => \' AND(content:isfolder:=:1)\',
			\'tvPrefix\' => \'\',
			\'paginate\' => \'pages\',
			\'display\' => \'\',
			\'TplNextP\' => \'\',
			\'TplPrevP\' => \'\',
		));
		$items = $modx->runSnippet(\'DocLister\',array(
			\'prepare\'  => \'prepare_catalog_itemTpl\',
			\'tvList\'   => $tvList,
			\'tpl\'      => $tplCatItem, 
			\'orderBy\'  => \'menuindex ASC\',
			\'filters\'  => \' AND(content:isfolder:=:0) \',
			\'tvPrefix\' => \'\',
			\'paginate\' => \'pages\',
			\'display\'  => \'\',
			\'TplNextP\' => \'\',
			\'TplPrevP\' => \'\',
		));
		echo $categories;
		echo $items;

	} else {
		$item = $modx->runSnippet(\'DocLister\',array(
			\'documents\' => $id,
			\'prepare\'   => \'prepare_catalog_itemTpl\',
			\'tvList\'    => $tvList2,
			\'tpl\'       => \'catalog_itemTpl_Page\', 
		));
		echo $item;
	}';$s['ParseMultiImages']='$id   = $id ? $id : $modx->documentIdentifier;
$doc  = $modx->getDocument($id, \'pagetitle\');
$doc  = $doc[\'pagetitle\'];
$imgs = $modx->getTemplateVar(\'cat-img\', \'*\', $id);
$imgs = $imgs[\'value\'];
$imgs = explode(\'||\', $imgs);
if ( ! is_array($imgs)) return;

foreach ($imgs AS $key => $img) {
	if ( ! file_exists(MODX_BASE_PATH.$img)) continue;

	if ($t === \'1\') {
		$crop = $modx->runSnippet(\'phpthumb\', array(\'input\'=>$img, \'options\'=>"w=300,h=300,fltr[]=wmi|/img/wm2.png|*|15|0|0"));
		$p .= \'<li class="uk-flex uk-flex-center uk-flex-middle">
				<div>
				<a class="uk-button uk-button-default produckt__pic-a" href="#modal-center" uk-toggle>
				<img  src="\'.$crop.\'"  alt="\'.$doc.\'" />
				</a>
				
				
				
				</div>
			</li>\';
		
	}
	
	if ($t === \'3\') {
		$crop = $modx->runSnippet(\'phpthumb\', array(\'input\'=>$img, \'options\'=>"w=450,h=450,fltr[]=wmi|/img/wm2.png|*|15|0|0"));
		$p .= \'<li class="uk-flex uk-flex-center uk-flex-middle">
				<div>
					<img class="produckt__big-pic" src="\'.$crop.\'"  alt="\'.$doc.\'" />			
				</div>
			</li>\';
		
	}
	
	elseif ($t === \'2\') {
		$crop = $modx->runSnippet(\'phpthumb\', array(\'input\'=>$img, \'options\'=>"w=100,h=100"));
		$p .= \'<li uk-slideshow-item="\'.$key.\'" class="text-align produckt__pic-li">
			<div class="produckt__pic-wrap"> 	<a href="#"><img src="\'.$crop.\'"  alt="\'.$doc.\'" /></a> </div>
		</li>\';
	}
}
		return $p;';$s['ParseMultiParams']='//можно добавить действие, и вообще менять вывод
// пример вызова
// [!ParseMultiParams? &act=`` &catparam=`[*cat-har*]`!] 
$params = explode( "||", $catparam);

if ($act == \'file\') {

	if( $params )
	{ 
		foreach( $params AS $param )
		{ 	
				$print .=\'\';
				$param= explode( "::", $param );
				if( ! empty( $param[ 0 ] ) || ! empty( $param[ 1 ] ) )
					$print .= \'<a class="product__file uk-margin" target="_blank" href="\'. $param[ 1 ] .\' "> <img class="product__file-icon"src="img/pdf.svg" alt="">\'. $param[ 0 ] .\'</a>\';
				//	<img class="gal-img" src="\'. $modx->runSnippet( \'ImgCrop45\', array( \'img\' => $param[0], \'w\' => 200, \'h\' => 150, ) ) .\'"  />
				$print .=\'\';

		}
		
		
	}

}



if ($act == \'har2\') {

	if( $params )
	{ 
		foreach( $params AS $param )
		{ 	
				$print .=\'<div class="product__har-tr uk-grid-small uk-width-3-5@xl uk-width-2-3@m uk-width-1-1 uk-margin-remove" data-uk-grid>\';
				$param= explode( "::", $param );
				if( ! empty( $param[ 0 ] ) || ! empty( $param[ 1 ] ) )
					$print .= \'<div class="uk-width-expand@s uk-width-auto uk-padding-remove-left" data-uk-leader><span class="product__har-span">\'. $param[ 0 ] .\': &nbsp;</span> </div> <div class="product__value uk-width-2-5@s uk-width-auto">\'. $param[ 1 ] .\'</div>\';
				//	<img class="gal-img" src="\'. $modx->runSnippet( \'ImgCrop45\', array( \'img\' => $param[0], \'w\' => 200, \'h\' => 150, ) ) .\'"  />
				$print .=\'</div>\';

		}
		
		
	}

}

	return $print;';$s['ShopAction']='/**
 * ShopAction
 *
 *
 *
 */
	
//----------------------------------------------------------------------------------
//SMTP - true OR false
$mailtype_smtp= true; //??

//КОМУ (через запятую)

$replyto = \'\';
$mailto = \'\';

//$mailto = \'ivan.it@delta-ltd.ru\';

//Видимые копии (через запятую)
$mailcc = false;

//Скрытые копии (через запятую)
$mailbcc = false;
//$mailbcc= \'galina.it@delta-ltd.ru\';

//ОТ (если SMTP, то это поле - логин)
//$mailfrom= \'feedback.noreply@yandex.ru\';

//Пароль от почты (если SMTP)
//$mailpassw= \'XSbKjp7ZjdoaesD_o_0j\';

//ОТ (если SMTP, то это поле - логин)
$mailfrom= \'\';

//Пароль от почты (если SMTP)
$mailpassw= \'\';


//Любимый киногерой: ----- //Секретный вопрос от почты
//Сервер SMTP (если SMTP)
$smtp= \'smtp.yandex.ru\';

//Порт SMTP (если SMTP)
$smtpport= 465;
//ОТ (если SMTP, то это поле - логин)
//$mailfrom= \'Bu\';
//Пароль от почты (если SMTP)
//$mailpassw= \'\';

//$config = array(
//	\'mailto\'   => \'a.ru\', //кому
//	\'mailfrom\' => false,
//	\'fromname\' => \'""\', 
//	\'cc\'       => \'\',//\'u\', //копия
//	\'bcc\'      => \'\',//\'d@yandex.ru\', //скрытая копия
//	\'debug\'    => false,
//);

//SNIPPET Formochki //SNIPPET ShopAction //MODULE scorn_orders //SNIPPET LK_Restore
//----------------------------------------------------------------------------------


$selectFields= \'c.id,pagetitle,isfolder,content\'; // Для DocLister

$tvList= \'cat-img, price\';  // Для DocLister
// ---------------------------------------------------------------------------------


/*
	1   - Неоформленный заказ
	5   - Заказ оформлен - готов к оплате
	10  - Производство
	20  - Отправка
	30  - Доставка
	40  - Ожидание заказчика в ПВЗ
	50  - Доставка по адресу
	60  - Ожидание оплаты
	70  - Завершено
	100 - Возврат товара
	200 - Отмена заказа заказчиком
	210 - Отмена заказа администратором
*/

$userid= $_SESSION[\'webuserinfo\' ][\'auth\'] ? $_SESSION[\'webuserinfo\' ][\'id\'] : 0;

$id= intval($id);
$count= intval($count);
$itogo= intval($itogo);
$size= $modx->db->escape($size);
$uniq = $modx->db->escape($uniq);
$param = $param;

if($count<=0 || $count>999999 ) $count= 1;

$code = $modx->runSnippet(\'ShopOrderCode\');

// Добавление позиции в корзину
if($act == \'add\')
{
	$item= $modx->runSnippet(\'DocLister\',array(\'api\'=>true, \'idType\'=>\'documents\', \'documents\'=>$id, \'selectFields\'=>$selectFields.\',template,deleted,published\', \'tvList\'=>$tvList));
	$item= json_decode($item, true);
	$item= $item[$id];
	
	if($item[\'id\'] && $item[\'template\']==4 && $item[\'isfolder\']==0 && $item[\'deleted\']==0 && $item[\'published\']==1)
	{
		$item[\'pagetitle\']= $modx->db->escape($item[\'pagetitle\']);
		//$item[\'tv_price\']= intval($item[\'tv_price\']);

		
		if(true)
		{
			$uniq= md5($id);
			
			$stat= $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'stat\', \'uniq\'=>$uniq));
			
			if(!$code) $code= $modx->runSnippet(\'ShopOrderCode\',array(\'create\'=>true));

			if($stat===\'n\')
			{
				/*
				$prms= $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'prms\', \'id\'=>$id));
				$prms= $modx->db->escape($prms);
				*/
				$buffPrice = str_replace(\' \',\'\',$item[tv_price])*1;
				$modx->db->query("INSERT INTO ".$modx->getFullTableName(\'_shop_items\')." SET
							code=\'{$code}\',
							id_item=\'{$id}\',
							`name`=\'{$item[pagetitle]}\',
							`art`=\'\',
							`count`= $count,
							price=$buffPrice,
							uniq=\'{$uniq}\'
						");
			}else{
				$modx->runSnippet(\'ShopAction\',array(\'act\'=>\'plus\', \'uniq\'=>$uniq, \'count\'=>1));
			}

			$modx->runSnippet(\'ShopAction\',array(\'act\'=>\'itogo\'));
		}
	}
	$cc= $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'items_count\'));
	//$ss= $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'summa\'));
	return \'{"res":"ok", "cc":"\'.$cc.\'"}\'; //, "ss":"\'.$ss.\'"}\';
}

// Оформление заказа
if($act == \'checkout\')
{
	$modx->db->conn->autocommit(FALSE);
	$modx->db->conn->begin_transaction();
	
	$v1klik_f = $post[\'v1klik_f\'] == \'y\' ? true : false;
	if ($v1klik_f) {
		$v1klik_itemid = intval($post[\'v1klik_itemid\']);
		if ( ! $v1klik_itemid) {
			return \'{"result":"error", "errors":"<div>Выберите товар для заказа</div>"}\';
		}
		
		$code_new = $modx->runSnippet(\'ShopOrderCode\',array(\'create\'=>true, \'nullstatus\'=>true));
		if ( ! $code_new) {
			return \'{"result":"error", "errors":"<div>Ошибка базы данных. Попробуйте еще раз или обратитесь к администратору.</div>"}\';
		}
		$res = $modx->db->query("UPDATE ".$modx->getFullTableName(\'_shop_items\')."
			SET code=\'{$code_new}\' WHERE code=\'{$code}\'");
		if ( ! $res) {
			$modx->db->conn->rollback();
			return \'{"result":"error", "errors":"<div>Ошибка базы данных. Попробуйте еще раз или обратитесь к администратору.</div>"}\';
		}
		
		$modx->runSnippet(\'ShopAction\',array(
			\'act\' => \'add\',
			\'id\'  => $v1klik_itemid,
		));
	}
	
	$modx->runSnippet(\'ShopAction\',array(\'act\'=>\'itogo\'));
	
	$itogo_db = $modx->runSnippet(\'ShopOrderCode\',array(\'fields\'=>\'itogo\'));
	
	$fio= $modx->db->escape(trim($post[\'fio\']));
	$email= $modx->db->escape(trim($post[\'email\']));
	$phone= $modx->db->escape(trim($post[\'phone\']));
	$city= $modx->db->escape(trim($post[\'city\']));
	$address= $modx->db->escape(trim($post[\'address\']));
	
	$message= trim($post[\'message\']);
	$message= str_replace("\\n\\n", "\\n", $message);
	$message_db= $modx->db->escape($message);
	$message_br= str_replace("\\r", \'\', $message);
	$message_br= str_replace("\\n", \'<br>\', $message_br);
	

	if ( ! filter_var($email, FILTER_VALIDATE_EMAIL)) {
		$errors .= \'<div>Введите корректный E-mail</div>\';
	}
	
/*	if( ! $fio)
		$errors .= \'<div class="clr"></div><div>Введите Ваше имя</div>\'; */
	
	if ( ! preg_match("/[0-9]$/", $phone)) {
		$errors .= \'<div>Введите корректный телефон</div>\';
	}
	
	if ($itogo != $itogo_db) {
		$errors .= \'<div>Сумма заказа изменилась &mdash; проверьте заказ</div>\';
	}
	
	if ( ! $errors) {
		
		srand(time().rand());
		$secret = md5($code.\'_\'.$email.\'_\'.$itogo.\'_\'.time().\'_\'.rand());
		
		$items = $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'items\'));
		
		//$payment_link= $modx->makeUrl(50,\'\',\'\',\'full\').\'?act=payment&c=\'.$code.\'&s=\'.$secret;
		
		$subject= \'Заказ №\'.substr($code,1).\' — успешно оформлен!\';
		
		$body= \'<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>\'.$subject.\'</title>\';
		$body .= \'</head><body>\';
		
		$body .= \'<h2>\'.$subject.\'</h2>
		<p>\'.date(\'d.m.Y, H:i\').\'</p>
		<h3>Контактные данные</h3>
		<table border="1" width="100%" cellpadding="4" cellspacing="0" style="font-size:12px;">
			<tr><td width="40%" align="right" valign="middle">ФИО</td>
			<td align="left" valign="middle">\'.$fio.\'</td></tr>
	
			<tr><td align="right" valign="middle">Адрес электронной почты</td>
			<td align="left" valign="middle">\'.$email.\'</td></tr>
	
			<tr><td align="right" valign="middle">Телефон</td>
			<td align="left" valign="middle">\'.$phone.\'</td></tr>
	
			<tr><td align="right" valign="middle">Город</td>
			<td align="left" valign="middle">\'.$city.\'</td></tr>
	
			<tr><td align="right" valign="middle">Адрес</td>
			<td align="left" valign="middle">\'.$address.\'</td></tr>
	
			<tr><td align="right" valign="middle">Комментарии</td>
			<td align="left" valign="middle">\'.$message_br.\'</td></tr>
		</table>\';
		
		//$body .= \'<p><a style="font-size:140%;" target="_blank" href="\'.$payment_link.\'">Перейти к оплате банковской картой</a> (скидка 10%)</p>\';
		
		$body .= \'<h3>Заказ</h3>
		
		<table border="1" width="100%" cellpadding="4" cellspacing="0" style="font-size:12px;">
							<tr>
								<td align="center"><b>№</b></td>
								<td><b>Описание</b></td>
								<td align="right"><nobr><b>Цена</b></nobr></td>
								<td align="center"><nobr><b>Кол-во</b></nobr></td>
								<td align="right"><nobr><b>Сумма</b></nobr></td>
							</tr>\';
		
		foreach ($items AS $num => $item) {
			$sum = $item[\'price\'] * $item[\'count\'];
			
			$body .= \'
								<tr>
									<td align="center" valign="middle">\'.($num+1).\'.</td>
									<td>
										<div>[\'.$item[\'id_item\'].\'] <a target="_blank" href="\'.$modx->makeUrl($item[\'id_item\'],\'\',\'\',\'full\').\'">\'.$item[\'name\'].\'</a></div>\';
		
			
			if($item[\'cat_art\']) $body .= \'<div>Арт. \'.$item[\'cat_art\'].\'</div>\';

			$body .= \'</td>
									<td align="right" valign="middle"><nobr>\'.$modx->runSnippet(\'Price\',array(\'price\'=>$item[\'price\'], \'round\'=>\'2\')).\' руб.</nobr></td>
									<td align="center" valign="middle"><nobr>\'.$item[\'count\'].\' \'.$item[\'ed\'].\'</nobr></td>
									<td align="right" valign="middle"><nobr><b>\'.$modx->runSnippet(\'Price\',array(\'price\'=>$sum, \'round\'=>\'2\')).\' руб.</b></nobr> </td>
								
									
								</tr>\';
		}
		
		$body .= \'<tr>
							<td></td>
							<td></td>
							<td> </td>
							<td align="right" valign="middle"><b>Сумма заказа</b></td>
							<td align="right" valign="middle"><nobr><b>\'.$modx->runSnippet(\'Price\',array(\'price\'=>$itogo, \'round\'=>\'2\')).\' руб.</b></nobr></td>
						</tr>\';
		$body .= \'</table>\';
		
		$body_qq= $modx->db->escape($body.\'</body></html>\');
		
		$res = $modx->db->query("INSERT INTO ".$modx->getFullTableName(\'_shop_mail\')." SET code=\'{$code}\', mail=\'{$body_qq}\'");
		if ( ! $res) {
			$modx->db->conn->rollback();
			return \'{"result":"error", "errors":"<div>Ошибка базы данных. Попробуйте еще раз или обратитесь к администратору.</div>"}\';
		}
		
		//$body .= \'<p><a style="font-size:140%;" target="_blank" href="\'.$payment_link.\'">Перейти к оплате банковской картой</a> (скидка 10%)</p>\';
		
		/*$body .= \'<div class="mailpodpis"><p>--<br>
					<a href="tel:+7(4862)42-30-75">+7 (4862) 42-30-75 </a><br>
					Сайт: <a target="_blank" href="http://zoo57.ru">www.zoo57.ru</a></p></div>\';  */

		$body .= \'</body></html>\';
		
		// ---------------------------------------------------------------------------------
		
		$res = $modx->db->query("UPDATE ".$modx->getFullTableName(\'_shop_order\')." SET
			userid=\'{$userid}\',
			status=\'5\',
			fio=\'{$fio}\',
			email=\'{$email}\',
			phone=\'{$phone}\',
			city=\'{$city}\',
			address=\'{$address}\',
			message=\'{$message_db}\',
			logs=CONCAT(logs,\'\\n".date(\'d.m.Y, H:i\')." | Заказ оформлен\'),
			checkout=\'".time()."\',
			secret=\'{$secret}\'
			WHERE code=\'{$code}\' LIMIT 1");
		if ( ! $res) {
			$modx->db->conn->rollback();
			return \'{"result":"error", "errors":"<div>Ошибка базы данных. Попробуйте еще раз или обратитесь к администратору.</div>"}\';
		}
		
		if ($v1klik_f) {
			$res = $modx->db->query("UPDATE ".$modx->getFullTableName(\'_shop_order\')."
				SET status=\'1\' WHERE code=\'{$code_new}\' LIMIT 1");
			if ( ! $res) {
				$modx->db->conn->rollback();
				return \'{"result":"error", "errors":"<div>Ошибка базы данных. Попробуйте еще раз или обратитесь к администратору.</div>"}\';
			}
		}
		
		// ---------------------------------------------------------------------------------
		include_once(MODX_MANAGER_PATH.\'includes/controls/class.phpmailer.php\');
		if (true) {
			$phpmailer= new PHPMailer();
			if (false) {
				$phpmailer->SMTPDebug= 2;
				$phpmailer->Debugoutput = \'html\';
			}
			if ($mailtype_smtp) {
				$phpmailer->isSMTP();
				$phpmailer->Host= $smtp;
				$phpmailer->Port= $smtpport;
				$phpmailer->SMTPAuth= true;
				$phpmailer->SMTPSecure= \'ssl\';
				$phpmailer->Username= $mailfrom;
				$phpmailer->Password= $mailpassw;
			}
			$phpmailer->CharSet= \'utf-8\';
			$phpmailer->From= $mailfrom;
			$phpmailer->isHTML(true);
			$phpmailer->AltBody= \'To view the message, please use an HTML compatible email viewer!\';
			$phpmailer->Subject= $subject;
			$phpmailer->msgHTML($body);
			
			$phpmailer->FromName = \'\';
			$phpmailer->addReplyTo($replyto);
			
			$phpmailer->addAddress($email);
			$mailcc= explode(\',\', $mailto); foreach($mailcc AS $row2) $phpmailer->addCC(trim($row2));
			$mailbcc= explode(\',\', $mailbcc); foreach($mailbcc AS $row3) $phpmailer->addBCC(trim($row3));
			
			$phpmailer_result= $phpmailer->send();
		}
		$modx->db->query("UPDATE ".$modx->getFullTableName(\'_shop_mail\')."
			SET result=\'".($phpmailer_result?\'y\':\'n\')."\' WHERE code=\'{$code}\' LIMIT 1");
// ---------------------------------------------------------------------------------
		
		$modx->db->conn->commit();
		
		return \'{"result":"ok", "c":"\'.$code.\'", "s":"\'.$secret.\'"}\';
	}
	return \'{"result":"error", "errors":"\'.addslashes($errors).\'"}\';
}

// Сохранение данных покупателя
if($act == \'data\')
{
	$nm= $modx->db->escape($_GET[\'nm\']);
	$vl= $modx->db->escape(trim($_GET[\'vl\']));
	if(
		$nm == \'fio\' ||
		$nm == \'email\' ||
		$nm == \'phone\' ||
		$nm == \'city\' ||
		$nm == \'address\' ||
		$nm == \'message\'
	){
		$modx->db->query("UPDATE ".$modx->getFullTableName(\'_shop_order\')." SET `{$nm}`=\'{$vl}\' WHERE code=\'{$code}\' LIMIT 1");
	}
}

// Прибавление к кол-ву
if($act == \'plus\')
{
	$modx->db->query("UPDATE ".$modx->getFullTableName(\'_shop_items\')." SET `count`=`count`+{$count} WHERE code=\'{$code}\' AND uniq=\'{$uniq}\' LIMIT 1");
	$modx->runSnippet(\'ShopAction\',array(\'act\'=>\'itogo\'));
}

// Изменение кол-ва
if($act == \'count\')
{
	$modx->db->query("UPDATE ".$modx->getFullTableName(\'_shop_items\')." SET `count`={$count} WHERE code=\'{$code}\' AND uniq=\'{$uniq}\' LIMIT 1");
	
	$modx->runSnippet(\'ShopAction\',array(\'act\'=>\'itogo\'));
}

// Удаление позиции из корзины
if($act == \'delete\')
{
	if ( ! $uniq && $id) {
		$uniq = md5($id);	
	}
	$modx->db->query("DELETE FROM ".$modx->getFullTableName(\'_shop_items\')." WHERE code=\'{$code}\' AND uniq=\'{$uniq}\' LIMIT 1");
	$modx->runSnippet(\'ShopAction\',array(\'act\'=>\'itogo\'));
}

// Удаление всех позиций из корзины
if($act == \'delete_all\')
{
	$modx->db->query("DELETE FROM ".$modx->getFullTableName(\'_shop_items\')." WHERE code=\'{$code}\'");
	$modx->runSnippet(\'ShopAction\',array(\'act\'=>\'itogo\'));
}

// Получение статуса позиции в корзине
if($act == \'stat\')
{
	$uniq= md5($id);
	$rr= $modx->db->query("SELECT id FROM ".$modx->getFullTableName(\'_shop_items\')." WHERE code=\'{$code}\' AND uniq=\'{$uniq}\' LIMIT 1");
	
	if($rr && $modx->db->getRecordCount($rr)) return \'y\';
	elseif($rr) return \'n\';
}

// Проверка товаров из корзины в таблице каталога
if($act == \'check_items_in_catalog\')
{
	$items= $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'items\'));
	if($items)
	{
		foreach($items AS $row) $ids .= (!empty($row[\'id_item\'])?\',\':\'\').$row[\'id_item\'];
		$catitems= $modx->runSnippet(\'DocLister\',array(\'api\'=>true, \'idType\'=>\'documents\', \'documents\'=>$ids,
													   \'selectFields\'=>$selectFields.\',template,deleted,published\',
													   \'tvList\'=>$tvList));
		$catitems= json_decode($catitems, true);
		foreach($items AS $row)
		{
			$flag= false;
			$catitem= $catitems[$row[\'id_item\'] ];
			
			if($catitem[\'id\'] && $catitem[\'template\']==4 && $catitem[\'isfolder\']==0 && $catitem[\'deleted\']==0 && $catitem[\'published\']==1)
			{
				$price= intval($row[\'price\']);
				$tv_price= $catitem[\'tv_price\']*1;
				if($price != $tv_price)
				{
					$pagetitle= $modx->db->escape($catitem[\'pagetitle\']);
					//$art= $modx->db->escape($catitem[\'tv_cat-art\']);
					$price= $modx->db->escape($catitem[\'tv_price\']);
					//$prms= $modx->db->escape($catitem[\'tv_params\']);
				//	$prms= $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'prms\', \'id\'=>$catitem[\'id\']));
				//	$prms= $modx->db->escape($prms);
					
					$modx->db->query("UPDATE ".$modx->getFullTableName(\'_shop_items\')." SET
						`name`=\'{$pagetitle}\',
						`art`=\'\',
						price=\'{$price}\',
						prms=\'\'
					WHERE code=\'{$code}\' AND uniq=\'{$row[\'uniq\']}\' LIMIT 1");
					
					//ed=\'{$ed}\',
				}
			}else{
			 	$modx->db->query("DELETE FROM ".$modx->getFullTableName(\'_shop_items\')." WHERE code=\'{$code}\' AND uniq=\'{$row[uniq]}\' LIMIT 1")	;		
			}
		}
	}
}

// Получение массива всех позиций в корзине
if($act == \'items\')
{
	$rr= $modx->db->query("SELECT * FROM ".$modx->getFullTableName(\'_shop_items\')."
		WHERE code=\'{$code}\' ".($uniq ? "AND uniq=\'{$uniq}\'" : ""));
	if($rr && $modx->db->getRecordCount($rr)) while($row= $modx->db->getRow($rr)) $items[]= $row;
	return (is_array($items) && count($items) ? $items : false);
}

// Кол-во товара в корзине
if($act == \'items_count\')
{
	//$sql = "SELECT COUNT(id) AS cc FROM ".$modx->getFullTableName(\'_shop_items\')." WHERE code=\'{$code}\'";
	
	$rr= $modx->db->query("SELECT SUM(count) AS cc FROM ".$modx->getFullTableName(\'_shop_items\')." WHERE code=\'{$code}\'");
	if($rr && $modx->db->getRecordCount($rr)) return $modx->db->getValue($rr); return \'0\';
}

// Считаем итого
if($act == \'itogo\' || $act == \'summa\')
{
	$modx->runSnippet(\'ShopAction\',array(\'act\'=>\'check_items_in_catalog\'));
	$itogo= 0;
	$items= $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'items\'));
	if($items) foreach($items AS $row) $itogo += $row[\'price\'] * $row[\'count\'];
	if($act == \'summa\') return $itogo; else $modx->db->query("UPDATE ".$modx->getFullTableName(\'_shop_order\')." SET itogo=\'{$itogo}\' WHERE code=\'{$code}\' LIMIT 1");
}

if($act == \'prms\')
{
	$prms= $modx->runSnippet(\'CatalogFilter_Props\', array(\'id\'=>$id, \'values\'=>true));
	if(is_array($prms) && count($prms))
	{
		foreach($prms AS $prm)
		{
			if(is_array($prm[\'values\']) && count($prm[\'values\']))
			{
				$prms_a[$prm[\'cf_id\'] ][\'name\']= $prm[\'name\'] .($prm[\'date\']?\', \'.$prm[\'date\']:\'\');

				foreach($prm[\'values\'] AS $vls)
				{
					$prms_a[$prm[\'cf_id\'] ][\'values\'][]= $vls;
				}
			}
		}
		$prms_a= serialize($prms_a);
	}
	return $prms_a;
}';$s['ShopBasket_Items']='/**
 * ShopBasket_Items
 *
 *
 *
 */
	
$modx->runSnippet(\'ShopAction\',array(\'act\'=>\'check_items_in_catalog\'));
$items= $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'items\'));
if(is_array($items) && count($items))
{
	foreach($items AS $key => $row)
	{
		
		$img= $modx->getTemplateVar(\'9\',\'*\',$row[\'id_item\']);
		//print_r($img);
		$img=$img[\'value\'];
		

		$img= explode(\'||\', $img);
		
		//$img= json_decode($img[\'value\'], true);
		//print_r($img);
		//$img = $img[\'fieldValue\'][0][\'img\'];
			$img= $img[0];
		
		//print $img;
		$img= $modx->runSnippet(\'phpthumb\',array(\'input\'=>$img, \'options\' => \'w=95,far=C\'));
		

		
		$prms_p= \'\';
		$prms= $modx->runSnippet(\'CatalogFilter_Props\', array(\'id\'=>$row[\'id_item\'], \'values\'=>true));
		if(is_array($prms) && count($prms))
		{
			$prms_p= \'<div class="shbi_prms_but"></div>
				<div class="shbi_prms_box">
					<div class="shbi_prms">\';
		 	$ii= 0;
			foreach($prms AS $prm)
			{
				$cc= count($prm[\'values\']);
				if(is_array($prm[\'values\']) && $cc)
				{
					$ii++;
					$prms_p.= \'<div class="shbip_row \'.($ii%2==0?\'shbip_row_alt\':\'\').\'">
						<div class="shbip_lb">\'.$prm[\'name\'].\'</div>
						<div class="shbip_vl">\';

					foreach($prm[\'values\'] AS $vls)
						$prms_p.= \'<div>\'.($cc>=2?\'&mdash; \':\'\') .$vls.\'</div>\';

					$prms_p.= \'</div><br></div>\';
				}
			}
			$prms_p.= \'</div></div>\';
		}
		
		$pp .= \'<div class="itembox \'.($key%2==0 ? \'itembox_alt\' : \'\').\'">
			<div class="item" data-u="\'.$row[\'uniq\'].\'">\';
		
		$pp .= \'<div class="shbi_img">
					<img src="\'.$img.\'" />
				</div>
				
				<div class="shbi_tit">
					<div><a class="as2 font2" href="\'.$modx->makeUrl($row[\'id_item\']).\'">\'.$row[\'name\'].\'</a></div>\';
		if($row[\'art\']) $pp .= \'<div>&mdash;Арт. <span>\'.$row[\'art\'].\'</span></div>\'; //артикул 
		if($row[\'prms\']) {$pp .= \'<div>&mdash; Цвет: <span>\'.$row[\'prms\'].\'</span></div>\';}
		//if($prms_p) $pp .= $prms_p;
		$pp .= \'</div>\';

		$sum= $row[\'price\'] * $row[\'count\'];

		$pp .= \'
				
				<div class="cart-right">
				
				<div class="shbi_cntl shbi_price_cart">
					<div>Цена</div>
					<div><span class="price_cart">\'.$modx->runSnippet(\'Price\',array(\'price\'=>$row[\'price\'], \'round\'=>\'2\')).\'<span class="ruble"> руб.</span> </span></div>
				</div>
				<div class="shbi_cntl shbi_cc">
					<div>Кол-во, \'.$row[\'ed\'].\'</div>
					<div>
						<span class="shbi_minus shbi_plus_minus">[[ico?&n=`minus`]]</span>
						<span class="shbi_ccval"> \'.$row[\'count\'].\' </span>
						<span class="shbi_plus shbi_plus_minus">[[ico?&n=`plus`]]</span>
						<br>
					</div>
				</div>

				<div class="shbi_cntl shbi_sum">
					<div>Сумма</div>
					<div><span class="price_cart">\'.$modx->runSnippet(\'Price\',array(\'price\'=>$sum, \'round\'=>\'2\')).\'<span class="ruble"> руб.</span></span></div>
					<!-- <div class="svgloading"></div> -->
				</div>
		
				<div class="shbi_cntl shbi_del">[[ico?&n=`delete`]]</div>
				<div class="clr"></div>
			</div>
			<!-- <div class="svgloading"></div> -->
			
			</div>
			
		</div>
		\';
		
	}
}
return $pp;';$s['ShopBasket_Itogo']='$orderinfo= $modx->runSnippet(\'ShopOrderCode\',array(\'fields\'=>\'*\'));

$pp .= \'<div class="shb_itogo">
		<div class="shbi_itm shbi_itogosum">
			<div class="shbii_lab">СУММА ЗАКАЗА<br> <br>
				<span class="pricebasket"><strong style="font-size: 22px;">\'.$orderinfo[\'itogo\'].\'<span class="ruble"> руб.</span></strong> </span><br> <br>
			<!--	<div class="svgloading"></div> -->
			</div>
		</div>

		<div class="clr">&nbsp;</div>
		<div class="shbi_errors"></div>

		<div class="shbi_checkout">
			<button class="shop_basket_checkout font2" ENGINE="button" data-code="\'.$orderinfo[\'code\'].\'" data-itogo="\'.$orderinfo[\'itogo\'].\'">Оформить заказ</button>
			<!-- <div class="svgloading"></div><br> -->
		</div>
		
		<div class="politikalink">Нажимая кнопку «Оформить&nbsp;заказ», вы&nbsp;даете согласие на&nbsp;обработку персональных данных в&nbsp;соответствии с&nbsp;<a target="_blank" href="[~13~]">политикой конфиденциальности</a></div>
		
	</div>\';

return $pp;';$s['ShopBasket_Page']='/*
function pre($arr){
	echo \'<pre>\';
	print_r($arr);
	echo \'<pre>\';
}
*/

	$modx->db->query("CREATE TABLE IF NOT EXISTS ".$modx->getFullTableName(\'_shop_order\')." (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `userid` int(11) NOT NULL,
  `status` tinyint(4) NOT NULL,
  `code` varchar(15) NOT NULL,
  `itogo` decimal(10,2) NOT NULL,
  `fio` varchar(63) NOT NULL,
  `email` varchar(63) NOT NULL,
  `phone` varchar(31) NOT NULL,
  `city` varchar(63) NOT NULL,
  `address` varchar(255) NOT NULL,
  `message` varchar(255) NOT NULL,
  `logs` text NOT NULL,
  `checkout` bigint(20) NOT NULL,
  `user` varchar(63) NOT NULL,
  `secret` varchar(63) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;");
	
$modx->db->query("CREATE TABLE IF NOT EXISTS ".$modx->getFullTableName(\'_shop_mail\')." (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `code` varchar(15) NOT NULL,
  `mail` text NOT NULL,
  `result` set(\'y\',\'n\') NOT NULL DEFAULT \'y\',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;");
	
$modx->db->query("CREATE TABLE IF NOT EXISTS ".$modx->getFullTableName(\'_shop_items\')." (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `code` varchar(15) NOT NULL,
  `id_item` int(11) NOT NULL,
  `name` varchar(63) NOT NULL,
  `art` varchar(63) NOT NULL,
  `price` decimal(10,2) NOT NULL,
  `count` int(11) NOT NULL,
  `ed` varchar(15) NOT NULL,
  `prms` text NOT NULL,
  `uniq` varchar(63) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;");


if(isset($_GET[\'c\']) && isset($_GET[\'s\']))
{
	$code= $modx->db->escape($_GET[\'c\']);
	$secret= $modx->db->escape($_GET[\'s\']);
	
	$rr= $modx->db->query("SELECT * FROM ".$modx->getFullTableName(\'_shop_order\')." WHERE code=\'{$code}\' AND secret=\'{$secret}\' LIMIT 1");
	if($rr && $modx->db->getRecordCount($rr))
	{
		$row= $modx->db->getRow($rr);
		
		$pp .= \'<div class="shop_checkout_ok">\';
			
		$pp .= \'<div class="shck_spas">Спасибо,</div>\';
			
		if($row[\'fio\']) $pp .= \'<div class="shck_fio">\'.$row[\'fio\'].\'</div>\';
		
		$pp .= \'<div class="shck_code">заказ <span class="font2">№\'.substr($row[\'code\'],1).\'</span></div>\';
		
		$pp .= \'<div class="shck_ok">&mdash; успешно оформлен!</div>\';
		
		$pp .= \'</div>\';
		
		
		return $pp;
	}
}
	
	

	
// -----------------------------------------------------------------------------------


$orderinfo= $modx->runSnippet(\'ShopOrderCode\',array(\'fields\'=>\'*\'));

//pre($orderinfo);

if( ! $orderinfo)
{
	return \'<p>В Вашей корзине пусто!</p>\';	
}

if ( ! $orderinfo[\'itogo\']) {
	$modx->runSnippet(\'ShopAction\',array(\'act\'=>\'itogo\'));	
}
	
$pp .= \'<div class="shop_basket_box">\';

$pp .= \'<div class="shop_basket_items">\';
$pp .= $modx->runSnippet(\'ShopBasket_Items\');
$pp .= \'</div><!--.shop_basket_items-->\';

$pp .= \'<div class="shop_basket_itogo">\';
$pp .= $modx->runSnippet(\'ShopBasket_Itogo\');
$pp .= \'</div><!--.shop_basket_itogo-->\';

$pp .= \'<div class="shop_basket_form">\';
$pp .= $modx->runSnippet(\'ShopBasket_Form\');
$pp .= \'</div><!--.shop_basket_form-->\';

$pp .= \'<div class="clr">&nbsp;</div></div><!--.shop_basket_box-->\';
$pp .= \'<div class="clr">&nbsp;</div>\';




return $pp;';$s['ShopHeadBasket']='$orderinfo= $modx->runSnippet(\'ShopOrderCode\',array(\'fields\'=>\'*\'));
$cc= $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'items_count\'));
if ($orderinfo != null) {
	$summa = $modx->runSnippet(\'Price\',array(\'price\'=>$orderinfo[\'itogo\'], \'round\'=>\'2\'));
}

return \'<div class="header-btn-box__icon  cart__icon"></div>
		<div class="header__name-btn">Корзина</div><div class="shb_cc">\'.($cc ? $cc : \'0\').\'</div>\';';$s['ShopOrderCode']='$result= false;

$user= $modx->db->escape(\'s\'.session_id());
if( ! $fields) $fields= \'code\';
$fieldsqq= $modx->db->escape($fields);
$rr= $modx->db->query("SELECT {$fieldsqq} FROM ".$modx->getFullTableName(\'_shop_order\')."
	WHERE user=\'{$user}\' AND status=\'".($nullstatus?"0":"1")."\' AND checkout=0 ORDER BY id LIMIT 1");

//return "SELECT {$fieldsqq} FROM ".$modx->getFullTableName(\'_shop_order\')." WHERE user=\'{$user}\' AND status=\'1\' ORDER BY id LIMIT 1";
if($rr && $modx->db->getRecordCount($rr))
{
	$row= $modx->db->getRow($rr);
	if(strpos($fields,\',\')===false && strpos($fields,\'*\')===false) $result= $row[trim($fields,"`")];
	else $result= $row;
}

if($result !== false) return $result;


if($create)
{
	// LK ---------------------------------------------
	$webuserinfo= $_SESSION[\'webuserinfo\'][\'info\'];
	$lkqq= "";
	if($webuserinfo[\'fio\'])     $lkqq .= ",fio=       \'{$webuserinfo[fio]}\'";
	if($webuserinfo[\'phone\'])   $lkqq .= ",phone=     \'{$webuserinfo[phone]}\'";
	if($webuserinfo[\'email\'])   $lkqq .= ",email=     \'{$webuserinfo[email]}\'";
	if($webuserinfo[\'city\'])    $lkqq .= ",city=      \'{$webuserinfo[city]}\'";
	if($webuserinfo[\'address\']) $lkqq .= ",address=   \'{$webuserinfo[address]}\'";
	// LK --------------------------------------------	
	
	
	$code= \'w\'.(date(\'Y\')-2016).date(\'md\');
	$num= 0;
	$rr= $modx->db->query("SELECT COUNT(id) AS cc FROM ".$modx->getFullTableName(\'_shop_order\')." WHERE code LIKE \'{$code}%\'");
	if($rr && $modx->db->getRecordCount($rr)) $num= $modx->db->getValue($rr);
	do{
		$num++;
		$rr= $modx->db->query("SELECT id FROM ".$modx->getFullTableName(\'_shop_order\')." WHERE code=\'{$code}{$num}\' LIMIT 1");
	}while($rr && $modx->db->getRecordCount($rr));
	$code .= $num;
	$modx->db->query("INSERT INTO ".$modx->getFullTableName(\'_shop_order\')."
		SET status=\'".($nullstatus?"0":"1")."\', code=\'{$code}\', logs=\'".date(\'d.m.Y, H:i\')." | Корзина создана\', user=\'{$user}\'". $lkqq);
	
	//return "INSERT INTO ".$modx->getFullTableName(\'_shop_order\')." SET status=\'1\', code=\'{$code}\', logs=\'".date(\'d.m.Y, H:i\')." | Корзина создана\', user=\'{$user}\'". $lkqq;
	
	$result= $modx->runSnippet(\'ShopOrderCode\',array(\'fields\'=>$fields, \'nullstatus\'=>$nullstatus));
	
}else $result= false;

return $result;';$s['Price']='/**
 * Price
 *
 * Цена
 *
 * @version     10.0
 *
 *
 *
 *
 */
	
if(empty($delimiter)) $delimiter= \'&thinsp;\';
if(empty($round)) $round= 0;
$price= str_replace(",", ".", $price);
$price= preg_replace("/[^0-9\\.]/", "", $price);
$price= round($price, $round);
if($price<=0 || $price==\'\') return "&mdash;";
$tmp= explode(",", $price);
$itogo_price= \'\';
$ii= 0;
for($kk=strlen($tmp[0])-1; $kk>=0; $kk--)
{
	$ii++;
	$itogo_price= substr($tmp[0], $kk, 1).$itogo_price;
	if($ii%3==0 && $kk>0)
	{
		$itogo_price= $delimiter.$itogo_price;
	}
}
if($tmp[1]>0 || $print_if_nol_kopeek)
{
	if(strlen($tmp[1])<$round) $tmp[1]= str_pad($tmp[1], $round, \'0\', STR_PAD_RIGHT);
	if($tmp[1]) $itogo_price .= \',\'.$tmp[1];
}
return $itogo_price;';$s['ico']='return \'<svg class="svgicon svgicon_\'.$n.\'"><use xlink:href="#icon-\'.$n.\'"></use></svg>\';';$s['AJAX']='$id= intval( $_GET[ \'id\' ] );
	$act1= $_GET[\'a1\'];
	$act2= $_GET[\'a2\'];

if($act1 == \'shop\')
{
	if($act2 == \'add\' || $act2 == \'count\' || $act2 == \'delete\' || $act2 == \'delete_all\' || $act2 == \'data\' || $act2 == \'checkout\' || $act2 == \'items_count\')
	{
		$result= $modx->runSnippet(\'ShopAction\',array(\'act\'=>$act2, \'id\'=>$_GET[\'id\'], \'size\'=>$_GET[\'size\'], \'count\'=>$_GET[\'count\'], \'uniq\'=>$_GET[\'u\'],
									\'nm\'=>$_GET[\'nm\'], \'vl\'=>$_GET[\'vl\'], \'itogo\'=>$_GET[\'itogo\'], \'post\'=>$_POST));

		if($act2 != \'add\' && $act2 != \'checkout\' && $act2 != \'data\' && $act2 != \'items_count\') $result= $modx->runSnippet(\'ShopBasket_Items\');
		return $result;
	}
	
	if($act2 == \'itogo\')
	{
		$result= $modx->runSnippet(\'ShopBasket_Itogo\');
		return $result;
	}
	
	return;
}


if($_GET[\'act\'] == \'catalogfilter_get_items\')
{
	return $modx->runSnippet(\'CATALOG\', array(\'id\'=>$id, \'type\'=>\'content\', \'_x\'=>$_REQUEST[\'_x\']));
}

if($_GET[\'act\'] == \'catalogfilter_sort_params\')
{
	$prms= trim($_GET[\'prms\']);
	if( ! $prms) return;
	$prms= explode(\'/\',$prms);
	if(is_array($prms) && count($prms))
	{
		foreach($prms AS $row)
		{
			$row= explode(\',\',$row);
			$id= intval(array_shift($row));
			
			
			$interval= false;
			$rr= $modx->db->query("SELECT type FROM ".$modx->getFullTableName(\'_catfilter\')." WHERE id={$id} LIMIT 1");
			if($rr && $modx->db->getRecordCount($rr))
			{
				$rr= $modx->db->getRow($rr);
				if($rr[\'type\'] == \'price\' || $rr[\'type\'] == \'interval\') $interval= true;
			}
			
			if( ! $interval) sort($row);
			elseif( ! $row[0] && ! $row[1]) continue;
			
			$prms_a[$id]= implode(\'-\',$row);
		}
		if(is_array($prms_a) && count($prms_a))
		{
			ksort($prms_a);
			foreach($prms_a AS $key => $row)
			{
				$result .= (!empty($result)?\'/\':\'\') .$key.\'-\'.$row;
			}
		}
	}
	return $result;
}


if($act1 == \'favorite\')
{
	if($_SESSION[\'favorite\'][$id])
	{
		unset($_SESSION[\'favorite\'][$id]);
		$stat= \'n\';
	}else{
		$_SESSION[\'favorite\'][$id]= $id;
		$stat= \'y\';
	}
	return \'{"stat":"\'.$stat.\'", "cc":"\'.count($_SESSION[\'favorite\']).\'"}\';
}';$s['buildTreeCat']='/**
 * buildTreeCat
 *
 * Для импорта из XLS,CSV
 *
 * @version 2
 * @date 	16.10.2018
 * @category 	by _PX mod SG
 *
 */		
	
if (!is_numeric($root)) return;
$content = \'\';
$sql = "SELECT id, pagetitle FROM  ". $modx->getFullTableName( \'site_content\' ) ." WHERE parent = {$root} AND isfolder = 1 ";
if ( $result = $modx->db->query( $sql)) {
	if ($modx->db->getRecordCount($result) > 0) {
		while($row = $modx->db->getRow($result)){
			$content .= \'<div class="treeElem">\';
			$content .= \'<span class="pickFolder" data-idcat="\'.$row[\'id\'].\'">\'.$row[\'pagetitle\'].\'</span>\';
			$content .= $modx->runSnippet("buildTreeCat" , array(\'root\' => $row[\'id\'] ));
			$content .= \'</div>\';
				
		}
	}
}
return $content;';$s['data_to_modx']='error_reporting(E_ALL);
ini_set(\'display_errors\', TRUE);
ini_set(\'display_startup_errors\', TRUE);

require_once "xls/Classes/PHPExcel.php";
$file = "xls/file.xls";  
$spreadsheet = PHPExcel_IOFactory::load($file); // Загружаем файл
$objWorksheet = $spreadsheet->getActiveSheet();
$worksheet = $spreadsheet->setActiveSheetIndex(0); // Выбираем первый лист

$i = 0;
$arrLevel = [];

foreach ($worksheet->getRowDimensions() as $rowDimension) {
    $i++;
    $arrLevel[$i][\'level\'] = $rowDimension->getOutlineLevel(); // Определяем уровень вложенности
}
$highestColumn = $worksheet->getHighestColumn(); // e.g \'F\'

foreach ($objWorksheet->getRowIterator() as $row) {    
    $cellIterator = $row->getCellIterator();
    $cellIterator->setIterateOnlyExistingCells(true);

    foreach ($cellIterator as $cell) {
        $arrLevel[$row->getRowIndex()]["excel"][$cell->getColumn()] = $cell->getValue(); // Объединяем глубину вложенности и данные из столбцов и строк
    }
}
echo "<pre>";
print_r($arrLevel);
echo "</pre>";
exit();


// Подключаем библиотеку
require_once "xls/Classes/PHPExcel.php";

// Функция преобразования листа Excel в таблицу MySQL, с учетом объединенных строк и столбцов.
// Значения берутся уже вычисленными. Параметры:
//     $worksheet - лист Excel
//     $connection - соединение с MySQL (mysqli)
//     $table_name - имя таблицы MySQL
//     $columns_name_line - строка с именами столбцов таблицы MySQL (0 - имена типа column + n)

function excel2mysql($worksheet, $connection, $table_name, $columns_name_line = 0) {
    // Проверяем соединение с MySQL
    if (!$connection->$modx->db->disconnect() ) {
        // Строка для названий столбцов таблицы MySQL
        $columns_str = "";
        // Количество столбцов на листе Excel
        $columns_count = PHPExcel_Cell::columnIndexFromString($worksheet->getHighestColumn());

        // Перебираем столбцы листа Excel и генерируем строку с именами через запятую
        for ($column = 0; $column < $columns_count; $column++) {
            $columns_str .= ($columns_name_line == 0 ? "column" . $column : $worksheet->getCellByColumnAndRow($column, $columns_name_line)->getCalculatedValue()) . ",";
        }

        // Обрезаем строку, убирая запятую в конце
        $columns_str = substr($columns_str, 0, -1);

        // Количество строк на листе Excel
        $rows_count = $worksheet->getHighestRow();

        // Перебираем строки листа Excel
        for ($row = $columns_name_line + 1; $row <= $rows_count; $row++) {
            // Строка со значениями всех столбцов в строке листа Excel
            $value_str = "";

            // Перебираем столбцы листа Excel
            for ($column = 0; $column < $columns_count; $column++) {
                // Строка со значением объединенных ячеек листа Excel
                $merged_value = "";
                // Ячейка листа Excel
                $cell = $worksheet->getCellByColumnAndRow($column, $row);

                // Перебираем массив объединенных ячеек листа Excel
                foreach ($worksheet->getMergeCells() as $mergedCells) {
                    // Если текущая ячейка - объединенная,
                    if ($cell->isInRange($mergedCells)) {
                        // то вычисляем значение первой объединенной ячейки, и используем её в качестве значения
                        // текущей ячейки
                        $merged_value = $worksheet->getCell(explode(":", $mergedCells)[0])->getCalculatedValue();
                        break;
                    }
                }

                // Проверяем, что ячейка не объединенная: если нет, то берем ее значение, иначе значение первой
                // объединенной ячейки
                $value_str .= "\'" . (strlen($merged_value) == 0 ? $cell->getCalculatedValue() : $merged_value) . "\',";
            }

            // Обрезаем строку, убирая запятую в конце
            $value_str = substr($value_str, 0, -1);

            // Добавляем строку в таблицу MySQL
            // $connection->query("INSERT INTO " . $table_name . " (" . $columns_str . ") VALUES (" . $value_str . ")");
        }
    } else {
        return false;
    }

    return true;
}


// Соединение с базой MySQL
$connection = $modx->db->connect();

// Выбираем кодировку UTF-8
$connection->set_charset("utf8");

// Загружаем файл Excel
$PHPExcel_file = PHPExcel_IOFactory::load("xls/file.xls");


// Преобразуем первый лист Excel в таблицу MySQL
$PHPExcel_file->setActiveSheetIndex(0);
echo excel2mysql($PHPExcel_file->getActiveSheet(), $connection, "excel2mysql0", 1) ? "OK\\n" : "FAIL\\n";

// Перебираем все листы Excel и преобразуем в таблицу MySQL
/*
foreach ($PHPExcel_file->getWorksheetIterator() as $index => $worksheet) {
  echo excel2mysql($worksheet, $connection, "excel2mysql" . ($index != 0 ? $index : ""), 1) ? "OK\\n" : "FAIL\\n";
}
*/';$s['AjaxSearch']='return require MODX_BASE_PATH.\'assets/snippets/ajaxSearch/snippet.ajaxSearch.php\';';$s['search_ajax_tema']='function checkValues($value) {
    $value = trim($value);
    if (get_magic_quotes_gpc()) {
        $value = stripslashes($value);
    }

    $value = strtr($value, array_flip(get_html_translation_table(HTML_ENTITIES)));
    $value = strip_tags($value);
    // $value = mysql_real_escape_string($value);
    return $value;
}
$rec = checkValues($_REQUEST[\'val\']);
if ($rec) {
    $sql = "SELECT * FROM " . $modx->getFullTableName(\'site_content\') . " WHERE pagetitle like \'%$rec%\' AND published like 1 AND isfolder like 0 AND template like 4";
}
$rsd = $modx->db->query($sql);
$total = $modx->db->getRecordCount($rsd);
?>
<?php
while ($rows = $rsd->fetch_assoc()) {
    ?>

    <div class="each_rec"><a href="<?php print $modx->makeUrl($rows[\'id\']) ?>" target="_blank"><?php echo $rows[\'pagetitle\']; ?></a></div>

    <?php
}

if ($total == 0) {
    echo \'<div class="no-rec">не найдено</div>\';
}';$s['catalogFilter__2']='$output = array();
$result = $modx->db->query("SELECT id, pagetitle, parent FROM  " . $modx->getFullTableName(\'site_content\') . " WHERE isfolder=0 AND template=4");
while ($row = $modx->db->getRow($result)) {
    $output[$row[\'parent\']] = $row[\'pagetitle\'];
}

$pi_val = $modx->db->escape(\'{"fieldValue":[{"param_id":"7","cat_name":"","list_yes":"1","fltr_yes":"1","fltr_type":"6","fltr_name":"Цена","fltr_many":"","fltr_href":""},{"param_id":"22","cat_name":"","list_yes":"1","fltr_yes":"1","fltr_type":"1","fltr_name":"Страна","fltr_many":"1","fltr_href":""},{"param_id":"20","cat_name":"","list_yes":"1","fltr_yes":"1","fltr_type":"1","fltr_name":"Бренд","fltr_many":"1","fltr_href":""}],"fieldSettings":{"autoincrement":1}}\');

foreach ($output as $putin_k => $putin_v) {
    $modx->db->query("UPDATE " . $modx->getFullTableName(\'site_content\') . " SET template=5 WHERE template=4 AND id=$putin_k ");
	$modx->db->query("DELETE FROM " . $modx->getFullTableName(\'site_content\') . " WHERE tmplvarid=23");
    $modx->db->query("INSERT INTO " . $modx->getFullTableName(\'site_tmplvar_contentvalues\') . " SET tmplvarid=23, value=\'$pi_val\', contentid=$putin_k ");
}

echo "<pre>";
print_r($output);
echo "</pre>";';$s['ListChild']='/**
 * @name ListChild
 * @author Alpatov Aleksey i--gu.ru
 * @version 0.3.2
 * @desc Формирует список дочерних документов для указанных папок в виде раскрывающегося списка select для frontend или в виде DropDown List Menu, Listbox, Check Box или Radio Options для backend. Выводит количество найденных документов.
 *
 * &docid - id папок (через запятую), дочерние документы которых необходимо отобразить. Значение по умолчанию - текущий документ.
 * &depth - глубина сканирования. Значение по умолчанию 1.
 * &published - Выводить неопубликованные/опубликованные документы (0 | 1). Значение по умолчанию 1.
 * &deleted - Выводить неудаленные/удаленные документы (0 | 1). Значение по умолчанию 0. 
 * &where - дополнительные условия запроса в БД (соответствует where в MySQL). Значения по умолчанию нет. Во фронтенде необходимо заменять "=" на "@eq".
 * &count - (0 | 1) 1 - вывод количества найденных документов. Значение по умолчанию - 0 (работа в обычном режиме). При использовании параметра count со значением 1, параметры tpl, name, selectedValue, value и param не используются.
 * &separator - разделитель между выводимыми документами. Значение по умолчанию \'\'.
 * &param - параметр для выборки. Любое поле документа, кроме TV-параметров. Значение по умолчанию \'pagetitle\'. 
 * &value - значение параметра для выборки. Любое поле документа, кроме TV-параметров. Значение по умолчанию \'id\'. 
 * &desc - параметр для вывода описания к документу. Любое поле документа, кроме TV-параметров. Значение по умолчанию \'introtext\'.  
 * &sort - поле для сортировки. Значение по умолчанию - &param (параметр для выборки).  
 * &dir - направление сортировки (ASC | DESC). Значение по умолчанию ASC. 
 * &limit - максимальное количество документов. Значение по умолчанию: без ограничения. 
 * &emptyfield - не добавлять/добавлять пустое поле в начале списка (0 | 1). Значение по умолчанию 1.
 * &name - (только для вызова во frontend) Значение атрибута name тега select. Используется для запоминания выбранных значений. Значения по умолчанию нет.
 * &selectedValue - значение для плейсхолдера [+selected+]. По умолчанию: \'selected="selected"\'. Возможные значения: selected | selected="selected" | checked | checked="checked". 
 * &tpl - (только для вызова во frontend) имя чанка с шаблоном. Значение по умолчанию: \'<option value="[+value+]" [+selected+]>[+param+]</option>\'. 
 * Доступные плейсхолдеры: 
 * [+param+] - название параметра для выборки;
 * [+value+] - значение параметра для выборки;
 * [+desc+] - краткое описание; 
 * [+selected+] - место для вывода атрибута selected для запоминания выбранных значений (см. &selectedValue);
 * 
 ***** 1. Пример использования в backend (административной панели) *****
 * Сниппет сформирует список в виде: параметр1==значение1||параметр2==значение2 
 * Создайте TV-параметр с типом ввода DropDown List Menu
 * В возможных значениях укажите: 
 * @EVAL return $modx->runSnippet(\'ListChild\', array(\'docid\' => 10, \'where\' => \'isfolder = 1 and hidemenu = 0\')); 
 * Отобразит все опубликованные и неудаленные дочерние контейнеры папки 10, которые отмечены для показа в меню.
 *  
 * Или так:
 * @EVAL return $modx->runSnippet(\'ListChild\', array(\'docid\' => \'10,11,12\', \'depth\' => 2)); 
 * Отобразит все опубликованные и неудаленные дочерние документы, в том числе и контейнеры, папок 10, 11 и 12 до второго уровня вложенности.
 *  
 ***** 2. Пример использования в frontend (пользовательской части) *****
 * Сниппет сформирует список в виде: <option value="значение">параметр</option>
 * Разместите в шаблоне следующий код: 
 * <select>[[ListChild? &docid=`10` &depth=`2` &where=`isfolder = 0`]]</select>
 * Отобразит в виде раскрывающегося списка все опубликованные и неудаленные дочерние документы папки 10, до второго уровня вложенности, которые не являются контейнерами.
 * 
 ***** 3. Пример c использованием шаблона в frontend (пользовательской части) *****
 * Задача - вывести не в виде раскрывающегося списка, а в виде переключателей, с запоминанием выбранного значения
 * Разместите в шаблоне следующий код: 
 * [[ListChild? &docid=`10` &name=`country` &tpl=`countryTpl` &selectedValue=`checked` &emptyfield=`0`]]
 * Шаблон countryTpl: \'<input type="radio" name="country" value="[+value+]" [+selected+]> [+param+]<br>\'
 * Отобразит в виде переключателей все опубликованные и неудаленные дочерние документы папки 10, без пустого поля в начале списка. 
 * 
 ***** 4. Вывод количества найденных документов *****
 * Разместите в шаблоне следующий код: 
 * [[ListChild? &docid=`10`  &count=`1`]]  
 * Отобразит количество опубликованных и неудаленных дочерних документов папки 10.  
 * 
 ***** 5. Вывод идентификаторов найденных документов *****
 * Разместите в шаблоне следующий код: 
 * [[ListChild? &docid=`10` &tpl=`idTpl` &emptyfield=`0` &separator=`,`]]  
 * Чанк idTpl:
 * [+value+]
 * Отобразит список id всех опубликованных и неудаленных дочерних документов папки 10, разделенных запятой.  
 * Или так: 
 * [[ListChild? &docid=`10` &tpl=`idTpl` &emptyfield=`0` &separator=`, ` &value=`pagetitle`]]  
 * Отобразит заголовки всех опубликованных и неудаленных дочерних документов папки 10, разделенных запятой с пробелом. Чанк idTpl такой же.
 **/

$docid = (isset($docid))? $docid: $modx->documentIdentifier; 
$depth = (isset($depth))? $depth: 1; 
$where = (isset($where))? $where: \'\'; 
$where = str_replace(\'@eq\', \'=\', $where);
$published = (isset($published))? $published: 1; 
$deleted = (isset($deleted))? $deleted: 0; 
$param = (isset($param))? $param: \'pagetitle\'; 
$value = (isset($value))? $value: \'id\'; 
$desc = (isset($desc))? $desc: \'introtext\'; 
$sort = (isset($sort))? $sort: $param; 
$dir = (isset($dir))? $dir: \'ASC\';
$limit = (isset($limit))? $limit: \'\';
$count = (isset($count))? $count: 0; 
$separator = (isset($separator))? $separator: \'\'; 
$emptyfield = (isset($emptyfield))? $emptyfield: \'1\'; 
$name = (isset($name))? $name: \'\'; 
$selectedValue = (isset($selectedValue))? $selectedValue: \'selected="selected"\'; 
if (!isset($tpl)) $useTpl = true;
if (!isset($tpl)) $tpl = \'<option value="[+value+]" [+selected+]>[+param+]</option>\';

if (!function_exists(\'parseString\')) {
    function parseString($tpls,$data,$prefix = \'[+\',$suffix = \'+]\') {
        foreach($data as $k => $v) {
            $tpls = str_replace($prefix.(string)$k.$suffix, (string)$v, $tpls);
        }
        return $tpls;
    };
}

// превращаем список папок в массив
$docid = explode(\',\', $docid);

// убираем пробелы
foreach ($docid as $key => $val) {$docid[$key] = trim($val);}

// создаем массив 
$childID = array();  

//получаем список ID дочерних документов для всех указанных папок
for ($x=0; $x<count($docid); $x++) {
$childID1 = $modx->getChildIds($docid[$x], $depth);
$childID = array_merge($childID,$childID1);
}

//получаем массив документов
$childs = $modx->getDocuments($childID, $published, $deleted, $param . \',\' . $value . \',\' . $desc, $where, $sort, $dir, $limit);

//получаем количество найденных документов
$countChild = count($childs);

// добавляем пустое поле в начале списка
if ($emptyfield) {
array_unshift($childs, ""); 
} 

$out = array();
// формируем список
switch($count){
case 0: 
if ($modx->isBackend())
{
	foreach($childs as $child) {
	$out[] = $child[$param] . \'==\' . $child[$value];
	}
	return implode(\'||\', $out);	
}
else { 	
	foreach($childs as $child) {
		if ($_REQUEST[$name]==$child[$value]) {$selected = $selectedValue;} else {$selected = \'\';}
		if ($useTpl) {
		$out[] = parseString($tpl,array(\'param\'=>$child[$param],\'value\'=>$child[$value],\'selected\'=>$selected));
		} else {
		$out[] = $modx->parseChunk($tpl,array(\'param\'=>$child[$param],\'value\'=>$child[$value],\'desc\'=>$child[$desc],\'selected\'=>$selected),\'[+\',\'+]\');
		}
	}
	return implode($separator, $out);	
}
break;
case 1: // выводим количество документов
	return $countChild;	
break;
}';$s['Ditto']='return require MODX_BASE_PATH.\'assets/snippets/ditto/snippet.ditto.php\';';$s['DLRequest']='/**
 * DLRequest
 *
 * Snippet to pass $_REQUEST parameters to other snippets
 *
 * @category    snippet
 * @version     1.0.0
 * @license     http://www.gnu.org/copyleft/gpl.html GNU Public License (GPL)
 * @internal    @properties
 * @internal    @modx_category Content
 * @internal    @installset base, sample
 */

return require MODX_BASE_PATH.\'assets/snippets/DLRequest/snippet.DLRequest.php\';';$s['eCatalogFilter']='//Filter Fields Settings
$filter = array();

//Radio, Select & Text Fields Type
if($_GET[\'country\']) {
    $filter[] = \'country=\'.$_GET[\'country\'];
}

//Two Text Fields From To
if($_GET[\'price_from\']) {
    $filter[] = \'price>=\'.$_GET[\'price_from\'];
}
if($_GET[\'price_to\']) {
    $filter[] = \'price<=\'.$_GET[\'price_to\'];
}

//Checkbox Type
if($_GET[\'brand\']) {
    $filter[] = \'brand=1\';
}

//End Settings

//Sort
if($_GET[\'sortby\']) {
    $sortby = $_GET[\'sortby\'];
} else {
    $sortby = \'pagetitle\';
}
if($_GET[\'sortdir\']) {
    $sortdir = $_GET[\'sortdir\'];
} else {
    $sortdir = \'asc\';
}
//End Sort

//Offset
$offset = 0;
if($_GET[\'offset\']){
    $offset = $_GET[\'offset\'];
}

if($filter) {
	// $where = $modx->toJSON(array($filter));
    $where = json_encode(array($filter));
} else {
    $where = \'\';
}


$tvList= \'cat-img, img, price, popul, intro-prod\';  	// Перечисляем TV-параметры, необходимые для вывода 
$tplCatItem = \'catalog__item\'; 
$params_count = array(
    \'tvList\' => $tvList,
	\'tpl\'    => $tplCatItem, 
	\'orderBy\'=> \'menuindex ASC\',
	\'filters\'=> \' AND(content:isfolder:=:0) \',
	\'tvPrefix\' => \'\',
	\'paginate\' => \'pages\',
	\'display\' => \'\',
	\'TplNextP\' => \'\',
	\'TplPrevP\' => \'\',
);

$count = $modx->runSnippet(\'DocLister\',$params_count);
$count = count(explode(\',\',$count))-1;
$modx->setPlaceholder(\'count\',$count);

$params = array(
    \'tvList\' => $tvList,
	\'tpl\'    => $tplCatItem, 
	\'orderBy\'=> \'menuindex ASC\',
	\'filters\'=> \' AND(content:isfolder:=:0) \',
	\'tvPrefix\' => \'\',
	\'paginate\' => \'pages\',
	\'display\' => \'\',
	\'TplNextP\' => \'\',
	\'TplPrevP\' => \'\',
);

$more = $count - $offset - $limit;
$lim = $more > $limit ? $limit : $more;

$button = \'\';
if($more > 0){
    $button = \'<div class="ajax-filter-count" data-count="\'.$count.\'"><a href="#" class="ajax-more">Загрузить еще \'.$lim.\' из \'.$more.\'</a></div>\';
}

return $modx->runSnippet(\'DocLister\',$params).$button;


/*
КОРЕЯ (РЕСПУБЛИКА)
РОССИЯ
ФРАНЦИЯ
КИТАЙ
ИТАЛИЯ
ИСПАНИЯ
США
БЕЛАРУСЬ
ГЕРМАНИЯ
ЧЕХИЯ
СЛОВЕНИЯ
ДАНИЯ
АВСТРИЯ
ФИНЛЯНДИЯ
ГРЕЦИЯ
НИДЕРЛАНДЫ
*/';$s['GetIdOnLvl']='/**
 * GetIdOnLvl
 *
 * @version   6.0
 * @date      16.06.2017
 *
 *
 *
 */
	
$doc= $modx->getDocument( $id, \'id,parent\'.( $fields ? \',\' : \'\' ).$fields );
$list[]= $doc;
while( $id != $koren && $doc[ \'parent\' ] != $koren && $doc[ \'parent\' ] != 0 )
{
	$doc= $modx->getDocument( $doc[ \'parent\' ], \'id,parent\'.( $fields ? \',\' : \'\' ).$fields );
	$list[]= $doc;
}
if( $doc[ \'parent\' ] == 0 )
{
	$list[]= array( \'id\'=>0 );
}elseif( $doc[ \'parent\' ] == $koren ){
	$doc= $modx->getDocument( $doc[ \'parent\' ], \'id,parent\'.( $fields ? \',\' : \'\' ).$fields );
	$list[]= $doc;
}
$list[]= false;
$list= array_reverse( $list );
return ( $lvl ? $list[ $lvl ][ ( $prm ? $prm : \'id\' ) ] : $list );';$s['CATALOG']='/**
 * CATALOG
 *
 * Каталог
 *
 * @version 7.1
 * @date    20.07.2017
 *
 *
 *
 *
 *
 *
 *
 *
 */
	
$catalogroot= 4; // Корень каталога

$itemid_prefix= \'i_\';

$items_in_page= 20; // Пагинация
$paginate_prefix= \'page_\';

$selectFields= \'c.id,pagetitle,isfolder,content\'; // Для DocLister
$tvList= \'cat-img, img, price, popul, intro-prod\'; // Для DocLister

//-----------------------------------------------------------------------------------

if( ! $id) $id= $modx->documentIdentifier;
if($id==$catalogroot) return;

$item= $modx->getDocument($id,\'isfolder,parent\');

if( ! $item[\'isfolder\'])
{
	$pp_items= \'<div class="catalog_page">\';
	
	$pp_items .= $modx->runSnippet(\'DocLister\',array(\'idType\'=>\'documents\', \'documents\'=>$id, \'selectFields\'=>$selectFields, \'tvList\'=>$tvList,
											   \'tpl\'=>\'catalog_itemTpl_Page\',
											   \'prepare\'=>\'catalogItemPrepare\',
											  ));
	
	$pp_items .= \'<br></div><!--.catalog_page-->\';
	
	
// ---------------------------------------------------------------------------------------------------------------------

}else{
	$idType= \'parents\';
	$ids= $id;
	$page= 1;
	
	if($modx->urlXParams) $_x= $modx->urlXParams;
	if($_x)
	{
		$param_id= 0;
		
		$_xe= $_x;
		$_xp= $_x;
		
		if(strpos($_x, $paginate_prefix) !== false)
		{
			$page= false;
			$_xp= substr($_xp, 0, strrpos($_xp, \'/\'.$paginate_prefix));
		}
		
		$_xe= explode(\'/\', $_x);
		
		foreach($_xe AS $key => $row)
		{
			if( ! $page && $key==count($_xe)-1)
			{
				if(strpos($row, $paginate_prefix) === 0)
					$page= intval(substr($row, strlen($paginate_prefix)));
					else $page404= true;
				break;
			}
			
			$row= explode(\'-\', $row);
			$foo= intval(array_shift($row));
			if($foo <= $param_id)
			{
				$page404= true;
				break;
			}else{
				$param_id= $foo;
				
				$rr= $modx->db->query("SELECT type FROM ".$modx->getFullTableName(\'_catfilter\')." WHERE id={$param_id} LIMIT 1");
				if($rr && $modx->db->getRecordCount($rr))
				{
					$rr= $modx->db->getRow($rr);
					if($rr[\'type\'] == \'price\' || $rr[\'type\'] == \'interval\') continue;
				}
				
				$foo= 0;
				if(is_array($row) && count($row))
				{
					foreach($row AS $k => $p)
					{
						if( ! $k) continue;
						$p= intval($p);
						if($p <= $foo)
						{
							$page404= true;
							break 2;
						}else{
							$foo= $p;
						}
					}
				}else $page404= true;
			}
		}
	}
	
	if($page404 || ! $page) $modx->sendErrorPage();
	
	if($_xp)
	{
		$ids= $modx->runSnippet(\'CatalogFilter_Items\', array(\'id\'=>$id, \'_x\'=>$_xp));
		if($ids) $idType= \'documents\';
	}
	
	$pp_pages_sort = $modx->makeUrl($id);
	$pp_pages_sort .= ($_xp || $page>=2 ? \'x/\' : \'\');
	$pp_pages_sort .= ($_xp ? $_xp.\'/\' : \'\');
	$pp_pages_sort .= ($page>=2 ? \'page_\'.$page.\'/\' : \'\');	
	
	
	
	
	
	$sort= array(
		\'pagetitle\' => [\'pagetitle\',  \'BINARY\'],
		\'article\'   => [\'article\',    \'BINARY\'],
		\'priceDown\' => [\'price DESC\', \'DECIMAL\'],
		\'priceUp\'   => [\'price ASC\',  \'DECIMAL\'],
	);
	if(isset($_GET[\'sort\']))
	{
		$orderby= isset($sort[$_GET[\'sort\'] ]) ? $_GET[\'sort\'] : \'pagetitle\';
		$_SESSION[\'catalog_sort\']= $orderby;
	}
	if( ! $_SESSION[\'catalog_sort\']) $_SESSION[\'catalog_sort\']= \'pagetitle\';
	$orderby= $_SESSION[\'catalog_sort\'];
	
	$pp_sorts = \'<div class="orderby">		
					<p class="sort font2">Сортировка
						<span class="pgn_i"><a href="\'.$pp_pages_sort.\'?sort=article" class="\'.($orderby==\'article\' ? \'pgn_a\' : \'\').\'">Артикул</a></span>
						<span class="pgn_i"><a href="\'.$pp_pages_sort.\'?sort=pagetitle" class="\'.($orderby==\'pagetitle\' ? \'pgn_a\' : \'\').\'">Наименование</a></span>
						<span class="pgn_i"><a href="\'.$pp_pages_sort.\'?sort=\'.($orderby==\'priceUp\' ? \'priceDown\' : \'priceUp\').\'" class="\'.($orderby==\'priceDown\' || $orderby==\'priceUp\' ? \'pgn_a\' : \'\').\'">Цена \'.($orderby==\'priceDown\' ? \'↓\' : \'↑\').\'</a></span>
						</p><br></div>\';
	
	$orderby= $sort[$orderby];
	
	
	
	
	
	
		
	$pp_items= $modx->runSnippet(\'DocLister\',array(\'idType\'=>$idType, $idType=>$ids, \'selectFields\'=>$selectFields, \'tvList\'=>$tvList,
												   \'id\'         => \'items\',
												   \'showParent\' => 0,
												   \'tpl\'        => \'catalog_itemTpl\',
												   \'prepare\'    => \'catalogItemPrepare\',
												   \'depth\'      => 5,
												   // \'sortType\'   => \'other\',
												   // \'orderBy\'    => $orderby[0],
												   // \'tvSortType\' => $orderby[1],
												   // \'offset\'     => ($page-1)*$items_in_page,
												   // \'display\'    => $items_in_page,
												   \'paginate\'   => \'pages\'
												  ));
	
	$total_pages= $modx->getPlaceholder(\'items.pages\');
	
	/*
	if($total_pages>=2)
	{
		$pp_pages= \'<div class="pagination"><div class="pgn_i pgn_tit font2">Страницы</div>\' ."\\n";
		
		//$prev= ($page <= 2 ? false : $page-1);
		//if($prev) $pp_pages .= \'<div class="pgn_i pgn_prev font2"><a href="\'.$modx->makeUrl($id) .\'x/\' .($_xp?$_xp.\'/\':\'\') .$paginate_prefix.$prev.\'/"> < </a></div>\';
		
		$visible_ot= $page -3;
		$visible_do= $page +3;
		
		for($ii=1; $ii<=$total_pages; $ii++)
		{
			if($ii >= 3 && $ii < $visible_ot)
			{
				if( ! $foo)
				{
					$pp_pages .= \'<div class="pgn_i pgn_toch font2">...</div>\' ."\\n";
					$foo= true;	
				}
				continue;
			}
			if($ii <= $total_pages-2 && $ii > $visible_do)
			{
				if( ! $bar)
				{
					$pp_pages .= \'<div class="pgn_i pgn_toch font2">...</div>\' ."\\n";
					$bar= true;	
				}
				continue;
			}
						
			$pp_pages .= \'<div class="pgn_i pgn_p \'.($ii==$page?\'pgn_a\':\'\').\' font2"><a href="\'.$modx->makeUrl($id);
			$pp_pages .= ($_xp || $ii>=2 ? \'x/\' : \'\');
			$pp_pages .= ($_xp ? $_xp.\'/\' : \'\');
			$pp_pages .= ($ii>=2 ? \'page_\'.$ii.\'/\' : \'\');	
			$pp_pages .= \'">\'. $ii .\'</a></div>\' ."\\n";
		}
		
		//$next= ($page+1 >= $total_pages ? false : $page+1);
		//if($next) $pp_pages .= \'<div class="pgn_i pgn_next font2"><a href="\'.$modx->makeUrl($id) .\'x/\' .($_xp?$_xp.\'/\':\'\') .$paginate_prefix.$next.\'/"> > </a></div>\';
		
		$pp_pages .= \'<br></div>\';
	}
	*/
}

$pp .= \'<div class="catalog special__wrap uk-grid-match uk-grid-small uk-child-width-1-5@xl uk-child-width-1-3@l uk-child-width-1-2@m uk-child-width-1-2@s uk-child-width-1-1 ">\';
$pp .= $pp_sorts;
$pp .= $total_pages;
$pp .= $pp_items;
$pp .= $total_pages;
$pp .= \'<br></div><!--.catalog-->\';

return $pp;';$s['CatalogFilter']='/**
 * CatalogFilter
 *
 * Левый блок фильтра
 *
 * @version 7.1
 * @date    20.07.2017
 *
 *
 *
 *
 *
 *
 *
 *
 */
$id= $modx->documentIdentifier;

$tv_price= 7;
$price_prm_id= 1;



$propsvalues= array();

$cats= $modx->runSnippet(\'DocLister\',array(\'api\'=>true, \'idType\'=>\'parents\', \'parents\'=>$id, \'selectFields\'=>\'id\', \'depth\'=>5, \'showParent\'=>\'1\', \'addWhereList\'=>"c.isfolder=\'1\'"));
$cats= json_decode($cats, true);
if(is_array($cats) && count($cats))
{
	foreach($cats AS $row)
	{
		$catsqq .= ( ! empty($catsqq) ? \' OR \' : \'\') ."folderid={$row[id]}";
		$catsqq2 .= ( ! empty($catsqq2) ? \' OR \' : \'\') ."sc.parent={$row[id]}";
	}
}
if($catsqq)
{
	$rr= $modx->db->query("SELECT * FROM ".$modx->getFullTableName(\'_catfilter_value_cache\')." WHERE ( {$catsqq} ) AND e=\'y\' GROUP BY cf_id, `value`,dop ORDER BY cf_id, `value`,dop");
	if($rr && $modx->db->getRecordCount($rr))
	{
		while($row= $modx->db->getRow($rr))
		{
			$propsvalues[$row[\'cf_id\'] ][]= $row;
			
			if( ! $min[$row[\'cf_id\'] ]) $min[$row[\'cf_id\'] ]= 9999999;
			
			if($row[\'value\'] < $min[$row[\'cf_id\'] ]) $min[$row[\'cf_id\'] ]= $row[\'value\'];
			if($row[\'dop\'] > $max[$row[\'cf_id\'] ]) $max[$row[\'cf_id\'] ]= $row[\'dop\'];
			if($row[\'value\'] > $max[$row[\'cf_id\'] ]) $max[$row[\'cf_id\'] ]= $row[\'value\'];
		}
	}
	
	
	
	
	$min[$price_prm_id]= 9999999;
	$max[$price_prm_id]= 0;
	
	$rr= $modx->db->query("SELECT tv.`value` FROM ".$modx->getFullTableName(\'site_content\')." AS sc
		INNER JOIN ".$modx->getFullTableName(\'site_tmplvar_contentvalues\')." AS tv ON tv.contentid=sc.id AND tv.tmplvarid={$tv_price}
			WHERE ( {$catsqq2} )");
	if($rr && $modx->db->getRecordCount($rr))
	{
		while($row= $modx->db->getRow($rr))
		{
			if($row[\'value\'] < $min[$price_prm_id]) $min[$price_prm_id]= $row[\'value\'];
			if($row[\'value\'] > $max[$price_prm_id]) $max[$price_prm_id]= $row[\'value\'];
		}
	}
}



/*$docs= $modx->runSnippet(\'DocLister\',array(\'api\'=>true, \'idType\'=>\'parents\', \'parents\'=>$id, \'selectFields\'=>\'id\', \'depth\'=>5));
$docs= json_decode($docs, true);
if(is_array($docs) && count($docs))
{
	foreach($docs AS $row)
	{
		$docsqq .= ( ! empty($docsqq) ? \' OR \' : \'\') ."itemid={$row[id]}";
	}
}*/




$props= $modx->runSnippet(\'CatalogFilter_Props\', array(\'id\'=>$id));



if(is_array($props) && count($props))
{
	foreach($props AS $row)
	{
		if($row[\'type\'] == \'price\' || $row[\'type\'] == \'interval\')
		{
			$interval[$row[\'cfid\'] ]= $row[\'type\'];
		}
	}
}



if(is_array($props) && count($props))
{
	$_x= explode(\'/\', $modx->urlXParams);
	if($_x)
	{
		foreach($_x AS $val)
		{
			$prvals= explode(\'-\', $val);
			$prid= intval(array_shift($prvals));

			if(is_array($prvals) && count($prvals))
			{
				if($interval[$prid])
				{
					$propssel[$prid][0]= intval($prvals[0]);
					$propssel[$prid][1]= intval($prvals[1]);
					if($propssel[$prid][1] == 999999) $propssel[$prid][1]= \'\';
					
				}else{
					foreach($prvals AS $prval) $propssel[$prid][$prval]= true;
				}
			}
		}
	}
	
	
	
	
	
	foreach($props AS $row)
	{
		if($row[\'type\'] == \'price\' || $row[\'type\'] == \'interval\')
		{
			if( ! $propssel[$row[\'cfid\'] ][0]) $propssel[$row[\'cfid\'] ][0]= $min[$row[\'cfid\'] ];
			if( ! $propssel[$row[\'cfid\'] ][1]) $propssel[$row[\'cfid\'] ][1]= $max[$row[\'cfid\'] ];
			
			if( ! $max[$row[\'cfid\'] ] || $max[$row[\'cfid\'] ] <= $min[$row[\'cfid\'] ]) continue;
			
			$print .= \'<div class="cf_box catalogfilter__param">
					<div class="cf_tit font2">\'.$row[\'name\'] . ($row[\'ed\'] ? \', \'.$row[\'ed\'] : \'\').\'</div>\';
			$print .= \'<div class="cf_itms cf_itms_interval">\';
			
				$print .= \'<div class="cf_interval cf_interval_ot"><input type="text" class="catalogfilter__val catalogfilter__val_\'.$row[\'cfid\'].\'_ot" data-tp="\'.$row[\'type\'].\'"
						data-nm="\'.$row[\'cfid\'].\'" data-vl="ot" value="\'.$propssel[$row[\'cfid\'] ][0].\'" /></div>\';
			
				$print .= \'<div class="cf_interval cf_interval_do"><input type="text" class="catalogfilter__val catalogfilter__val_\'.$row[\'cfid\'].\'_do" data-tp="\'.$row[\'type\'].\'"
						data-nm="\'.$row[\'cfid\'].\'" data-vl="do" value="\'.$propssel[$row[\'cfid\'] ][1].\'" /></div>\';
			
				$print .= \'<br>\';
				
				$print .= \'<div class="cf_interval_range cf_interval_range_\'.$row[\'cfid\'].\'"></div>\';
				
				$print .= \'<script>
					(function($){
						$(document).ready(function(){
							$(".cf_interval_range_\'.$row[\'cfid\'].\'").slider({
								range: true,
								min: \'.$min[$row[\'cfid\'] ].\',
								max: \'.$max[$row[\'cfid\'] ].\',
								values: [\'.$propssel[$row[\'cfid\'] ][0].\', \'.$propssel[$row[\'cfid\'] ][1].\'],
								//step: 100,
								animate: "slow",
								slide: function(e,ui){
									$(".catalogfilter__val_\'.$row[\'cfid\'].\'_ot").val(ui.values[0]);
									$(".catalogfilter__val_\'.$row[\'cfid\'].\'_do").val(ui.values[1]);
								},
								change: function(e,ui){
									catalogFilter();
								}
							});
						});
					})(jQuery);
				</script>\';
			
			$print .= \'</div></div><!--.cf_box-->\' ."\\n\\n";
		
			
			
			
		}else{
			if(count($propsvalues[$row[\'cfid\'] ]) >= 2)
			{
				$print .= \'<div class="cf_box catalogfilter__param">
					<div class="cf_tit font2">\'.$row[\'name\'] . ($row[\'ed\'] ? \', \'.$row[\'ed\'] : \'\').\'</div>
					<div class="cf_itms">\';
				foreach($propsvalues[$row[\'cfid\'] ] AS $propid => $propval)
				{
					$print .= \'<div class="cf_itm \'.($propssel[$row[\'cfid\' ] ][$propval[\'cfv_id\' ] ] ? \'cf_itm_s\' : \'\').\' catalogfilter__val catalogfilter__val_\'.$row[\'cfid\'].\'"
						data-tp="\'.$row[\'type\'].\'" data-nm="\'.$row[\'cfid\'].\'" data-vl="\'.$propval[\'cfv_id\'].\'"
						data-sel="\'.($propssel[$row[\'cfid\'] ][$propval[\'cfv_id\'] ] ? \'y\' : \'n\').\'">[[ico?&n=`checkbox`]][[ico?&n=`checkbox2`]]<span>\'.$propval[\'value\'].\'</span></div>\';
				}
				$print .= \'</div></div><!--.cf_box-->\' ."\\n\\n";
			}
		}
	}
	
	
	
	if( ! empty($print))
	{
		$p= \'<div class="catalogfilter" data-pageid="\'.$id.\'" data-url="\'.$modx->makeUrl($id).\'"><div class="cftit font2">Задайте параметры</div>\';
		
		$cats= $modx->runSnippet(\'DocLister\',array(\'tpl\'=>\'catalogfilter_catilink\', \'idType\'=>\'parents\', \'parents\'=>$id, \'depth\'=>1, \'selectFields\'=>\'id,pagetitle\',
												   \'showParent\'=>\'1\', \'addWhereList\'=>"c.isfolder=\'1\' AND c.id!={$id}"));
		if($cats) $p .= \'<div class="cf_box"><div class="cf_tit font2">Категория</div><div class="cf_itms">\'. $cats .\'</div></div><!--.cf_box-->\';
		
		$p .= $print;
		
		$p .= \'<br></div><!--.catalogfilter-->\';
	}
}



return $p;';$s['CatalogFilter_Items']='/**
 * CatalogFilter_Items
 *
 * Список отфильтрованных ресурсов
 *
 * @version 7.2
 * @date    15.08.2017
 *
 *
 *
 *
 *
 *
 *
 *
 */

$tv_price= 7;
	
	
	
if( ! $_x) return array(\'\',0);


$props= $modx->runSnippet(\'CatalogFilter_Props\', array(\'id\'=>$id));


if(is_array($props) && count($props))
{
	foreach($props AS $row)
	{
		if($row[\'type\'] == \'price\' || $row[\'type\'] == \'interval\')
		{
			$interval[$row[\'cfid\'] ]= $row[\'type\'];
		}
	}
}



$price_vals= false;

$qq= "";
$pr= explode(\'/\', $_x);
foreach($pr AS $val)
{
	$prvals= explode(\'-\', $val);
	$prid= intval(array_shift($prvals));
	
	if(is_array($prvals) && count($prvals))
	{
		if($interval[$prid] == \'price\')
		{
			$price_ot= intval($prvals[0]);
			$price_do= intval($prvals[1]);

		}elseif($interval[$prid] == \'interval\'){
			$interval_ot= intval($prvals[0]);
			$interval_do= intval($prvals[1]);
			if($interval_ot || $interval_do)
			{
				if($qq) $qq .= " OR ";
				
				$qq .= "( cf_id={$prid} AND ( ";
				
				if($interval_ot) $qq .= "\'{$interval_ot}\' <= IF(ROUND(dop)>ROUND(`value`), ROUND(dop), ROUND(`value`))";
				
				if($interval_ot && $interval_do) $qq .= " AND ";
				
				if($interval_do) $qq .= "ROUND(`value`) <= \'{$interval_do}\'";
				
				$qq .= " ) )";
			}

		}else{
			$qqq= "";
			foreach($prvals AS $prval) $qqq .= ($qqq ? " OR " : "") ."id=".$prval;
			$qq .= ($qq ? " OR " : "") ."(cf_id={$prid} AND ( {$qqq} ) )";
		}
	}
}



if($qq)
{
	$rr= $modx->db->query("SELECT * FROM ".$modx->getFullTableName(\'_catfilter_value\')." WHERE {$qq}");
	if($rr && $modx->db->getRecordCount($rr))
	{
		while($row= $modx->db->getRow($rr))
		{
			$vals[$row[\'cf_id\'] ] .= ($vals[$row[\'cf_id\'] ] ? " OR " : "") ."`value`=\'".$row[\'value\']."\'";
		}
	}
}





$ids= false;
if(is_array($vals) && count($vals))
{
	foreach($vals AS $param => $qqqq)
	{
		$qq= "cf_id={$param} AND ( {$qqqq} )";
		$rr= $modx->db->query("SELECT itemid FROM ".$modx->getFullTableName(\'_catfilter_value\')." WHERE {$qq}");
		if( $rr && $modx->db->getRecordCount($rr))
		{
			while($row= $modx->db->getRow($rr))
			{
				$ids[$param][]= $row[\'itemid\'];
			}
		}
	}
}




$first= true;
$tmparr= false;
if($ids)
{
	foreach($ids AS $row)
	{
		if($first)
		{
			$first= false;
			$tmparr= $row;
			continue;
		}
		$tmparr= array_intersect($tmparr, $row);
	}
}
$ids= $tmparr;



if( ! $first && ( ! is_array($ids) || ! count($ids))) return \'\';



if($price_ot || $price_do)
{
	if( ! is_array($ids) || ! count($ids))
	{
		$foo= $modx->runSnippet(\'DocLister\',array(
			\'idType\'           => \'parents\',
			\'parents\'          => $id,
			\'selectFields\'     => \'c.id\',
			\'depth\'            => 10,
			\'tpl\'              => \'@CODE:[+id+],\'
		));
		$foo= trim($foo, \',\');
		$ids= explode(\',\', $foo);
	}
	
	$price_ids= array();
	
	$qq= "SELECT contentid FROM ".$modx->getFullTableName(\'site_tmplvar_contentvalues\')." WHERE tmplvarid={$tv_price} AND ";
	if($price_ot) $qq.= "ROUND(`value`)>=\'{$price_ot}\'";
	if($price_ot && $price_do) $qq .= " AND ";
	if($price_do) $qq.= "ROUND(`value`)<=\'{$price_do}\'";
	
	$rr= $modx->db->query($qq);
	if($rr && $modx->db->getRecordCount($rr))
		while($row= $modx->db->getRow($rr))
			$price_ids[]= $row[\'contentid\'];
	
	if( ! $price_ot)
	{
		$rr= $modx->db->query("SELECT sc.id FROM ".$modx->getFullTableName(\'site_content\')." AS sc
			LEFT JOIN ".$modx->getFullTableName(\'site_tmplvar_contentvalues\')." AS tv ON tv.contentid=sc.id AND tv.tmplvarid={$tv_price}
				WHERE tv.`value` IS NULL");	
		if($rr && $modx->db->getRecordCount($rr))
			while($row= $modx->db->getRow($rr))
				$price_ids[]= $row[\'id\'];
	}

	if(is_array($ids) && count($ids)) $ids= array_intersect($ids, $price_ids);
	else $ids= $price_ids;
}






if(is_array($ids) && count($ids))
{
	foreach($ids AS $val)
		$result .= ($result ? \',\' : \'\') .$val;
}



return $result;';$s['CatalogFilter_Props']='/**
 * CatalogFilter_Props
 *
 * Параметры фильтра
 *
 * @version 7.0
 * @date    15.07.2017
 *
 *
 *
 *
 *
 *
 *
 *
 */
	
$catalogroot= 4; // Корень каталога

//-----------------------------------------------------------------------------------

$parentslist= $modx->runSnippet(\'GetIdOnLvl\', array(\'id\'=>$id, \'koren\'=>$catalogroot));
if(is_array($parentslist) && count($parentslist))
	foreach($parentslist AS $row)
		if($row[\'id\'])
			$qq .= ( ! empty($qq) ? " OR " : "") ."cf.folders LIKE \'%,{$row[id]},%\'";

if($qq) $rr= $modx->db->query("SELECT *, cf.id AS cfid, cfv.id AS cfvid
	FROM ".$modx->getFullTableName(\'_catfilter\')." AS cf
	LEFT JOIN ".$modx->getFullTableName(\'_catfilter_value\')." AS cfv ON cfv.cf_id=cf.id AND cfv.itemid=\'{$id}\'
	WHERE ( {$qq} ) AND cf.e=\'y\' ORDER BY cf.i, cf.id" );
if($rr && $modx->db->getRecordCount($rr))
{
	while($row= $modx->db->getRow($rr))
	{
		if( ! $res[$row[\'cfid\'] ][\'id\']) $res[$row[\'cfid\'] ]= $row;
		
		if($values)
		{
			if(true)
			{
				if($row[\'value\'])
				{
					$md5= md5($row[\'value\'] .($row[\'dop\']?\'-\'.$row[\'dop\']:\'\'));
					$res[$row[\'cfid\'] ][\'values\'][$md5]= $row[\'value\'] .($row[\'dop\']?\' &ndash; \'.$row[\'dop\']:\'\');
				}
				
			}elseif(false){
				$vals= explode(\'||\', $row[\'value\']);
				if(is_array($vals) && count($vals))
					foreach($vals AS $vv)
						if($vv)
							$res[$row[\'cfid\'] ][\'values\'][md5($vv .($row[\'dop\'])?\'-\'.$row[\'dop\']:\'\')]= $vv .($row[\'dop\']?\' &ndash; \'.$row[\'dop\']:\'\');
				
				
			}elseif(false){
				$vals= explode(\'||\', $row[\'value\']);
				if(is_array($vals) && count($vals))
					foreach($vals AS $vv)
						if($vv)
							$res[$row[\'cfid\'] ][\'values\'][md5($vv)]= $vv;
				
				
				
			}elseif( false ){
				$vals= explode( "||", $row[ \'value\' ] );
				foreach( $vals AS $vv )
				{
					$mm= explode( "::", $vv );
					if( count( $vals ) >= 2 )
					{
						$res[ $row[ \'cfid\' ] ][ \'values\' ][ md5( $mm[ 0 ] ) ]= $mm;
					}else{
						$res[ $row[ \'cfid\' ] ][ \'price\' ]= $mm[ 1 ];
					}
				}
			}
		}
	}
	return $res;
}else return false;';$s['catalogItemPrepare']='$data[\'pagetitle\']= $modx->runSnippet(\'Typograph\',array(\'t\'=>$data[\'pagetitle\']));

$images= explode(\'||\',$data[\'tv.images\']);

$data[\'tv.images\']= array_shift($images);
$data[\'tv.images_mini\']= $data[\'tv.images\'];
$data[\'tv.images\']= $modx->runSnippet(\'ImgCrop72\',array(\'img\'=>$data[\'tv.images\'], \'w\'=>1111, \'h\'=>1111));
$data[\'tv.images_mini\']= $modx->runSnippet(\'ImgCrop72\',array(\'img\'=>$data[\'tv.images_mini\'], \'w\'=>222, \'h\'=>222, \'fill\'=>true));

if(is_array($images) && count($images))
{
	foreach($images AS $img)
	{
		$i= $modx->runSnippet(\'ImgCrop72\',array(\'img\'=>$img, \'w\'=>1111, \'h\'=>1111));
		$mi= $modx->runSnippet(\'ImgCrop72\',array(\'img\'=>$img, \'w\'=>100, \'h\'=>100, \'fill\'=>true));
		
		$data[\'mini_images\'] .= \'<a data-fancybox="catitempage" href="\'.$i.\'"><img src="\'.$mi.\'" /></a>\';
	}
}

if($data[\'tv.discount\'])
{
	$discount= round($data[\'tv.price\'] * 100 / (100-$data[\'tv.discount\']));
	$data[\'tv.discount\']= \'<div class="ci_discount"><span><span class="price font2">\'.$modx->runSnippet(\'Price\',array(\'price\'=>$discount)).\'</span><img src="template/img/discount.svg" /></span>
			<span class="ruble">руб.</span>
		</div><br>\';
}

$data[\'tv.price\']= ( ! $data[\'tv.price\'] ? \'&mdash;\' : number_format($data[\'tv.price\'], 0,\',\',\'&thinsp;\'));

$uniq= md5($data[\'id\']);
$inbasket= $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'stat\', \'uniq\'=>$uniq));
$data[\'inbasket\']= ($inbasket==\'y\' ? \'inbasket\' :\'\');

$prms= $modx->runSnippet(\'CatalogFilter_Props\', array(\'id\'=>$data[\'id\'], \'values\'=>true));
if(is_array($prms) && count($prms))
{
	$data[\'cf.prms\']= \'<div class="cip_prms">\';
	foreach($prms AS $prm)
	{
		$cc= count($prm[\'values\']);
		if(is_array($prm[\'values\']) && $cc)
		{
			$data[\'cf.prms\'].= \'<div class="cipp_row">
				<div class="cipp_lb">\'.$prm[\'name\'].\'</div>
				<div class="cipp_vl">\';
				
			foreach($prm[\'values\'] AS $vl)
			{
				$data[\'cf.prms\'].= \'<div>\'.($cc>=2?\'&mdash; \':\'\') .$vl.\'</div>\';
			}
			
			$data[\'cf.prms\'].= \'</div><br></div>\';
		}
	}
	$data[\'cf.prms\'] .= \'</div>\';
}

return $data;';$s['getSortBlock']='// вызываем в нужном месте getSortBlock
 // требует подключенного к странице jquery версии не ниже 1.9
 // дополнительные параметры (опционально)
 // &sortBy - по умолчанию menuindex (может быть как поле из site_content, так и любое ТВ, которое выводится в списке через DocLister и, соответветственно указано в его параметре tvList
 // &sortOrder - ASC | DESC (по умолчанию DESC)
 // &config_sort - конфиг параметров сортировки (первая часть до || - заголовок, остальные - варианты. Может быть как поле site_content , так и приемлемый для DocLister TV). По умолчанию - Сортировать по:||pagetitle==Названию||price==Цене (по названию и цене)
 // &config_display - настройка селекта "показывать по". По умолчанию - Показывать по:||==--не выбрано--||10||20||30||40||all
 // &sortRow
 // &sortOuter
 // &displayRow
 // &displayOuter
 // &classActiveName
 // &classUpName
 // &classDownName
 // &classSelectedName
 
$param = $modx->event->params;
 
$sortBy = isset($_SESSION[\'sortBy\']) ? $_SESSION[\'sortBy\'] : (isset($param[\'sortBy\']) ? $param[\'sortBy\'] : \'menuindex\');
$sortOrder = isset($_SESSION[\'sortOrder\']) ? $_SESSION[\'sortOrder\'] : (isset($param[\'sortOrder\']) ? $param[\'sortOrder\'] : \'DESC\');
$sortDisplay = isset($_SESSION[\'sortDisplay\']) ? $_SESSION[\'sortDisplay\'] : (isset($param[\'display\']) ? $param[\'display\'] : \'12\');
$config_sort = isset($param[\'config_sort\']) ? $param[\'config_sort\'] : \'Сортировать по:||pagetitle==Названию||price==Цене\';
$config_display = isset($param[\'config_display\']) ? $param[\'config_display\'] : \'Показывать по:||==--не выбрано--||10||20||30||40||all==все\';
$sortRow = isset($param[\'sortRow\']) ? $param[\'sortRow\'] : \'<a href="#" class="sorter sort_vid sort_pic [+classActive+] [+classUpDown+]" data-sort-by="[+sortBy+]" data-sort-order="[+sortOrder+]">[+title+]</a>\';
$sortOuter = isset($param[\'sortOuter\']) ? $param[\'sortOuter\'] : \'<div class="eFilter_sort_block"><span class="eFilter_sort_title">[+title+]</span><span class="eFilter_sort_options">[+rows+]</span></div>\';
$displayRow = isset($param[\'displayRow\']) ? $param[\'displayRow\'] : \'<option value="[+value+]" [+selected+]>[+title+]</option>\';
$displayOuter = isset($param[\'displayOuter\']) ? $param[\'displayOuter\'] : \'
    <div class="eFilter_display_block">
        <span class="eFilter_display_title">[+title+]</span>
        <span class="eFilter_display_options"><select name="sortDisplay" class="eFilter_display_select">[+rows+]</select></span>
    </div>\';
$classActiveName = isset($param[\'classActiveName\']) ? $param[\'classActiveName\'] : \'active\';
$classUpName = isset($param[\'classUpName\']) ? $param[\'classUpName\'] : \'up\';
$classDownName = isset($param[\'classDownName\']) ? $param[\'classDownName\'] : \'down\';
$classSelectedName = isset($param[\'classSelectedName\']) ? $param[\'classSelectedName\'] : \'selected\';
$action_uri = $_SERVER[\'REQUEST_URI\'];
$jsFileName = isset($jsFileName) && !empty($jsFileName) ? $jsFileName : \'eFSortBlock\';

//разбираем конфиг
$cfg = array();
$tmp = explode("||", $config_sort);
foreach ($tmp as $k => $v) {
    if ($k == \'0\') {
        $cfg[\'sort\'][\'title\'] = $v;
    } else {
        $_tmp = explode("==", $v);
        $cfg[\'sort\'][\'values\'][$_tmp[0]] = (isset($_tmp[1]) && !empty($_tmp[1])) ? $_tmp[1] : $_tmp[0];
    }
}
$tmp = explode("||", $config_display);
foreach ($tmp as $k => $v) {
    if ($k == \'0\') {
        $cfg[\'display\'][\'title\'] = $v;
    } else {
        $_tmp = explode("==", $v);
        $cfg[\'display\'][\'values\'][$_tmp[0]] = (isset($_tmp[1]) && !empty($_tmp[1])) ? $_tmp[1] : $_tmp[0];
    }
}


$out = \'\';

//блок сортировки
$sortBlock = \'\';
$sortRows = \'\';
foreach ($cfg[\'sort\'][\'values\'] as $k => $v) {
    $classActive = $sortBy == $k ? \' \' . $classActiveName . \' \' : \'\';
    $classUpDown = !empty($classActive) ? (($sortOrder == \'ASC\' ? \' \' . $classUpName. \' \' : \' \' . $classDownName. \' \')) : \'\';
    $sortOrderDirection = $sortOrder == \'ASC\' ? \'DESC\' : \'ASC\';
    $sortRows .= str_replace(
        array(\'[+classActive+]\', \'[+classUpDown+]\', \'[+sortBy+]\', \'[+sortOrder+]\', \'[+title+]\'),
        array($classActive, $classUpDown, $k, $sortOrderDirection, $v),
        $sortRow
    );
}
$sortBlock .= str_replace(
    array(\'[+title+]\', \'[+rows+]\'),
    array($cfg[\'sort\'][\'title\'], $sortRows),
    $sortOuter
);

//блок "показать по"
$displayBlock = \'\';
$displayRows = \'\';
foreach ($cfg[\'display\'][\'values\'] as $k => $v) {
    $selected = $sortDisplay == $k ? \' \' . $classSelectedName : \'\';
    $displayRows .= str_replace(
        array(\'[+value+]\', \'[+selected+]\', \'[+title+]\'),
        array($k, $selected, $v),
        $displayRow
    );
}
$displayBlock .= str_replace(
    array(\'[+title+]\', \'[+rows+]\'),
    array($cfg[\'display\'][\'title\'], $displayRows),
    $displayOuter
);


//итоговая форма
$out .= <<<HTML
<div id="eFilter_sort_block">
    <form action="{$action_uri}" method="post" id="changesortBy">
        {$sortBlock}
        {$displayBlock}
        <input type="hidden" name="action" value="changesortBy">
        <input type="hidden" name="sortBy" value="{$sortBy}">
        <input type="hidden" name="sortOrder" value="{$sortOrder}">
    </form>
</div>
HTML;
$modx->regClientScript("assets/snippets/eFilter/html/js/" . $jsFileName . ".js");
return $out;';$s['multiTV']='return require MODX_BASE_PATH . \'assets/tvs/multitv/multitv.snippet.php\';';$s['GO_TO_UNPUBL']='$query_all = $modx->db->query(\'SELECT * FROM \' . $modx->getFullTableName(\'site_content\') . \' WHERE isfolder=0 AND template=4\');
$query_publ = $modx->db->query(\'SELECT * FROM \' . $modx->getFullTableName(\'site_content\') . \' WHERE isfolder=0 AND template=4 AND published=1\');
$query_unpubl = $modx->db->query(\'SELECT * FROM \' . $modx->getFullTableName(\'site_content\') . \' WHERE published=0 AND isfolder=0 AND template=4\');
$query_unpubl_to = $modx->db->query(\'SELECT * FROM \' . $modx->getFullTableName(\'site_content\') . \' WHERE published=0 AND isfolder=0 AND template=4 AND parent!=88342\');
$query_del = $modx->db->query(\'SELECT * FROM \' . $modx->getFullTableName(\'site_content\') . \' WHERE isfolder=0 AND template=4 AND deleted=1\');
$result_all = $modx->db->getRecordCount($query_all);
$result_publ = $modx->db->getRecordCount($query_publ);
$result_unpubl = $modx->db->getRecordCount($query_unpubl);
$result_unpubl_to = $modx->db->getRecordCount($query_unpubl_to);
$result_del = $modx->db->getRecordCount($query_del);



if ($query_unpubl && $result_unpubl > 0) {
    while ($row = $modx->db->getRow($query_unpubl)) {
		$unpubl[$row[\'id\']] = $row[\'id\'];
    }
	
	$unpubl = implode(", ", array_keys($unpubl));
}
	
if ($query_del && $result_del > 0) {
    while ($row = $modx->db->getRow($query_del)) {
		$del[$row[\'id\']] = $row[\'id\'];
    }
	$del = implode(", ", array_keys($del));
}


$print .= \'<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet"><div class="wrap"></div> <div class="wrap second"></div> <div class="wrap one"></div><div class="ball"></div>\';
$print .= \'<div class="box"><table>\';
$print .= \'<tbody>\';
$print .= \' <tr>
                <th align="right">Всего товаров</th>
                <td align="left" colspan="2">\' . $result_all . \'</td>
            </tr>\';
$print .= \' <tr>
                <th align="right">Опубликованных товаров</th>
                <td align="left" colspan="2">\' . $result_publ . \'</td>
            </tr>\';
$print .= \' <tr>
                <th align="right">Неопубликованных товаров</th>
                <td align="left" colspan="2">\' . $result_unpubl . \'</td>
            </tr>\';
if ($result_unpubl_to > 0) {
    if (isset($_POST[\'submit_unpubl_to\'])) {
        $modx->db->query(\'UPDATE \' . $modx->getFullTableName(\'site_content\') . \' SET parent=88342 WHERE id IN (\' . $unpubl . \')\');
    }
    $print .= \'	<tr>
                    <th align="right">Поместить в папку</th>
                    <td align="left">\' . $result_unpubl_to . \'</td>
                    <td style="padding: 0;">
                        <form action="" method="POST">
                            <input type="submit" name="submit_unpubl_to" value="Сделать" />
			</form>
                    </td>
		</tr>\';
} else {
    $print .= \'	<tr>
                    <th align="right">В папку неопубликованных товаров</th>
                    <td align="left" colspan="2">\' . $result_unpubl_to . \'</td>
		</tr>\';
}
if ($result_del > 0) {
    if (isset($_POST[\'submit_del\'])) {
        $modx->db->query(\'DELETE FROM \' . $modx->getFullTableName(\'site_content\') . \' WHERE id IN (\' . $del . \')\');
    }
    $print .= \'	<tr>
                    <th align="right">На удаление</th>
                    <td align="left">\' . $result_del . \'</td>
                    <td style="padding: 0;">
                        <form action="" method="POST">
                            <input type="submit" name="submit_del" value="Сделать" />
			</form>
                    </td>
		</tr>\';
} else {
    $print .= \'	<tr>
                    <th align="right">На удаление</th>
                    <td align="left" colspan="2">\' . $result_del . \'</td>
		</tr>\';
}
$print .= \'</tbody>\';
$print .= \'</table></div>\';
$print .= \'	<style>
			table {
				border: 0;
				box-shadow: 0 0 5px white;
				border-radius: 15px;
				background: rgba(97, 97, 97, 0.3);
			}
			
			tr {
				
			}
			tr:nth-child(even) {
				
			}

			tr:hover {
				
			}
			
			th {
				color: #fff;
				text-transform: uppercase;
			}
			
			td {
				font-size: 18px;
				font-weight: bold;
				color: #fff;
				text-decoration: underline;
				text-underline-position: under;
				text-decoration-color: #fff;
			}
			
			th, td {
			  	padding: 8px;
			}
			
			form {
    			margin: 0;
			}
			@keyframes b-shadow {
  0%{;}
  50% {border-color:rgba(255,255,255,0.8);box-shadow:0px 0px 10px rgba(255,255,255,0.6);}
  70% {border-color:rgba(255,255,255,0.8);box-shadow:0px 0px 10px rgba(255,255,255,0.6);}
  100%{;}
}

			input[type="submit"] {
				background: transparent;
				color: #fff;
				border: 2px solid #ffffff;
				border-radius: 25px;
				padding: 12px 25px;
				text-transform: uppercase;
				letter-spacing: 1px;
				font-size: 12px;
				font-weight: bold;
				cursor: pointer;
				    animation: scroll 0.2s ease-in-out 1 6.5s, b-shadow 3s ease-in-out infinite 10s;
					animation: scroll 0.2s ease-in-out 1 6.5s, b-shadow 3s ease-in-out infinite 10s;
  animation-fill-mode: forwards;
			}
			input[type="submit"]:hover {
				background: #fff;
				color: #676767;
				  cursor:pointer;
				  border-color:rgba(255,255,255,0.8);
				  box-shadow: 0px 0px 15px rgba(255,255,255,0.6);
			}
			input[type="submit"]:focus {outline:0;}
			body {
				font-family: "Roboto", sans-serif;
			  margin:0;
			  position: fixed;
			  animation: color 50s alternate infinite;
			  width: 100%;
			} 

			@keyframes color {
				0% {background-color: #FF2B2B;}
				20% {background-color: #FFAD2B}
			  40% {background-color: #39FF2B;}
			  60% {background-color: #2BD4FF;}
			  80% {background-color: #A62BFF;}
			  100% {background-color: #FF2B63;}

			}
			.wrap{
			  width:110em;
			  height:110em;
			  border-radius:100vh 0 0 0;
			  /*background-color:rgba(100,100,100,0.2);*/
			  background-color: #FF2B2B;
			  position:absolute;
			  transform:rotate(45deg);
			  top:-50%;left:0px;margin-top:400px;
			  animation:wrap 10s ease-in-out alternate infinite,color2 50s alternate infinite 5s;
			}
			.second {
			  margin-top:400px;
			 opacity:0.6;
			  margin-left:200px;
			  animation:wrap 8s ease-in-out alternate-reverse infinite,color2 50s alternate infinite 3s;
			}
			.one {
			 /* margin-top:600px;*/
			 opacity:0.6; 
			  margin-left:-100px;
			  animation:wrap 6s ease-in-out alternate infinite,color2 50s alternate infinite 1s;
			}
			@keyframes wrap {
			  0% {transform:translate(0,0)rotate(30deg);}
			  100% {transform:translate(-600px,100px)rotate(45deg);}
			}
			@keyframes color2 {
				0% {background-color: #FF2B2B;}
				20% {background-color: #FFA42B}
			  40% {background-color: #30D824;}
			  60% {background-color: #24B4D8;}
			  80% {background-color: #8522CC;}
			  100% {background-color: #FF4476;}

			}
			.box {
				position: relative;
				border-radius: 8px;
				margin: 120px 0 0 0;
				opacity: 0.8;
				animation: color 50s alternate infinite;
				animation-fill-mode: forwards;
				display: flex;
				align-items: center;
				justify-content: center;
			}
			</style>
			<script>
					window.onload= function() {
				  var elIn = document.getElementsByClassName("fade-in");
				  var elOut = document.getElementsByClassName("fade-out");
				  var myBtn1 = document.getElementsByClassName("after");
				  var myBtn2 = document.getElementsByClassName("mybtn2");
				  /*var inp1 = document.getElementById("inp1").value.toString();*/
				  var infoBtn = document.getElementsByClassName("info");
				  var infoDesc = document.getElementsByClassName("info-desc");
				  var exitBtn = document.getElementsByClassName("exit");

				  infoBtn[0].addEventListener("click", function() {
					infoDesc[0].style.display = "inline-block";

					exitBtn[0].style.display = "inline-block";

				  });
				  exitBtn[0].addEventListener("click", function() {
					infoDesc[0].style.display="none";
					exitBtn[0].style.display ="none";

				  });

					  myBtn1[0].addEventListener("click", function() {
					for(var i= 0; i< elIn.length; i++){
					  elIn[i].style.display="inline-block";
					  elOut[i].style.display= "none";}

				  }); 

				  var elOut2 = elIn;
				  myBtn2[0].addEventListener("click", function() {
					for(var i = 0; i< elOut2.length; i++){
					  elOut2[i].style.display="none";

					  document.getElementById("qrcode").style.display="inline-block";

					}
				  });



				  //Q-R-C-O-D-E JQuery library

				  (function(r){r.fn.qrcode=function(h){var s;function u(a){this.mode=s;this.data=a}function o(a,c){this.typeNumber=a;this.errorCorrectLevel=c;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}function q(a,c){if(void 0==a.length)throw Error(a.length+"/"+c);for(var d=0;d<a.length&&0==a[d];)d++;this.num=Array(a.length-d+c);for(var b=0;b<a.length-d;b++)this.num[b]=a[b+d]}function p(a,c){this.totalCount=a;this.dataCount=c}function t(){this.buffer=[];this.length=0}u.prototype={getLength:function(){return this.data.length},
				write:function(a){for(var c=0;c<this.data.length;c++)a.put(this.data.charCodeAt(c),8)}};o.prototype={addData:function(a){this.dataList.push(new u(a));this.dataCache=null},isDark:function(a,c){if(0>a||this.moduleCount<=a||0>c||this.moduleCount<=c)throw Error(a+","+c);return this.modules[a][c]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var a=1,a=1;40>a;a++){for(var c=p.getRSBlocks(a,this.errorCorrectLevel),d=new t,b=0,e=0;e<c.length;e++)b+=c[e].dataCount;
				for(e=0;e<this.dataList.length;e++)c=this.dataList[e],d.put(c.mode,4),d.put(c.getLength(),j.getLengthInBits(c.mode,a)),c.write(d);if(d.getLengthInBits()<=8*b)break}this.typeNumber=a}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,c){this.moduleCount=4*this.typeNumber+17;this.modules=Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=Array(this.moduleCount);for(var b=0;b<this.moduleCount;b++)this.modules[d][b]=null}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-
				7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(a,c);7<=this.typeNumber&&this.setupTypeNumber(a);null==this.dataCache&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,c)},setupPositionProbePattern:function(a,c){for(var d=-1;7>=d;d++)if(!(-1>=a+d||this.moduleCount<=a+d))for(var b=-1;7>=b;b++)-1>=c+b||this.moduleCount<=c+b||(this.modules[a+d][c+b]=
				0<=d&&6>=d&&(0==b||6==b)||0<=b&&6>=b&&(0==d||6==d)||2<=d&&4>=d&&2<=b&&4>=b?!0:!1)},getBestMaskPattern:function(){for(var a=0,c=0,d=0;8>d;d++){this.makeImpl(!0,d);var b=j.getLostPoint(this);if(0==d||a>b)a=b,c=d}return c},createMovieClip:function(a,c,d){a=a.createEmptyMovieClip(c,d);this.make();for(c=0;c<this.modules.length;c++)for(var d=1*c,b=0;b<this.modules[c].length;b++){var e=1*b;this.modules[c][b]&&(a.beginFill(0,100),a.moveTo(e,d),a.lineTo(e+1,d),a.lineTo(e+1,d+1),a.lineTo(e,d+1),a.endFill())}return a},
				setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(a=8;a<this.moduleCount-8;a++)null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=j.getPatternPosition(this.typeNumber),c=0;c<a.length;c++)for(var d=0;d<a.length;d++){var b=a[c],e=a[d];if(null==this.modules[b][e])for(var f=-2;2>=f;f++)for(var i=-2;2>=i;i++)this.modules[b+f][e+i]=-2==f||2==f||-2==i||2==i||0==f&&0==i?!0:!1}},setupTypeNumber:function(a){for(var c=
				j.getBCHTypeNumber(this.typeNumber),d=0;18>d;d++){var b=!a&&1==(c>>d&1);this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=b}for(d=0;18>d;d++)b=!a&&1==(c>>d&1),this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=b},setupTypeInfo:function(a,c){for(var d=j.getBCHTypeInfo(this.errorCorrectLevel<<3|c),b=0;15>b;b++){var e=!a&&1==(d>>b&1);6>b?this.modules[b][8]=e:8>b?this.modules[b+1][8]=e:this.modules[this.moduleCount-15+b][8]=e}for(b=0;15>b;b++)e=!a&&1==(d>>b&1),8>b?this.modules[8][this.moduleCount-
				b-1]=e:9>b?this.modules[8][15-b-1+1]=e:this.modules[8][15-b-1]=e;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,c){for(var d=-1,b=this.moduleCount-1,e=7,f=0,i=this.moduleCount-1;0<i;i-=2)for(6==i&&i--;;){for(var g=0;2>g;g++)if(null==this.modules[b][i-g]){var n=!1;f<a.length&&(n=1==(a[f]>>>e&1));j.getMask(c,b,i-g)&&(n=!n);this.modules[b][i-g]=n;e--; -1==e&&(f++,e=7)}b+=d;if(0>b||this.moduleCount<=b){b-=d;d=-d;break}}}};o.PAD0=236;o.PAD1=17;o.createData=function(a,c,d){for(var c=p.getRSBlocks(a,
				c),b=new t,e=0;e<d.length;e++){var f=d[e];b.put(f.mode,4);b.put(f.getLength(),j.getLengthInBits(f.mode,a));f.write(b)}for(e=a=0;e<c.length;e++)a+=c[e].dataCount;if(b.getLengthInBits()>8*a)throw Error("code length overflow. ("+b.getLengthInBits()+">"+8*a+")");for(b.getLengthInBits()+4<=8*a&&b.put(0,4);0!=b.getLengthInBits()%8;)b.putBit(!1);for(;!(b.getLengthInBits()>=8*a);){b.put(o.PAD0,8);if(b.getLengthInBits()>=8*a)break;b.put(o.PAD1,8)}return o.createBytes(b,c)};o.createBytes=function(a,c){for(var d=
				0,b=0,e=0,f=Array(c.length),i=Array(c.length),g=0;g<c.length;g++){var n=c[g].dataCount,h=c[g].totalCount-n,b=Math.max(b,n),e=Math.max(e,h);f[g]=Array(n);for(var k=0;k<f[g].length;k++)f[g][k]=255&a.buffer[k+d];d+=n;k=j.getErrorCorrectPolynomial(h);n=(new q(f[g],k.getLength()-1)).mod(k);i[g]=Array(k.getLength()-1);for(k=0;k<i[g].length;k++)h=k+n.getLength()-i[g].length,i[g][k]=0<=h?n.get(h):0}for(k=g=0;k<c.length;k++)g+=c[k].totalCount;d=Array(g);for(k=n=0;k<b;k++)for(g=0;g<c.length;g++)k<f[g].length&&
				(d[n++]=f[g][k]);for(k=0;k<e;k++)for(g=0;g<c.length;g++)k<i[g].length&&(d[n++]=i[g][k]);return d};s=4;for(var j={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,
				78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var c=a<<10;0<=j.getBCHDigit(c)-j.getBCHDigit(j.G15);)c^=j.G15<<j.getBCHDigit(c)-j.getBCHDigit(j.G15);return(a<<10|c)^j.G15_MASK},getBCHTypeNumber:function(a){for(var c=a<<12;0<=j.getBCHDigit(c)-
				j.getBCHDigit(j.G18);)c^=j.G18<<j.getBCHDigit(c)-j.getBCHDigit(j.G18);return a<<12|c},getBCHDigit:function(a){for(var c=0;0!=a;)c++,a>>>=1;return c},getPatternPosition:function(a){return j.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,c,d){switch(a){case 0:return 0==(c+d)%2;case 1:return 0==c%2;case 2:return 0==d%3;case 3:return 0==(c+d)%3;case 4:return 0==(Math.floor(c/2)+Math.floor(d/3))%2;case 5:return 0==c*d%2+c*d%3;case 6:return 0==(c*d%2+c*d%3)%2;case 7:return 0==(c*d%3+(c+d)%2)%2;default:throw Error("bad maskPattern:"+
				a);}},getErrorCorrectPolynomial:function(a){for(var c=new q([1],0),d=0;d<a;d++)c=c.multiply(new q([1,l.gexp(d)],0));return c},getLengthInBits:function(a,c){if(1<=c&&10>c)switch(a){case 1:return 10;case 2:return 9;case s:return 8;case 8:return 8;default:throw Error("mode:"+a);}else if(27>c)switch(a){case 1:return 12;case 2:return 11;case s:return 16;case 8:return 10;default:throw Error("mode:"+a);}else if(41>c)switch(a){case 1:return 14;case 2:return 13;case s:return 16;case 8:return 12;default:throw Error("mode:"+
				a);}else throw Error("type:"+c);},getLostPoint:function(a){for(var c=a.getModuleCount(),d=0,b=0;b<c;b++)for(var e=0;e<c;e++){for(var f=0,i=a.isDark(b,e),g=-1;1>=g;g++)if(!(0>b+g||c<=b+g))for(var h=-1;1>=h;h++)0>e+h||c<=e+h||0==g&&0==h||i==a.isDark(b+g,e+h)&&f++;5<f&&(d+=3+f-5)}for(b=0;b<c-1;b++)for(e=0;e<c-1;e++)if(f=0,a.isDark(b,e)&&f++,a.isDark(b+1,e)&&f++,a.isDark(b,e+1)&&f++,a.isDark(b+1,e+1)&&f++,0==f||4==f)d+=3;for(b=0;b<c;b++)for(e=0;e<c-6;e++)a.isDark(b,e)&&!a.isDark(b,e+1)&&a.isDark(b,e+
				2)&&a.isDark(b,e+3)&&a.isDark(b,e+4)&&!a.isDark(b,e+5)&&a.isDark(b,e+6)&&(d+=40);for(e=0;e<c;e++)for(b=0;b<c-6;b++)a.isDark(b,e)&&!a.isDark(b+1,e)&&a.isDark(b+2,e)&&a.isDark(b+3,e)&&a.isDark(b+4,e)&&!a.isDark(b+5,e)&&a.isDark(b+6,e)&&(d+=40);for(e=f=0;e<c;e++)for(b=0;b<c;b++)a.isDark(b,e)&&f++;a=Math.abs(100*f/c/c-50)/5;return d+10*a}},l={glog:function(a){if(1>a)throw Error("glog("+a+")");return l.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;256<=a;)a-=255;return l.EXP_TABLE[a]},EXP_TABLE:Array(256),
				LOG_TABLE:Array(256)},m=0;8>m;m++)l.EXP_TABLE[m]=1<<m;for(m=8;256>m;m++)l.EXP_TABLE[m]=l.EXP_TABLE[m-4]^l.EXP_TABLE[m-5]^l.EXP_TABLE[m-6]^l.EXP_TABLE[m-8];for(m=0;255>m;m++)l.LOG_TABLE[l.EXP_TABLE[m]]=m;q.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var c=Array(this.getLength()+a.getLength()-1),d=0;d<this.getLength();d++)for(var b=0;b<a.getLength();b++)c[d+b]^=l.gexp(l.glog(this.get(d))+l.glog(a.get(b)));return new q(c,0)},mod:function(a){if(0>
				this.getLength()-a.getLength())return this;for(var c=l.glog(this.get(0))-l.glog(a.get(0)),d=Array(this.getLength()),b=0;b<this.getLength();b++)d[b]=this.get(b);for(b=0;b<a.getLength();b++)d[b]^=l.gexp(l.glog(a.get(b))+c);return(new q(d,0)).mod(a)}};p.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],
				[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,
				116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,
				43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,
				3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,
				55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,
				45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];p.getRSBlocks=function(a,c){var d=p.getRsBlockTable(a,c);if(void 0==d)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+c);for(var b=d.length/3,e=[],f=0;f<b;f++)for(var h=d[3*f+0],g=d[3*f+1],j=d[3*f+2],l=0;l<h;l++)e.push(new p(g,j));return e};p.getRsBlockTable=function(a,c){switch(c){case 1:return p.RS_BLOCK_TABLE[4*(a-1)+0];case 0:return p.RS_BLOCK_TABLE[4*(a-1)+1];case 3:return p.RS_BLOCK_TABLE[4*
				(a-1)+2];case 2:return p.RS_BLOCK_TABLE[4*(a-1)+3]}};t.prototype={get:function(a){return 1==(this.buffer[Math.floor(a/8)]>>>7-a%8&1)},put:function(a,c){for(var d=0;d<c;d++)this.putBit(1==(a>>>c-d-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var c=Math.floor(this.length/8);this.buffer.length<=c&&this.buffer.push(0);a&&(this.buffer[c]|=128>>>this.length%8);this.length++}};"string"===typeof h&&(h={text:h});h=r.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,
				correctLevel:2,background:"transparent",foreground:"#000000"},h);return this.each(function(){var a;if("canvas"==h.render){a=new o(h.typeNumber,h.correctLevel);a.addData(h.text);a.make();var c=document.createElement("canvas");c.width=h.width;c.height=h.height;for(var d=c.getContext("2d"),b=h.width/a.getModuleCount(),e=h.height/a.getModuleCount(),f=0;f<a.getModuleCount();f++)for(var i=0;i<a.getModuleCount();i++){d.fillStyle=a.isDark(f,i)?h.foreground:h.background;var g=Math.ceil((i+1)*b)-Math.floor(i*b),
				j=Math.ceil((f+1)*b)-Math.floor(f*b);d.fillRect(Math.round(i*b),Math.round(f*e),g,j)}}else{a=new o(h.typeNumber,h.correctLevel);a.addData(h.text);a.make();c=r("<table></table>").css("width",h.width+"px").css("height",h.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",h.background);d=h.width/a.getModuleCount();b=h.height/a.getModuleCount();for(e=0;e<a.getModuleCount();e++){f=r("<tr></tr>").css("height",b+"px").appendTo(c);for(i=0;i<a.getModuleCount();i++)r("<td></td>").css("width",
				d+"px").css("background-color",a.isDark(e,i)?h.foreground:h.background).appendTo(f)}}a=c;jQuery(a).appendTo(this)})}})(jQuery); //
				}
			</script>\';

echo $print;';$s['yearCopyright']='/*$dy = isset($dy) ? (int)$dy : \'2014\';
if($dy===0) $dy=date(\'Y\');
$sep = isset($sep) ? $sep : \'&mdash;\'; //Разделитель между годами*/
return (date(\'Y\')==$dy) ? date(\'Y\') : $dy.\' \'.$sep.\' \'.date(\'Y\');';$s['ShopStraight_Form']='$orderinfo= $modx->runSnippet(\'ShopOrderCode\',array(\'fields\'=>\'*\'));

$pp .= \'<div class="shop_basket_items">\';
$pp .= $modx->runSnippet(\'ShopBasket_Items\');
$pp .= \'</div><!--.shop_basket_items-->\';
$pp .= \'
<form id="modalCart-[+id+]"class="modalCart_form" action="[~[*id*]~]" method="post">
	<label class="modalCart_group">
		<span class="modalCart_label">Имя</span>
		<input class="modalCart_input" type="text" name="fio" value="\'.htmlspecialchars($orderinfo[\'fio\']).\'" />
	</label>
	<label class="modalCart_group">
		<span class="modalCart_label">Телефон</span>
		<input class="modalCart_input" type="text" name="phone" value="\'.htmlspecialchars($orderinfo[\'phone\']).\'" />
	</label>
	<label class="modalCart_group">
		<span class="modalCart_label">Email</span>
		<input class="modalCart_input" type="text" name="email" value="\'.htmlspecialchars($orderinfo[\'email\']).\'" />
	</label>
	<label class="modalCart_group">
		<span class="modalCart_label">Город</span>
		<input class="modalCart_input" type="text" name="city" value="\'.htmlspecialchars($orderinfo[\'city\']).\'" />
	</label>
	<label class="modalCart_group">
		<span class="modalCart_label">Адрес</span>
		<input class="modalCart_input" type="text" name="address" value="\'.htmlspecialchars($orderinfo[\'address\']).\'" />
	</label>
	<label class="modalCart_group">
		<span class="modalCart_label">Комментарий</span>
		<textarea class="modalCart_input" name="message" >\'.htmlspecialchars($orderinfo[\'message\']).\'</textarea>
	</label>
	<div class="shop_basket_itogo">
	\'.$modx->runSnippet(\'ShopBasket_Itogo\').\'
	</div><!--.shop_basket_itogo-->
	<!-- 
		<div class="modalCart_str">Сумма заказа</div>
		<div class="modalCart_price"> <span>₽</span></div>
		<button class="modalCart_button" type="submit">Оформить заказ</button>
	-->
</form>\';



return $pp;';$s['prepare_catalog_itemTpl']='$data[\'link\'] = $modx->makeUrl($data[\'id\']);
	
$img = $data[\'tv.cat-img\'] ? $data[\'tv.cat-img\'] : $data[\'tv.img\'];
$img = explode(\'||\', $img);
$img = is_array($img) ? $img[0] : false;
if ( ! file_exists(MODX_BASE_PATH.$img)) $img = false;
if ( ! $img) $img = \'img/nophoto.jpg\';
$img_mini = $modx->runSnippet(\'ImgCrop8\',array(\'img\'=>$img,\'h\'=>190));
$data[\'img_mini\'] = $img_mini;

$price = trim($data[\'tv.price\']);
$price = str_replace(\',\',\'.\',$price);
$price = preg_replace("/[^0-9\\.]/",\'\',$price);
$price = floatval($price);
$dec = $price != intval($price) ? 2 : 0;
$price_f = number_format($price, $dec, \',\', \'&thinsp;\');
if ($price) {
	$data[\'price_i\'] = $price;
	$data[\'price\'] = $price_f;
	$data[\'price_f\'] = \'<div class="catalog__price-new">\'.$price_f.\' <span class="ruble">&#8381;</span></div>\';
}

$price2 = trim($data[\'tv.old-price\']);
$price2 = str_replace(\',\',\'.\',$price2);
$price2 = preg_replace("/[^0-9\\.]/",\'\',$price2);
$price2 = floatval($price2);
$dec2 = $price2 != intval($price2) ? 2 : 0;
$price2 = number_format($price2, $dec2, \',\', \'&thinsp;\');
if ($price2) {
	$data[\'old_price\'] = $price2;
	$data[\'old_price_f\'] = \'<div class="catalog__price-old">\'.$price2.\'&nbsp;<span class="ruble">&#8381;</span></div>\';
}

$stat = $modx->runSnippet(\'ShopAction\',array(\'act\'=>\'stat\',\'id\'=>$data[\'id\']));

$data[\'shop_basket_button\'] = \'<div class="buy shopbasketstat_\'.$stat.\' uk-flex">
		<button class="btn shopbasketbtn"><img src="img/cart-color.svg" />Купить</button>
		<a href="[~68~]"><img src="img/cart-color.svg" />В корзине</a>
	</div>\';

if ($data[\'tv.article\']) {
	$data[\'article_f\'] = \'<div class="product__cod">Код товара:<b> \'.$data[\'tv.article\'].\'</b></div>\';
}

if ($data[\'tv.price-text\']) {
	$data[\'price_text_f\'] = \'<div class="product__price-text">\'.$data[\'tv.price-text\'].\'</div>\';
}

if ($data[\'tv.availability\']) {
	$data[\'availability_f\'] = \'<div class="product__available uk-margin-small-top"><span class="product__available-span">Статус товара:</span> \'.$data[\'tv.availability\'].\'</div>\';
}

if ($data[\'tv.brand\']) {
	$data[\'brand_f\'] = \'<div class="product__available uk-margin-small-top"><span class="product__available-span">Бренд:</span> \'.$data[\'tv.brand\'].\'</div>\';
}

if ($data[\'tv.model\']) {
	$data[\'model_f\'] = \'<div class="product__available uk-margin-small-top"><span class="product__available-span">Модель:</span> \'.$data[\'tv.model\'].\'</div>\';
}

if ($data[\'tv.country\']) {
	$data[\'country_f\'] = \'<div class="product__available uk-margin-small-top"><span class="product__available-span">Страна:</span> \'.$data[\'tv.country\'].\'</div>\';
}

if ($data[\'tv.manufacturer_code\']) {
	$data[\'manufacturer_code_f\'] = \'<div class="product__available uk-margin-small-top"><span class="product__available-span">Код производителя:</span> \'.$data[\'tv.manufacturer_code\'].\'</div>\';
}

$specifications_list = \'\';
$res = $modx->db->query("SELECT tv.`caption`, vl.`value`
	FROM ".$modx->getFullTableName(\'site_tmplvars\')." tv
	INNER JOIN ".$modx->getFullTableName(\'site_tmplvar_contentvalues\')." vl ON vl.tmplvarid=tv.id AND vl.contentid=\'{$data[\'id\']}\'
	WHERE tv.category=19 AND vl.`value`<>\'\' ORDER BY tv.`caption`");
if ($res && $modx->db->getRecordCount($res)) {
	$specifications_list .= \'<h3 class="product__title uk-margin-small-bottom">Характеристики</h3>\';
	while ($row = $modx->db->getRow($res)) {
		$specifications_list .= \'<div class="product__har-tr uk-grid-small uk-width-3-5@xl uk-width-2-3@m uk-width-1-1 uk-margin-remove" data-uk-grid>\';
		$specifications_list .= \'<div class="uk-width-expand@s uk-width-auto uk-padding-remove-left" data-uk-leader><span class="product__har-span">\'.$row[\'caption\'].\': &nbsp;</span> </div> <div class="product__value uk-width-2-5@s uk-width-auto">\'.$row[\'value\'].\'</div>\';
		$specifications_list .= \'</div>\';
	}
}
$data[\'specifications_list_f\'] = $specifications_list;
	
return $data;';$s['ShopBasket_Form']='$orderinfo = $modx->runSnippet(\'ShopOrderCode\',array(\'fields\'=>\'*\'));
$pp = \'<form action="[~68~]" method="post">
		<div class="chbf_inp">
			<div class="chbf_lab font2">Имя</div>
			<div class="chbf_val"><input type="text" name="fio" value="\'.htmlspecialchars($orderinfo[\'fio\']).\'" /></div>
		</div>

		<div class="chbf_inp">
			<div class="chbf_lab font2">Телефон<span>*<span></div>
			<div class="chbf_val"><input class="phonemask" type="text" name="phone" value="\'.htmlspecialchars($orderinfo[\'phone\']).\'" /></div>
		</div>

		<div class="chbf_inp">
			<div class="chbf_lab font2">E-mail<span>*<span></div>
			<div class="chbf_val"><input type="text" name="email" value="\'.htmlspecialchars($orderinfo[\'email\']).\'" /></div>
		</div>

		<div class="chbf_inp">
			<div class="chbf_lab font2">Город</div>
			<div class="chbf_val"><input type="text" name="city" value="\'.htmlspecialchars($orderinfo[\'city\']).\'" /></div>
		</div>

		<div class="chbf_inp">
			<div class="chbf_lab font2">Адрес</div>
			<div class="chbf_val"><input type="text" name="address" value="\'.htmlspecialchars($orderinfo[\'address\']).\'" /></div>
		</div>

		<div class="chbf_inp">
			<div class="chbf_lab font2">Комментарий</div>
			<div class="chbf_val"><textarea name="message">\'.htmlspecialchars($orderinfo[\'message\']).\'</textarea></div>
		</div>

		<input class="v1klik_f" type="hidden" name="v1klik_f" value="n" />
		<input class="v1klik_itemid" type="hidden" name="v1klik_itemid" value="0" />
	</form>\';

return $pp;';$s['evoSearch']='//поиск по сайту с учетом словоформ (словаря phpMorphy)
//работает совместно с плагином evoSearch (плагин индексирует, сниппет выводит результаты)
//для работы необходим установленный сниппет DocLister
//пример вызова - для вывода результатов [!evoSearch? &tpl=`evoSearch`!], 
//ПАРАМЕТРЫ
// + &noResult = `Ничего не найдено` - строка, которая выводится при отсутствии результата поиска )необязательно)
// + &addSearch = `0` - для опционального отключения дополнительного поиска при пустом fulltext-search (по умолчанию - 1)
// + &extract=`0` - отключить экстрактор формирует нужную часть текста с подсветкой из результатов поиска (плейсхолдер [+extract+] в чанке вывода результатов DocLister) - по умолчанию 1 (не извлекать)
// + &maxlength=`300` - максимальная длина извлекаемой части текста в резуьлтатах поиска (по умолчанию 350)
// + &show_stat = `0` - отключаем показ статистики "найдено....показано...с...по...". По умолчанию - 1 - показ включен
// + &statTpl - шаблон показа статистики (по умолчанию - <div class="evoSearch_info">По запросу <b>[+stat_request+]</b> найдено всего <b>[+stat_total+]</b>. Показано <b>[+stat_display+]</b>, c [+stat_from+] по [+stat_to+]</div> ), где
//              [+stat_request+] - запрос из строки $_GET[\'search\']
//              [+stat_total+] - найдено всего
//              [+stat_display+] - показано на текущей странице с [+stat_from+] по [+stat_to+] 
// + &rel = `1` - релевантность поиска, по умолчанию 2, чем выше цифра - тем более релевантные результаты и тем их меньше
// + &addLikeSearch = `1` - добавляем функционал для поиска через like (на случай, если слов не было в словаре). По умолчанию - 0
// + addLikeSearchType - тип поиска addLikeSearch (oneword- любое слово, allwords-все слова). По умолчанию exact - фраза целиком
// + addLikeSearchLength - минимальная длина слова для поиска в addLikeSearch (по умолчанию - 3)
//
//остальные параметры - дублируют параметры вызова DocLister
//обрабатывает $_GET[\'search\'] в качестве входной строки для поиска
	
require_once MODX_BASE_PATH . "assets/snippets/evoSearch/evoSearch.snippet.php";';$s['evoSearch_with_Doclister']='$dlprms = array(
		\'tpl\'               => \'@CODE [+id+],\',
		\'extract\'           => \'0\',
		\'show_stat\'         => \'0\',
		\'rel\'               => \'0.01\',
		\'addLikeSearch\'     => \'0\',
		\'addLikeSearchType\' => \'allwords\',
		\'showNoPublish\'     => \'0\',
		\'display\'           => 0,
	);


	$items = $modx->runSnippet(\'evoSearch\',$dlprms);
	$items = preg_replace("/[^0-9,]/",\'\',$items);
	
//	var_dump ($items);
	

	$dlprms = array(
		\'idType\'       => \'documents\',
		\'documents\'    => $items,
		\'tpl\'          => \'catalog_itemTpl\',
		\'prepare\'      => \'prepare_catalog_itemTpl\',
	//	\'selectFields\' => $DL_doc_fields,
		\'tvList\'       => $tvList,
	//	\'filters\'      => \'AND(content:isfolder:=:0;content:template:is:4\'.$filter.\')\',
		\'filters\'      => \'AND(content:isfolder:=:0;\'.$filter.\')\',
//		\'groupBy\'      => \'description\',
	);
//	$dlprms = array_merge($dlprms, $DL_paginate);


	$items = $modx->runSnippet(\'DocLister\',$dlprms);

/*							[!DocLister?
							&
							&documents = `82942, 82943`
							&prepare = `prepare_catalog_itemTpl`
							&tpl     = `catalog_itemTpl`
							&tvList  = `cat-img,img,price,popul,intro-prod`
							&display = `150`
							&sortBy = \'price\',
							&sortOrder = \'ASC\',
							!]	
*/

	return \'<div id="eFiltr_results">\'. $items.\'</div>\';';$s['sitemap']='return require MODX_BASE_PATH.\'assets/snippets/sitemap/snippet.sitemap.php\';';$s['evoSearch_auto']='/**
 * evoSearch_auto
 *
 * Переиндексация seoSearch
 *
 * @version     1.0
 * @date        02.07.2019
 *
 *
 *
 */
$step = 50;
$offset = isset($_SESSION[\'evoSearch_auto_offset\']) ? intval($_SESSION[\'evoSearch_auto_offset\']) : -1*$step;
$offset += $step;
$_SESSION[\'evoSearch_auto_offset\'] = $offset;
print $offset;
$prms = array(
	\'offset\' => $offset,
	\'rowsperonce\' => $step,
	\'reindex\' => 1,
	\'excludeTmpls\' => \'\',
	\'excludeIDs\' => \'\',
	\'TvNames\' => \'price,popul,intro-prod,prod-cod,article\',
	\'unpublished\' => 0,
	\'deleted\' => 0,
	\'dicts\' => rus,eng,
	\'prepare\' => \'\',
);
include_once(MODX_BASE_PATH.\'assets/plugins/evoSearch/plugin.class.php\');
$eSP = new evoSearchPlugin($modx, $prms);
//проверяем наличие и создаем при необходимости нужные поля и индекса
$eSP->prepareRun();
//теперь начинаем работу
$sql = $eSP->makeSQLForSelectWords();

$q = $modx->db->query($sql);
$content_fields = explode(\',\', $eSP->cleanIn($eSP->search_fields));
$flag = false;

while ($row = $modx->db->getRow($q)) {
	$tmp = array();
	foreach($content_fields as $k => $v) {
		if (isset($row[$v]) && !empty($row[$v])) {
			$tmp[] = $row[$v];
		}
	}
	$content_original = implode(\' \', $tmp);
	$content = $modx->stripTags($content_original);
	$content = $eSP->injectTVs($row[\'id\'], $content);
	$words = $eSP->Words2BaseForm(mb_strtoupper($content, \'UTF-8\'));
	$fields = array(
		$eSP->ext_content_field => $modx->db->escape($content),
		$eSP->ext_content_index_field => $modx->db->escape($words),
		\'docid\' => $row[\'id\'],
		\'pagetitle\' => isset($row[\'pagetitle\']) ? $modx->db->escape($row[\'pagetitle\']) : \'\',
		\'table\' => $eSP->content_table_name
	);
	$up = $eSP->updateSearchTable($fields);
	//die();
	$flag = true;
}
//удалим строки индексов для исключенных шаблонов и ресурсов
$eSP->emptyExcluded();
if ($flag) {
?>
<script>setTimeout(function(){
	window.location.reload(true);
}, 1000);</script>
<?php
}';$s['SEOMeta']='if ( ! $id) $id = $modx->documentIdentifier;

$title = $modx->getTemplateVar(\'titl\',\'*\',$id);
$title = $title[\'value\'];
$desc = $modx->getTemplateVar(\'desc\',\'*\',$id);
$desc = $desc[\'value\'];
$keywords = $modx->getTemplateVar(\'keyw\',\'*\',$id);
$keywords = $keywords[\'value\'];

$base = MODX_SITE_URL;

$siteurl = rtrim(MODX_SITE_URL,"/");
$url = ( ! empty($_SERVER[\'REDIRECT_URL\']) ? $_SERVER[\'REDIRECT_URL\'] : \'/\');

$get = strrpos($_SERVER[\'REQUEST_URI\'],\'?\');
$get = $get!==false ? substr($_SERVER[\'REQUEST_URI\'],$get) : \'\';

$canonical = $siteurl.$url.$get;

if ($base) $seometa .= \'<base href="\'.$base.\'" />\';
if ($canonical) $seometa .= "\\n\\t\\t".\'<link rel="canonical" href="\'.$canonical.\'" />\';

$seometa .= "\\n";

$seometa .= "\\n\\t\\t".\'<title>\'.$title.\'</title>\';

$seometa .= "\\n\\t\\t".\'<meta name="description" content="\'.$desc.\'" />\';

$seometa .= "\\n\\t\\t".\'<meta name="keywords" content="\'.$keywords.\'" />\';

return $seometa;';$p=&$this->pluginCache;$p['eFilterHelper']='/*использует общие параметры модуля eLists - не забудьте их подключить в модуле и плагине */
 /*
 предназначен для скрытия/показа только нужных tv из заданных категорий "параметры товара" в зависимости
 от настроек родительской категории по фильтрам и используемым параметрам товара
  а также для установки нужных направлений сортировки на событии onWebPageInit
 */

if(!defined(\'MODX_BASE_PATH\')) die(\'What are you doing? Get out of here!\');


$output = \'\';
//массив разрешеннных ТВ (id)
$allowedParams = array();
//массив запрещенных ТВ (id) - будем их скрывать
$disallowedParams = array();
//массив всех ТВ из категорий "параметры для товара" - $param_cat_id
$tv_list = array();

if($modx->event->name == \'OnDocFormRender\') {
    global $content;
    global $tvsArray;
    $product_template_array = explode(\',\', $product_templates_id);
    if ((isset($content[\'template\']) && in_array($content[\'template\'], $product_template_array)) || !empty($tvsArray[\'tovarparams\'])) {
        
        include_once(MODX_BASE_PATH . \'assets/snippets/eFilter/eFilter.class.php\');
        $eFltr = new eFilter($modx, $params);

        //получаем все возможные ТВ
        $sql = "SELECT `id`,`name`,`caption` FROM " . $modx->getFullTableName(\'site_tmplvars\') . " WHERE `category` IN (" . $param_cat_id . ") ORDER BY `rank` ASC, `caption` ASC";
        $q = $modx->db->query($sql);
        while($row = $modx->db->getRow($q)){
            $tv_list[$row[\'id\']]= $row[\'name\'];
        }
        
        //узнаем родителя, чтобы грузить конфиг tovarparams
        //приоритет у прямых родителей товара, по ним сначала и пройдемся
        $pid == \'\';
        $allowedParams = array();
        if (isset($_GET[\'pid\'])) {
             $pid = $_GET[\'pid\'];
        }
        if (isset($content[\'parent\'])) {
            $pid = $content[\'parent\'];
        }
        if (isset($_POST[\'pid\'])) {
            $pid = $_POST[\'pid\'];
        }
        if ($pid == \'\') {$pid = \'1\';}
        if (!empty($tvsArray[\'tovarparams\']) && !empty($content[\'id\'])) {
            $pid = $content[\'id\'];
        }
        $eFltr->docid = $pid;
        //разрешенные для данного типа товара параметры
        $allowedTmp = $eFltr->getFilterParam ($eFltr->param_tv_name);
        
        //если параметров не обнаружено, пройдемся по первой тегованной категории
        //возможно, они есть там
        if (empty($allowedTmp) && isset($_GET[\'id\']) && (int)$_GET[\'id\'] != \'0\' && isset($tv_category_tag) && $tv_category_tag != \'\') {
            //определяем родителя по первой прикрепленной категории
            $category = $modx->db->getValue("SELECT value FROM" . $modx->getFullTableName(\'site_tmplvar_contentvalues\') . " WHERE tmplvarid={$tv_category_tag} AND contentid=" . (int)$_GET[\'id\'] . " LIMIT 0,1");
            if ($category) {//категория есть
                $tmp = explode(\',\', $category);
                $pid = $tmp[0];
                if ($pid) {
                    $eFltr->docid = $pid;
                    //разрешенные для данного типа товара параметры
                    $allowedTmp = $eFltr->getFilterParam ($eFltr->param_tv_name);
                }
            }
        }
        
        //строим итоговый массив разрешенных для данного вида товара параметров
        if (isset($allowedTmp[\'fieldValue\'])) {
            foreach ($allowedTmp[\'fieldValue\'] as $k => $v) {
                $allowedParams[$v[\'param_id\']] = \'1\';
            }
        }

        //строим массив запрещенных ТВ (на основе перечня всех ТВ и списка разрешенных)
        foreach ($tv_list as $k => $v){
            if (!isset($allowedParams[$k])) {
                $disallowedParams[$k] = \'1\';
            }
        }
        
        //скрипт скрытия всех "запрещенных ТВ"
        //т.к. managermanager почти у всех и он уже подключил jquery, то обращаемся смело к нему
        if (!empty($disallowedParams)) {
            $output .= \'<script type="text/javascript">$j(document).ready(function(){\';
            foreach ($disallowedParams as $k => $v) {
                $output .= \'$j(".sectionBody").find("#tv\' . $k . \'").parents("tr").addClass("hide_next");\';
                //фикс чекбоксов
                $output .= \'$j(".sectionBody").find("input[name=\\\'tv\' . $k . \'[]\\\']").parents("tr").addClass("hide_next");\';
                //фикс радио
                $output .= \'$j(".sectionBody").find("input[name=\\\'tv\' . $k . \'\\\']").parents("tr").addClass("hide_next");\';
            }
            $output .= \'})</script>\';
            $output .= \'<style>tr.hide_next,tr.hide_next + tr{/*display:none;*/}</style>\' . "\\n";
        }
    }
    if (is_array($tvsArray) && isset($tvsArray[\'tovarparams\'])) {
        //есть tv tovarparams - будем его стилизовать
        $style = file_get_contents(MODX_SITE_URL . \'assets/snippets/eFilter/html/tovarparams_style.tpl\');
        $output .= $modx->parseText($style, array(\'param_tv_id\' => $param_tv_id));
    }
    $modx->event->output($output);
}

if ($modx->event->name == \'OnWebPageInit\') {
    $docid = $modx->documentIdentifier;    
    if (isset($_POST[\'action\'])) {
        $action = $modx->db->escape($_POST[\'action\']);
        switch ($action) {
            case \'changesortBy\':
                //ставим в сессию параметры сортировки и вывода
                $sortBy = ($_POST[\'sortBy\'] && !empty($_POST[\'sortBy\'])) ? $modx->db->escape($_POST[\'sortBy\']) : \'\';
                $sortOrder = ($_POST[\'sortOrder\'] && !empty($_POST[\'sortOrder\'])) ? $modx->db->escape($_POST[\'sortOrder\']) : \'\';
                $sortDisplay = ($_POST[\'sortDisplay\'] && !empty($_POST[\'sortDisplay\'])) ? $modx->db->escape($_POST[\'sortDisplay\']) : \'\';
                if (!empty($sortBy)) {
                    $_SESSION[\'sortBy\'] = $sortBy;
                }
                if (!empty($sortOrder)) {
                    $_SESSION[\'sortOrder\'] = $sortOrder;
                }
                if (!empty($sortDisplay)) {
                    $_SESSION[\'sortDisplay\'] = $sortDisplay;
                }
                $_SESSION[\'sortDocument\'] = $docid;
                break;

            default:
                break;
            
        }
    }
    //срасываем установки сортировки при уходе на другую страницу
    if (isset($_SESSION[\'sortDocument\']) && $_SESSION[\'sortDocument\'] != $docid) {
        unset($_SESSION[\'sortDocument\']);
        unset($_SESSION[\'sortOrder\']);
        unset($_SESSION[\'sortBy\']);
        unset($_SESSION[\'sortDisplay\']);
    }
    
}';$p['eFilterHelperProps']='{"param_tv_id":"23","product_templates_id":"4","param_cat_id":"19,11","tovarChunkName":"catalog_itemTpl","pattern_folder":"assets\\/images\\/pattern\\/"}';$p['OutdatedExtrasCheck']='/**
 * OutdatedExtrasCheck
 *
 * Check for Outdated critical extras not compatible with EVO 1.4.6
 *
 * @category	plugin
 * @version     1.4.6
 * @license 	http://www.gnu.org/copyleft/gpl.html GNU Public License (GPL)
 * @package     evo
 * @author      Author: Nicola Lambathakis
 * @internal    @events OnManagerWelcomeHome
 * @internal    @properties &wdgVisibility=Show widget for:;menu;All,AdminOnly,AdminExcluded,ThisRoleOnly,ThisUserOnly;AdminOnly &ThisRole=Run only for this role:;string;;;(role id) &ThisUser=Run only for this user:;string;;;(username)
 * @internal    @modx_category Manager and Admin
 * @internal    @installset base
 * @internal    @disabled 0
 */

require MODX_BASE_PATH . \'assets/plugins/extrascheck/OutdatedExtrasCheck.plugin.php\';';$p['OutdatedExtrasCheckProps']='{"wdgVisibility":"AdminOnly"}';$p['TransAlias']='require MODX_BASE_PATH.\'assets/plugins/transalias/plugin.transalias.php\';';$p['TransAliasProps']='{"table_name":"russian","char_restrict":"lowercase alphanumeric","remove_periods":"No","word_separator":"dash"}';$p['ManagerManager']='/**
 * ManagerManager
 *
 * Customize the EVO Manager to offer bespoke admin functions for end users or manipulate the display of document fields in the manager.
 *
 * @category plugin
 * @version 0.6.3
 * @license http://creativecommons.org/licenses/GPL/2.0/ GNU Public License (GPL v2)
 * @internal @properties &remove_deprecated_tv_types_pref=Remove deprecated TV types;list;yes,no;yes &config_chunk=Configuration Chunk;text;mm_rules
 * @internal @events OnDocFormRender,OnDocFormPrerender,OnBeforeDocFormSave,OnDocFormSave,OnDocDuplicate,OnPluginFormRender,OnTVFormRender
 * @internal @modx_category Manager and Admin
 * @internal @installset base
 * @internal @legacy_names Image TV Preview, Show Image TVs
 * @reportissues https://github.com/DivanDesign/MODXEvo.plugin.ManagerManager/
 * @documentation README [+site_url+]assets/plugins/managermanager/readme.html
 * @documentation Official docs http://code.divandesign.biz/modx/managermanager
 * @link        Latest version http://code.divandesign.biz/modx/managermanager
 * @link        Additional tools http://code.divandesign.biz/modx
 * @link        Full changelog http://code.divandesign.biz/modx/managermanager/changelog
 * @author      Inspired by: HideEditor plugin by Timon Reinhard and Gildas; HideManagerFields by Brett @ The Man Can!
 * @author      DivanDesign studio http://www.DivanDesign.biz
 * @author      Nick Crossland http://www.rckt.co.uk
 * @author      Many others
 * @lastupdate  22/01/2018
 */

// Run the main code
include($modx->config[\'base_path\'].\'assets/plugins/managermanager/mm.inc.php\');';$p['ManagerManagerProps']='{"remove_deprecated_tv_types_pref":"yes","config_chunk":"mm_rules"}';$p['TinyMCE4']='/**
 * TinyMCE4
 *
 * Javascript rich text editor
 *
 * @category    plugin
 * @version     4.7.4
 * @license     http://www.gnu.org/copyleft/gpl.html GNU Public License (GPL)
 * @internal    @properties &styleFormats=Custom Style Formats <b>RAW</b><br/><br/><ul><li>leave empty to use below block/inline formats</li><li>allows simple-format: <i>Title,cssClass|Title2,cssClass2</i></li><li>Also accepts full JSON-config as per TinyMCE4 docs / configure / content-formating / style_formats</li></ul>;textarea; &styleFormats_inline=Custom Style Formats <b>INLINE</b><br/><br/><ul><li>will wrap selected text with span-tag + css-class</li><li>simple-format only</li></ul>;textarea;InlineTitle,cssClass1|InlineTitle2,cssClass2 &styleFormats_block=Custom Style Formats <b>BLOCK</b><br/><br/><ul><li>will add css-class to selected block-element</li><li>simple-format only</li></ul>;textarea;BlockTitle,cssClass3|BlockTitle2,cssClass4 &customParams=Custom Parameters<br/><b>(Be careful or leave empty!)</b>;textarea; &entityEncoding=Entity Encoding;list;named,numeric,raw;named &entities=Entities;text; &pathOptions=Path Options;list;Site config,Absolute path,Root relative,URL,No convert;Site config &resizing=Advanced Resizing;list;true,false;false &disabledButtons=Disabled Buttons;text; &webTheme=Web Theme;test;webuser &webPlugins=Web Plugins;text; &webButtons1=Web Buttons 1;text;bold italic underline strikethrough removeformat alignleft aligncenter alignright &webButtons2=Web Buttons 2;text;link unlink image undo redo &webButtons3=Web Buttons 3;text; &webButtons4=Web Buttons 4;text; &webAlign=Web Toolbar Alignment;list;ltr,rtl;ltr &width=Width;text;100% &height=Height;text;400px &introtextRte=<b>Introtext RTE</b><br/>add richtext-features to "introtext";list;enabled,disabled;disabled &inlineMode=<b>Inline-Mode</b>;list;enabled,disabled;disabled &inlineTheme=<b>Inline-Mode</b><br/>Theme;text;inline &browser_spellcheck=<b>Browser Spellcheck</b><br/>At least one dictionary must be installed inside your browser;list;enabled,disabled;disabled &paste_as_text=<b>Force Paste as Text</b>;list;enabled,disabled;disabled
 * @internal    @events OnLoadWebDocument,OnParseDocument,OnWebPagePrerender,OnLoadWebPageCache,OnRichTextEditorRegister,OnRichTextEditorInit,OnInterfaceSettingsRender
 * @internal    @modx_category Manager and Admin
 * @internal    @legacy_names TinyMCE Rich Text Editor
 * @internal    @installset base
 * @logo        /assets/plugins/tinymce4/tinymce/logo.png
 * @reportissues https://github.com/extras-evolution/tinymce4-for-modx-evo
 * @documentation Plugin docs https://github.com/extras-evolution/tinymce4-for-modx-evo
 * @documentation Official TinyMCE4-docs https://www.tinymce.com/docs/
 * @author      Deesen
 * @lastupdate  2018-01-17
 */
if (!defined(\'MODX_BASE_PATH\')) { die(\'What are you doing? Get out of here!\'); }

require(MODX_BASE_PATH."assets/plugins/tinymce4/plugin.tinymce.inc.php");';$p['TinyMCE4Props']='{"styleFormats_inline":"InlineTitle,cssClass1|InlineTitle2,cssClass2","styleFormats_block":"BlockTitle,cssClass3|BlockTitle2,cssClass4","entityEncoding":"named","pathOptions":"Site config","resizing":"false","webTheme":"webuser","webButtons1":"bold italic underline strikethrough removeformat alignleft aligncenter alignright","webButtons2":"link unlink image undo redo","webAlign":"ltr","width":"100%","height":"400px","introtextRte":"disabled","inlineMode":"disabled","inlineTheme":"inline","browser_spellcheck":"disabled","paste_as_text":"disabled"}';$p['FileSource']='require MODX_BASE_PATH.\'assets/plugins/filesource/plugin.filesource.php\';';$p['ElementsInTree']='require MODX_BASE_PATH.\'assets/plugins/elementsintree/plugin.elementsintree.php\';';$p['ElementsInTreeProps']='{"adminRoleOnly":"no","treeButtonsInTab":"yes"}';$p['Forgot Manager Login']='require MODX_BASE_PATH.\'assets/plugins/forgotmanagerlogin/plugin.forgotmanagerlogin.php\';';$p['CodeMirror']='/**
 * CodeMirror
 *
 * JavaScript library that can be used to create a relatively pleasant editor interface based on CodeMirror 5.33 (released on 21-12-2017)
 *
 * @category    plugin
 * @version     1.5
 * @license     http://www.gnu.org/copyleft/gpl.html GNU Public License (GPL)
 * @package     evo
 * @internal    @events OnDocFormRender,OnChunkFormRender,OnModFormRender,OnPluginFormRender,OnSnipFormRender,OnTempFormRender,OnRichTextEditorInit
 * @internal    @modx_category Manager and Admin
 * @internal    @properties &theme=Theme;list;default,ambiance,blackboard,cobalt,eclipse,elegant,erlang-dark,lesser-dark,midnight,monokai,neat,night,one-dark,rubyblue,solarized,twilight,vibrant-ink,xq-dark,xq-light;default &darktheme=Dark Theme;list;default,ambiance,blackboard,cobalt,eclipse,elegant,erlang-dark,lesser-dark,midnight,monokai,neat,night,one-dark,rubyblue,solarized,twilight,vibrant-ink,xq-dark,xq-light;one-dark &fontSize=Font-size;list;10,11,12,13,14,15,16,17,18;14 &lineHeight=Line-height;list;1,1.1,1.2,1.3,1.4,1.5;1.3 &indentUnit=Indent unit;int;4 &tabSize=The width of a tab character;int;4 &lineWrapping=lineWrapping;list;true,false;true &matchBrackets=matchBrackets;list;true,false;true &activeLine=activeLine;list;true,false;false &emmet=emmet;list;true,false;true &search=search;list;true,false;false &indentWithTabs=indentWithTabs;list;true,false;true &undoDepth=undoDepth;int;200 &historyEventDelay=historyEventDelay;int;1250
 * @internal    @installset base
 * @reportissues https://github.com/evolution-cms/evolution/issues/
 * @documentation Official docs https://codemirror.net/doc/manual.html
 * @author      hansek from http://www.modxcms.cz
 * @author      update Mihanik71
 * @author      update Deesen
 * @author      update 64j
 * @lastupdate  08-01-2018
 */

$_CM_BASE = \'assets/plugins/codemirror/\';

$_CM_URL = $modx->config[\'site_url\'] . $_CM_BASE;

require(MODX_BASE_PATH. $_CM_BASE .\'codemirror.plugin.php\');';$p['CodeMirrorProps']='{"theme":"default","darktheme":"one-dark","fontSize":"14","lineHeight":"1.3","indentUnit":"4","tabSize":"4","lineWrapping":"true","matchBrackets":"true","activeLine":"false","emmet":"true","search":"false","indentWithTabs":"true","undoDepth":"200","historyEventDelay":"1250"}';$p['CompressHTML']='/**
 * CompressHTML
 *
 * HTML компрессор
 *
 * @version     2.0
 * @date        16.06.2017
 * @internal    @events OnWebPagePrerender
 *
 *
 *
 *
 *
 *
 */

if( ! isset($_GET[\'test\']))
{
	$filecontent= $modx->documentOutput;
	$filetype= \'.html\';
	$strtr[\'.html\']= array(
	);
	$pregreplace[\'.html\'][0]= array(
		//"/<!--[^\\[](.*)-->/sU" => "",
		"/[\\r]/" => "",
		"/[\\t]/" => "\\n",
		"/[\\n]{2,}/" => "\\n",
		"/[ ]{2,}/" => " ",
		"/(\\n )/" => "\\n",
		"/ type=\\"text\\/javascript\\"/" => "",
		//"/([\\n])(.*)<\\/head>/" => "",
		"/\\/>[\\n]</" => "/><",
		"/<ul>[\\n]<li/" => "<ul><li",
		"/<\\/li>[\\n]<\\/ul>/" => "</li></ul>",
		"/<\\/li>[\\n]<li/" => "</li><li",
		"/<\\/div>[\\n]<\\/div>/" => "</div></div>",
		"/<\\/div>[\\n]<div/" => "</div><div",
	);
	if( isset( $strtr[ $filetype ] ) ) $strtr_type= $strtr[ $filetype ];
	if( isset( $pregreplace[ $filetype ][0] ) ) $pregreplace_type_0= $pregreplace[ $filetype ][0];
	if( isset( $pregreplace[ $filetype ][1] ) ) $pregreplace_type_1= $pregreplace[ $filetype ][1];
	if( $strtr_type ) $filecontent= strtr( $filecontent, $strtr_type );
	if( $pregreplace_type_0 )
	{
		foreach( $pregreplace_type_0 AS $pattern => $replacement )
			$filecontent= preg_replace( $pattern, $replacement, $filecontent );
	}
	$modx->documentOutput= $filecontent;
}';$p['Redirect']='/**
 * Redirect
 *
 * Редиректы
 *
 * @version   11.2
 * @date 04.01.2018
 * @internal    @events OnWebPageInit,OnPageNotFound
 *
 *
 *
 *
 *
 */

//-----------------------------------------------------------------
$redirect= array(
	1 => array(
		\'/index.html\' => \'/\',
		\'/index.php\' => \'/\',
	)
);
//-----------------------------------------------------------------
//
//
//
//
//
//-----------------------------------------------------------------

$e= &$modx->Event;
//if($modx->isFrontend()) $modx->logEvent(5, 1, \'\', microtime() .\' -- \'. $e->name);
if($e->name != \'OnWebPageInit\' && $e->name != \'OnPageNotFound\') return;

$site= rtrim(MODX_SITE_URL,DIRECTORY_SEPARATOR);
$base= rtrim(MODX_BASE_URL,DIRECTORY_SEPARATOR);
if($base==\'/\') $base= \'\';
$url= $_SERVER[\'REQUEST_URI\'];
if($base) $url= str_replace($base, \'\', $url);
$url2= false;

if($redirect[1][$url])
{
	$url2= $redirect[1][$url];
}else{
	foreach($redirect[1] AS $key => $row)
	{
		if(substr($key,0,1)==\'=\')
		{
			$key= substr($key,1);
			if(strpos($url, $key)!==false)
			{
				$url2= str_replace($key, $row, $url);
			}
		}
		
		if(substr($key,0,1)==\'+\')
		{
			$key= substr($key,1);
			$key2= preg_quote($key,"/");
			if(preg_match($key2, $url, $matches)===1)
			{
				$alias= mysql_real_escape_string($matches[$row]);
				$rr= mysql_query("SELECT id FROM ".$modx->getFullTableName(\'site_content\')." WHERE alias=\'{$alias}\' LIMIT 1");
				if($rr && mysql_num_rows($rr)==1)
				{
					$url2= $modx->makeUrl(mysql_result($rr, 0, \'id\'));
				}
			}
		}
	}
}
if($url2)
{
	header(\'HTTP/1.1 301 Moved Permanently\');
	header(\'location: \'.$site.$base.$url2);
	exit();
}';$p['SimpleGallery']='require MODX_BASE_PATH.\'assets/plugins/simplegallery/plugin.simplegallery.php\';';$p['SimpleGalleryProps']='{"tabName":"SimpleGallery","folder":"assets\\/galleries\\/","thumbsCache":"assets\\/.sgThumbs\\/","w":"140","h":"105","clientResize":"No","jpegQuality":"0.93","skipPHPThumb":"No","allowDuplicate":"No"}';$p['sgThumb']='require MODX_BASE_PATH.\'assets/plugins/simplegallery/plugin.sgthumb.php\';';$p['sgThumbProps']='{"tconfig":"See plugin code for details","keepOriginal":"No","originalFolder":"original"}';$p['Formochki']='/**
 * Formochki
 *
 * Формочки
 *
 * @category    plugin
 * @version     3.0
 * @date        13.07.2018
 * @internal    @events OnWebPageInit
 *
 *
 *
 */
$e = &$modx->Event;
if ($e->name != \'OnWebPageInit\' || ! isset($_GET[\'formochki\'])) return;

$forms = array(
	1 => array(
		\'subject\' => \'Заказ ДЕМО\',
		\'captcha\'  => false,
		\'mailto\'   => \'\',
		\'mailfrom\' => false,
		\'fromname\' => false,
		\'replyto\'  => false,
		\'cc\'       => \'\',
		\'bcc\'      => false,
		\'debug\'    => false,
		\'fields\'   => array(
			array(
				\'label\'    => \'Как к вам обращаться?\',
				\'name\'     => \'fname\',
				\'type\'     => \'text\',
				\'required\' => false,
			),
			array(
				\'label\'         => \'Номер телефона\',
				\'name\'          => \'phone\',
				\'type\'          => \'text\',
				\'required\'      => true,
				\'required_text\' => \'Укажите номер телефона.\',
			),
			array(
				\'label\'         => \'Электронная почта\',
				\'name\'          => \'email\',
				\'type\'          => \'text\',
				\'required\'      => true,
				\'required_text\' => \'Укажите электронную почту.\',
			),
		),
	),
	
	3 => array(
		\'subject\' => \'Заказ обратного звонка\',
		\'captcha\'  => false,
		\'mailto\'   => \'\',
		\'mailfrom\' => false,
		\'fromname\' => false,
		\'replyto\'  => false,
		\'cc\'       => \'info@.ru\',
		\'bcc\'      => false,
		\'debug\'    => false,
		\'fields\'   => array(
			array(
				\'label\'    => \'Как к вам обращаться?\',
				\'name\'     => \'fname\',
				\'type\'     => \'text\',
				\'required\' => false,
			),
			array(
				\'label\'         => \'Номер телефона\',
				\'name\'          => \'phone\',
				\'type\'          => \'text\',
				\'required\'      => true,
				\'required_text\' => \'Укажите номер телефона.\',
			),
		),
	),
);

// -------------------------------------------------------------------------------
$formid = intval($_POST[\'formid\']);
$form   = $forms[$formid];

$pageid = intval($_POST[\'pageid\']);

if ( ! is_array($form[\'fields\'])) return;

foreach ($form[\'fields\'] AS &$field) {
	$value = trim($_POST[$field[\'name\'] ]);
	if ($field[\'type\'] == \'textarea\') {
		$value = str_replace("\\r", \'\', $value);
		$value = str_replace("\\n", \'<br>\', $value);
	}
	
	if ($field[\'required\'] === \'bool\') {
	} elseif ($field[\'required\'] === \'reg\' && ! $value) {
	} elseif ($field[\'required\'] && ! $value) {
		$errors .= \'<div>\'.($field[\'required_text\'] ? $field[\'required_text\'] : \'Заполните \'.$field[\'label\']).\'</div>\';
	}
	
	$mail_filds .= \'<p><b>\'.$field[\'label\'].\':</b> \'.$value.\'</p>\';
	
	$values[$field[\'name\'] ] = $value;
}

if ($errors) {
	$p = \'{"result":"er","text":"\'.$errors.\'"}\';
	$modx->documentContent = $p;
	$modx->outputContent();
	exit;
}

$form[\'subject\'] .= \', \'.MODX_SITE_URL;

$mail = \'<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>\'.$form[\'subject\'].\'</title></head><body><h2>\'.$form[\'subject\'].\'</h2>\';
$mail .= \'<p><b>Отправлено со страницы:</b> \'.$modx->makeUrl($pageid,\'\',\'\',\'full\').\'</p>\';
$mail .= $mail_filds;
$mail .= \'<p><b>Дата и время сообщения:</b> \'.date(\'d.m.Y, H:i\').\'</p>\';
$mail .= \'</body></html>\';


// -------------------------------------------------------------------------------
if (true) {
	$modx->loadExtension(\'modxmailer\');
	if ($form[\'debug\']) {
		$modx->mail->SMTPDebug   = 2;
		$modx->mail->Debugoutput = \'html\';
	}
	if ( ! $form[\'mailfrom\']) {
		$form[\'mailfrom\'] = $modx->config[\'smtp_username\'];	
	}
	$modx->mail->From     = $form[\'mailfrom\'];
	$modx->mail->Sender   = $form[\'mailfrom\'];
	if ($form[\'fromname\']) $modx->mail->FromName = $form[\'fromname\'];
	$modx->mail->isHTML(true);
	$modx->mail->Subject = $form[\'subject\'];
	$modx->mail->Body    = $mail;

	if ($form[\'replyto\'] || $values[\'email\']) {
		$modx->mail->addReplyTo($form[\'replyto\'] ? $form[\'replyto\'] : $values[\'email\']);
	}
	if ($form[\'mailto\']) {
		$form[\'mailto\'] = explode(\',\', $form[\'mailto\']);
		foreach ($form[\'mailto\'] AS $row) {
			$modx->mail->addAddress(trim($row));
		}
	}
	if ($form[\'cc\']) {
		$form[\'cc\'] = explode(\',\', $form[\'cc\']);
		foreach ($form[\'cc\'] AS $row) {
			$modx->mail->addCC(trim($row));
		}
	}

	if ($form[\'bcc\']) {
		$form[\'bcc\'] = explode(\',\', $form[\'bcc\']);
		foreach ($form[\'bcc\'] AS $row) {
			$modx->mail->addBCC(trim($row));
		}
	}

	$result = $modx->mail->send();
}
// -------------------------------------------------------------------------------

if ($result) {
	$p = \'{"result":"ok", "hideform":"true"}\';
} else {
	$p = \'{"result":"er","text":"<div>Ошибка! Повторите попытку позже.</div>"}\';
}

$modx->documentContent = $p;
$modx->outputContent();
exit;';$p['СpecificationsTV']='$e= &$modx->Event;
$mid= intval($e->params[\'id\']);
if($e->name == "OnDocFormSave")
{
	$tbs[]= \'site_multi_tmplvar_values\';
}';$p['FiltersUpdateDefaultPrms']='/**
 * FiltersUpdateDefaultPrms
 *
 * Обновление списка параметров по-умолчанию для всех категорий
 *
 * @category    plugin
 * @version     1.0
 * @date        18.07.2019
 * @internal    @events OnDocFormSave
 *
 *
 *
 */
$e = &$modx->Event;
$mid = intval($e->params[\'id\']);
if ( ! $mid) return;
if ($e->name != \'OnDocFormSave\') return;
if ($mid != 4) return;

$tv = $modx->getTemplateVar(\'tovarparams\', \'*\', $mid);
if ( ! is_array($tv)) return;
$def = $tv[\'value\'];

$def = $modx->db->escape($def);
$res = $modx->db->query("UPDATE ".$modx->getFullTableName(\'site_tmplvars\')."
				SET default_text=\'{$def}\' WHERE id=23 LIMIT 1");';$p['evoSearch']='/**
 * до первого запуска сниппета на фронтэнде сайта необходимо запустить индексацию (сохранить любой ресурс в админке)
 *
 * индексация запускается сохранением любого ресурса (вызовом события onDocFormSave)
 *
 * при первом запуске индексации или необходимости переиндексации необходимо выставить параметр "Переиндексировать все" = 1, начальные строки и количество строк за сеанс устанавливаются в зависимости от 
 * возможностей вашего хостинга (например 0 и 10 000 соответственно - проиндексирует строки с 0 в количестве 10 000 штук в БД
 * необходимо открыть и пересохранить любой документ для создания события onDocFormSave
 *
 * для последующей работы установите "Переиндексировать все" = 0, "Строк за сеанс индексировать" = 1 
 * при этом происходит переиндксация только того документа, который сохраняется
 *
 * индексируются pagetitle,longtitle,description,introtext.content и указанные явно в плагине ТВ (по именам через запятую)
 *
*/

require_once MODX_BASE_PATH . "assets/plugins/evoSearch/evoSearch.plugin.php";';$p['evoSearchProps']='{"offset":"0","rowsperonce":"1","reindex":"0","TvNames":"model,article","unpublished":"0","deleted":"0","dicts":"rus,eng"}';$p['GO_TO_UNPUBL']='// event OnParseDocument

$e = &$modx->Event;
if ($e->name != \'OnParseDocument\' || $modx->documentIdentifier != 88342) return;

$modx->documentOutput = \'[[GO_TO_UNPUBL]]\';';$e=&$this->pluginEvent;$e['OnBeforeDocFormSave']=array('ManagerManager');$e['OnBeforeManagerLogin']=array('Forgot Manager Login');$e['OnBeforePluginFormSave']=array('FileSource');$e['OnBeforeSnipFormSave']=array('FileSource');$e['OnChunkFormDelete']=array('ElementsInTree');$e['OnChunkFormRender']=array('CodeMirror');$e['OnChunkFormSave']=array('ElementsInTree');$e['OnDocDuplicate']=array('ManagerManager','SimpleGallery');$e['OnDocFormPrerender']=array('ManagerManager');$e['OnDocFormRender']=array('SimpleGallery','CodeMirror','eFilterHelper','ManagerManager');$e['OnDocFormSave']=array('evoSearch','ManagerManager','СpecificationsTV','FiltersUpdateDefaultPrms');$e['OnEmptyTrash']=array('SimpleGallery');$e['OnFileBrowserUpload']=array('sgThumb');$e['OnInterfaceSettingsRender']=array('TinyMCE4');$e['OnLoadWebDocument']=array('TinyMCE4');$e['OnLoadWebPageCache']=array('TinyMCE4');$e['OnManagerAuthentication']=array('Forgot Manager Login');$e['OnManagerLoginFormRender']=array('Forgot Manager Login');$e['OnManagerMainFrameHeaderHTMLBlock']=array('ElementsInTree');$e['OnManagerTreePrerender']=array('ElementsInTree');$e['OnManagerTreeRender']=array('ElementsInTree');$e['OnManagerWelcomeHome']=array('OutdatedExtrasCheck');$e['OnModFormDelete']=array('ElementsInTree');$e['OnModFormRender']=array('CodeMirror');$e['OnModFormSave']=array('ElementsInTree');$e['OnPageNotFound']=array('Redirect');$e['OnParseDocument']=array('GO_TO_UNPUBL','TinyMCE4');$e['OnPluginFormDelete']=array('ElementsInTree');$e['OnPluginFormPrerender']=array('FileSource');$e['OnPluginFormRender']=array('CodeMirror','ManagerManager','FileSource');$e['OnPluginFormSave']=array('ElementsInTree');$e['OnRichTextEditorInit']=array('TinyMCE4','CodeMirror');$e['OnRichTextEditorRegister']=array('TinyMCE4');$e['OnSnipFormDelete']=array('ElementsInTree');$e['OnSnipFormPrerender']=array('FileSource');$e['OnSnipFormRender']=array('FileSource','CodeMirror');$e['OnSnipFormSave']=array('ElementsInTree');$e['OnStripAlias']=array('TransAlias');$e['OnTempFormDelete']=array('ElementsInTree');$e['OnTempFormRender']=array('CodeMirror');$e['OnTempFormSave']=array('ElementsInTree');$e['OnTVFormDelete']=array('ElementsInTree');$e['OnTVFormRender']=array('ManagerManager');$e['OnTVFormSave']=array('ElementsInTree');$e['OnWebPageInit']=array('eFilterHelper','Redirect','Formochki');$e['OnWebPagePrerender']=array('TinyMCE4','CompressHTML');
